(window.webpackJsonp=window.webpackJsonp||[]).push([[55],{604:function(t,e,a){"use strict";a.r(e);var n=a(21),s=Object(n.a)({},(function(){var t=this,e=t._self._c;return e("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[e("h1",{attrs:{id:"aproba"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#aproba"}},[t._v("#")]),t._v(" aproba")]),t._v(" "),e("p",[t._v("A ridiculously light-weight function argument validator")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("var validate = require(\"aproba\")\n\nfunction myfunc(a, b, c) {\n  // `a` must be a string, `b` a number, `c` a function\n  validate('SNF', arguments) // [a,b,c] is also valid\n}\n\nmyfunc('test', 23, function () {}) // ok\nmyfunc(123, 23, function () {}) // type error\nmyfunc('test', 23) // missing arg error\nmyfunc('test', 23, function () {}, true) // too many args error\n\n")])])]),e("p",[t._v("Valid types are:")]),t._v(" "),e("table",[e("thead",[e("tr",[e("th",{staticStyle:{"text-align":"center"}},[t._v("type")]),t._v(" "),e("th",{staticStyle:{"text-align":"left"}},[t._v("description")])])]),t._v(" "),e("tbody",[e("tr",[e("td",{staticStyle:{"text-align":"center"}},[t._v("*")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("matches any type")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"center"}},[t._v("A")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("Array.isArray")]),t._v(" OR an "),e("code",[t._v("arguments")]),t._v(" object")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"center"}},[t._v("S")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("typeof == string")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"center"}},[t._v("N")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("typeof == number")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"center"}},[t._v("F")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("typeof == function")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"center"}},[t._v("O")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("typeof == object and not type A and not type E")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"center"}},[t._v("B")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("typeof == boolean")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"center"}},[t._v("E")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("instanceof Error")]),t._v(" OR "),e("code",[t._v("null")]),t._v(" "),e("strong",[t._v("(special: see below)")])])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"center"}},[t._v("Z")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("== "),e("code",[t._v("null")])])])])]),t._v(" "),e("p",[t._v("Validation failures throw one of three exception types, distinguished by a\n"),e("code",[t._v("code")]),t._v(" property of "),e("code",[t._v("EMISSINGARG")]),t._v(", "),e("code",[t._v("EINVALIDTYPE")]),t._v(" or "),e("code",[t._v("ETOOMANYARGS")]),t._v(".")]),t._v(" "),e("p",[t._v("If you pass in an invalid type then it will throw with a code of\n"),e("code",[t._v("EUNKNOWNTYPE")]),t._v(".")]),t._v(" "),e("p",[t._v("If an "),e("strong",[t._v("error")]),t._v(" argument is found and is not null then the remaining\narguments are optional.  That is, if you say "),e("code",[t._v("ESO")]),t._v(" then that's like using a\nnon-magical "),e("code",[t._v("E")]),t._v(" in: "),e("code",[t._v("E|ESO|ZSO")]),t._v(".")]),t._v(" "),e("h3",{attrs:{id:"but-i-have-optional-arguments"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#but-i-have-optional-arguments"}},[t._v("#")]),t._v(" But I have optional arguments?!")]),t._v(" "),e("p",[t._v("You can provide more than one signature by separating them with pipes "),e("code",[t._v("|")]),t._v(".\nIf any signature matches the arguments then they'll be considered valid.")]),t._v(" "),e("p",[t._v("So for example, say you wanted to write a signature for\n"),e("code",[t._v("fs.createWriteStream")]),t._v(".  The docs for it describe it thusly:")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("fs.createWriteStream(path[, options])\n")])])]),e("p",[t._v("This would be a signature of "),e("code",[t._v("SO|S")]),t._v(".  That is, a string and and object, or\njust a string.")]),t._v(" "),e("p",[t._v("Now, if you read the full "),e("code",[t._v("fs")]),t._v(" docs, you'll see that actually path can ALSO\nbe a buffer.  And options can be a string, that is:")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("path <String> | <Buffer>\noptions <String> | <Object>\n")])])]),e("p",[t._v("To reproduce this you have to fully enumerate all of the possible\ncombinations and that implies a signature of "),e("code",[t._v("SO|SS|OO|OS|S|O")]),t._v(".  The\nawkwardness is a feature: It reminds you of the complexity you're adding to\nyour API when you do this sort of thing.")]),t._v(" "),e("h3",{attrs:{id:"browser-support"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#browser-support"}},[t._v("#")]),t._v(" Browser support")]),t._v(" "),e("p",[t._v("This has no dependencies and should work in browsers, though you'll have\nnoisier stack traces.")]),t._v(" "),e("h3",{attrs:{id:"why-this-exists"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#why-this-exists"}},[t._v("#")]),t._v(" Why this exists")]),t._v(" "),e("p",[t._v("I wanted a very simple argument validator. It needed to do two things:")]),t._v(" "),e("ol",[e("li",[e("p",[t._v("Be more concise and easier to use than assertions")])]),t._v(" "),e("li",[e("p",[t._v("Not encourage an infinite bikeshed of DSLs")])])]),t._v(" "),e("p",[t._v("This is why types are specified by a single character and there's no such\nthing as an optional argument.")]),t._v(" "),e("p",[t._v("This is not intended to validate user data. This is specifically about\nasserting the interface of your functions.")]),t._v(" "),e("p",[t._v("If you need greater validation, I encourage you to write them by hand or\nlook elsewhere.")])])}),[],!1,null,null,null);e.default=s.exports}}]);
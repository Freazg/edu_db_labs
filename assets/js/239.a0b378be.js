(window.webpackJsonp=window.webpackJsonp||[]).push([[239],{766:function(t,s,e){"use strict";e.r(s);var a=e(21),n=Object(a.a)({},(function(){var t=this,s=t._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"readdirp"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#readdirp"}},[t._v("#")]),t._v(" readdirp "),s("a",{attrs:{href:"https://github.com/paulmillr/readdirp",target:"_blank",rel:"noopener noreferrer"}},[s("img",{attrs:{src:"https://img.shields.io/npm/dw/readdirp.svg",alt:"Weekly downloads"}}),s("OutboundLink")],1)]),t._v(" "),s("p",[t._v("Recursive version of "),s("a",{attrs:{href:"https://nodejs.org/api/fs.html#fs_fs_readdir_path_options_callback",target:"_blank",rel:"noopener noreferrer"}},[t._v("fs.readdir"),s("OutboundLink")],1),t._v(". Exposes a "),s("strong",[t._v("stream API")]),t._v(" and a "),s("strong",[t._v("promise API")]),t._v(".")]),t._v(" "),s("div",{staticClass:"language-sh extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" readdirp\n")])])]),s("div",{staticClass:"language-javascript extra-class"},[s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" readdirp "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'readdirp'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Use streams to achieve small RAM & CPU footprint.")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 1) Streams example with for-await.")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("await")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" entry "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("of")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("readdirp")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'.'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("path"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" entry"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  console"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token template-string"}},[s("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")]),s("span",{pre:!0,attrs:{class:"token interpolation"}},[s("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("${")]),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("JSON")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("stringify")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("path"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("}")])]),s("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 2) Streams example, non for-await.")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Print out all JS files along with their size within the current folder & subfolders.")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("readdirp")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'.'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("fileFilter")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'*.js'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("alwaysStat")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("on")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'data'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("entry")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("path"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("stats")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("size"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" entry"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    console"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token template-string"}},[s("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")]),s("span",{pre:!0,attrs:{class:"token interpolation"}},[s("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("${")]),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("JSON")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("stringify")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("path"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" size"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("}")])]),s("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Optionally call stream.destroy() in `warn()` in order to abort and cause 'close' to be emitted")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("on")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'warn'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("error")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" console"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("error")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'non-fatal error'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" error"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("on")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'error'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("error")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" console"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("error")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'fatal error'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" error"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("on")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'end'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" console"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'done'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 3) Promise example. More RAM and CPU than streams / for-await.")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" files "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("await")]),t._v(" readdirp"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("promise")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'.'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nconsole"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("files"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("map")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("file")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" file"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("path"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Other options.")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("readdirp")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'test'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("fileFilter")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'*.js'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("directoryFilter")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'!.git'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'!*modules'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// directoryFilter: (di) => di.basename.length === 9")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("type")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'files_directories'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("depth")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("p",[t._v("For more examples, check out "),s("code",[t._v("examples")]),t._v(" directory.")]),t._v(" "),s("h2",{attrs:{id:"api"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#api"}},[t._v("#")]),t._v(" API")]),t._v(" "),s("p",[s("code",[t._v("const stream = readdirp(root[, options])")]),t._v(" — "),s("strong",[t._v("Stream API")])]),t._v(" "),s("ul",[s("li",[t._v("Reads given root recursively and returns a "),s("code",[t._v("stream")]),t._v(" of "),s("a",{attrs:{href:"#entryinfo"}},[t._v("entry infos")])]),t._v(" "),s("li",[t._v("Optionally can be used like "),s("code",[t._v("for await (const entry of stream)")]),t._v(" with node.js 10+ ("),s("code",[t._v("asyncIterator")]),t._v(").")]),t._v(" "),s("li",[s("code",[t._v("on('data', (entry) => {})")]),t._v(" "),s("a",{attrs:{href:"#entryinfo"}},[t._v("entry info")]),t._v(" for every file / dir.")]),t._v(" "),s("li",[s("code",[t._v("on('warn', (error) => {})")]),t._v(" non-fatal "),s("code",[t._v("Error")]),t._v(" that prevents a file / dir from being processed. Example: inaccessible to the user.")]),t._v(" "),s("li",[s("code",[t._v("on('error', (error) => {})")]),t._v(" fatal "),s("code",[t._v("Error")]),t._v(" which also ends the stream. Example: illegal options where passed.")]),t._v(" "),s("li",[s("code",[t._v("on('end')")]),t._v(" — we are done. Called when all entries were found and no more will be emitted.")]),t._v(" "),s("li",[s("code",[t._v("on('close')")]),t._v(" — stream is destroyed via "),s("code",[t._v("stream.destroy()")]),t._v(".\nCould be useful if you want to manually abort even on a non fatal error.\nAt that point the stream is no longer "),s("code",[t._v("readable")]),t._v(" and no more entries, warning or errors are emitted")]),t._v(" "),s("li",[t._v("To learn more about streams, consult the very detailed "),s("a",{attrs:{href:"https://nodejs.org/api/stream.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("nodejs streams documentation"),s("OutboundLink")],1),t._v("\nor the "),s("a",{attrs:{href:"https://github.com/substack/stream-handbook",target:"_blank",rel:"noopener noreferrer"}},[t._v("stream-handbook"),s("OutboundLink")],1)])]),t._v(" "),s("p",[s("code",[t._v("const entries = await readdirp.promise(root[, options])")]),t._v(" — "),s("strong",[t._v("Promise API")]),t._v(". Returns a list of "),s("a",{attrs:{href:"#entryinfo"}},[t._v("entry infos")]),t._v(".")]),t._v(" "),s("p",[t._v("First argument is awalys "),s("code",[t._v("root")]),t._v(", path in which to start reading and recursing into subdirectories.")]),t._v(" "),s("h3",{attrs:{id:"options"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#options"}},[t._v("#")]),t._v(" options")]),t._v(" "),s("ul",[s("li",[s("code",[t._v('fileFilter: ["*.js"]')]),t._v(": filter to include or exclude files. A "),s("code",[t._v("Function")]),t._v(", Glob string or Array of glob strings.\n"),s("ul",[s("li",[s("strong",[t._v("Function")]),t._v(": a function that takes an entry info as a parameter and returns true to include or false to exclude the entry")]),t._v(" "),s("li",[s("strong",[t._v("Glob string")]),t._v(": a string (e.g., "),s("code",[t._v("*.js")]),t._v(") which is matched using "),s("a",{attrs:{href:"https://github.com/micromatch/picomatch",target:"_blank",rel:"noopener noreferrer"}},[t._v("picomatch"),s("OutboundLink")],1),t._v(", so go there for more\ninformation. Globstars ("),s("code",[t._v("**")]),t._v(") are not supported since specifying a recursive pattern for an already recursive function doesn't make sense. Negated globs (as explained in the minimatch documentation) are allowed, e.g., "),s("code",[t._v("!*.txt")]),t._v(" matches everything but text files.")]),t._v(" "),s("li",[s("strong",[t._v("Array of glob strings")]),t._v(": either need to be all inclusive or all exclusive (negated) patterns otherwise an error is thrown.\n"),s("code",[t._v("['*.json', '*.js']")]),t._v(" includes all JavaScript and Json files.\n"),s("code",[t._v("['!.git', '!node_modules']")]),t._v(" includes all directories except the '.git' and 'node_modules'.")]),t._v(" "),s("li",[t._v("Directories that do not pass a filter will not be recursed into.")])])]),t._v(" "),s("li",[s("code",[t._v("directoryFilter: ['!.git']")]),t._v(": filter to include/exclude directories found and to recurse into. Directories that do not pass a filter will not be recursed into.")]),t._v(" "),s("li",[s("code",[t._v("depth: 5")]),t._v(": depth at which to stop recursing even if more subdirectories are found")]),t._v(" "),s("li",[s("code",[t._v("type: 'files'")]),t._v(": determines if data events on the stream should be emitted for "),s("code",[t._v("'files'")]),t._v(" (default), "),s("code",[t._v("'directories'")]),t._v(", "),s("code",[t._v("'files_directories'")]),t._v(", or "),s("code",[t._v("'all'")]),t._v(". Setting to "),s("code",[t._v("'all'")]),t._v(" will also include entries for other types of file descriptors like character devices, unix sockets and named pipes.")]),t._v(" "),s("li",[s("code",[t._v("alwaysStat: false")]),t._v(": always return "),s("code",[t._v("stats")]),t._v(" property for every file. Default is "),s("code",[t._v("false")]),t._v(", readdirp will return "),s("code",[t._v("Dirent")]),t._v(" entries. Setting it to "),s("code",[t._v("true")]),t._v(" can double readdir execution time - use it only when you need file "),s("code",[t._v("size")]),t._v(", "),s("code",[t._v("mtime")]),t._v(" etc. Cannot be enabled on node <10.10.0.")]),t._v(" "),s("li",[s("code",[t._v("lstat: false")]),t._v(": include symlink entries in the stream along with files. When "),s("code",[t._v("true")]),t._v(", "),s("code",[t._v("fs.lstat")]),t._v(" would be used instead of "),s("code",[t._v("fs.stat")])])]),t._v(" "),s("h3",{attrs:{id:"entryinfo"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#entryinfo"}},[t._v("#")]),t._v(" "),s("code",[t._v("EntryInfo")])]),t._v(" "),s("p",[t._v("Has the following properties:")]),t._v(" "),s("ul",[s("li",[s("code",[t._v("path: 'assets/javascripts/react.js'")]),t._v(": path to the file/directory (relative to given root)")]),t._v(" "),s("li",[s("code",[t._v("fullPath: '/Users/dev/projects/app/assets/javascripts/react.js'")]),t._v(": full path to the file/directory found")]),t._v(" "),s("li",[s("code",[t._v("basename: 'react.js'")]),t._v(": name of the file/directory")]),t._v(" "),s("li",[s("code",[t._v("dirent: fs.Dirent")]),t._v(": built-in "),s("a",{attrs:{href:"https://nodejs.org/api/fs.html#fs_class_fs_dirent",target:"_blank",rel:"noopener noreferrer"}},[t._v("dir entry object"),s("OutboundLink")],1),t._v(" - only with "),s("code",[t._v("alwaysStat: false")])]),t._v(" "),s("li",[s("code",[t._v("stats: fs.Stats")]),t._v(": built in "),s("a",{attrs:{href:"https://nodejs.org/api/fs.html#fs_class_fs_stats",target:"_blank",rel:"noopener noreferrer"}},[t._v("stat object"),s("OutboundLink")],1),t._v(" - only with "),s("code",[t._v("alwaysStat: true")])])]),t._v(" "),s("h2",{attrs:{id:"changelog"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#changelog"}},[t._v("#")]),t._v(" Changelog")]),t._v(" "),s("ul",[s("li",[t._v("3.5 (Oct 13, 2020) disallows recursive directory-based symlinks.\nBefore, it could have entered infinite loop.")]),t._v(" "),s("li",[t._v("3.4 (Mar 19, 2020) adds support for directory-based symlinks.")]),t._v(" "),s("li",[t._v("3.3 (Dec 6, 2019) stabilizes RAM consumption and enables perf management with "),s("code",[t._v("highWaterMark")]),t._v(" option. Fixes race conditions related to "),s("code",[t._v("for-await")]),t._v(" looping.")]),t._v(" "),s("li",[t._v("3.2 (Oct 14, 2019) improves performance by 250% and makes streams implementation more idiomatic.")]),t._v(" "),s("li",[t._v("3.1 (Jul 7, 2019) brings "),s("code",[t._v("bigint")]),t._v(" support to "),s("code",[t._v("stat")]),t._v(' output on Windows. This is backwards-incompatible for some cases. Be careful. It you use it incorrectly, you\'ll see "TypeError: Cannot mix BigInt and other types, use explicit conversions".')]),t._v(" "),s("li",[t._v("3.0 brings huge performance improvements and stream backpressure support.")]),t._v(" "),s("li",[t._v("Upgrading 2.x to 3.x:\n"),s("ul",[s("li",[t._v("Signature changed from "),s("code",[t._v("readdirp(options)")]),t._v(" to "),s("code",[t._v("readdirp(root, options)")])]),t._v(" "),s("li",[t._v("Replaced callback API with promise API.")]),t._v(" "),s("li",[t._v("Renamed "),s("code",[t._v("entryType")]),t._v(" option to "),s("code",[t._v("type")])]),t._v(" "),s("li",[t._v("Renamed "),s("code",[t._v("entryType: 'both'")]),t._v(" to "),s("code",[t._v("'files_directories'")])]),t._v(" "),s("li",[s("code",[t._v("EntryInfo")]),t._v(" "),s("ul",[s("li",[t._v("Renamed "),s("code",[t._v("stat")]),t._v(" to "),s("code",[t._v("stats")]),t._v(" "),s("ul",[s("li",[t._v("Emitted only when "),s("code",[t._v("alwaysStat: true")])]),t._v(" "),s("li",[s("code",[t._v("dirent")]),t._v(" is emitted instead of "),s("code",[t._v("stats")]),t._v(" by default with "),s("code",[t._v("alwaysStat: false")])])])]),t._v(" "),s("li",[t._v("Renamed "),s("code",[t._v("name")]),t._v(" to "),s("code",[t._v("basename")])]),t._v(" "),s("li",[t._v("Removed "),s("code",[t._v("parentDir")]),t._v(" and "),s("code",[t._v("fullParentDir")]),t._v(" properties")])])])])]),t._v(" "),s("li",[t._v("Supported node.js versions:\n"),s("ul",[s("li",[t._v("3.x: node 8+")]),t._v(" "),s("li",[t._v("2.x: node 0.6+")])])])]),t._v(" "),s("h2",{attrs:{id:"license"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#license"}},[t._v("#")]),t._v(" License")]),t._v(" "),s("p",[t._v("Copyright (c) 2012-2019 Thorsten Lorenz, Paul Miller ("),s("a",{attrs:{href:"https://paulmillr.com",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://paulmillr.com"),s("OutboundLink")],1),t._v(")")]),t._v(" "),s("p",[t._v("MIT License, see "),s("a",{attrs:{href:"LICENSE"}},[t._v("LICENSE")]),t._v(" file.")])])}),[],!1,null,null,null);s.default=n.exports}}]);
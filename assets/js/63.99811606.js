(window.webpackJsonp=window.webpackJsonp||[]).push([[63],{610:function(t,a,s){"use strict";s.r(a);var e=s(21),n=Object(e.a)({},(function(){var t=this,a=t._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"node-bcrypt-js"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#node-bcrypt-js"}},[t._v("#")]),t._v(" node.bcrypt.js")]),t._v(" "),a("p",[a("a",{attrs:{href:"https://github.com/kelektiv/node.bcrypt.js/actions/workflows/ci.yaml",target:"_blank",rel:"noopener noreferrer"}},[a("img",{attrs:{src:"https://github.com/kelektiv/node.bcrypt.js/actions/workflows/ci.yaml/badge.svg",alt:"ci"}}),a("OutboundLink")],1)]),t._v(" "),a("p",[a("a",{attrs:{href:"https://ci.appveyor.com/project/defunctzombie/node-bcrypt-js-pgo26/branch/master",target:"_blank",rel:"noopener noreferrer"}},[a("img",{attrs:{src:"https://ci.appveyor.com/api/projects/status/github/kelektiv/node.bcrypt.js",alt:"Build Status"}}),a("OutboundLink")],1)]),t._v(" "),a("p",[t._v("A library to help you hash passwords.")]),t._v(" "),a("p",[t._v("You can read about "),a("a",{attrs:{href:"https://en.wikipedia.org/wiki/Bcrypt",target:"_blank",rel:"noopener noreferrer"}},[t._v("bcrypt in Wikipedia"),a("OutboundLink")],1),t._v(" as well as in the following article:\n"),a("a",{attrs:{href:"http://codahale.com/how-to-safely-store-a-password/",target:"_blank",rel:"noopener noreferrer"}},[t._v("How To Safely Store A Password"),a("OutboundLink")],1)]),t._v(" "),a("h2",{attrs:{id:"if-you-are-submitting-bugs-or-issues"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#if-you-are-submitting-bugs-or-issues"}},[t._v("#")]),t._v(" If You Are Submitting Bugs or Issues")]),t._v(" "),a("p",[t._v("Please verify that the NodeJS version you are using is a "),a("em",[t._v("stable")]),t._v(" version; Unstable versions are currently not supported and issues created while using an unstable version will be closed.")]),t._v(" "),a("p",[t._v("If you are on a stable version of NodeJS, please provide a sufficient code snippet or log files for installation issues. The code snippet does not require you to include confidential information. However, it must provide enough information so the problem can be replicable, or it may be closed without an explanation.")]),t._v(" "),a("h2",{attrs:{id:"version-compatibility"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#version-compatibility"}},[t._v("#")]),t._v(" Version Compatibility")]),t._v(" "),a("p",[a("em",[t._v("Please upgrade to atleast v5.0.0 to avoid security issues mentioned below.")])]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("Node Version")]),t._v(" "),a("th",[t._v("Bcrypt Version")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[t._v("0.4")]),t._v(" "),a("td",[t._v("<= 0.4")])]),t._v(" "),a("tr",[a("td",[t._v("0.6, 0.8, 0.10")]),t._v(" "),a("td",[t._v(">= 0.5")])]),t._v(" "),a("tr",[a("td",[t._v("0.11")]),t._v(" "),a("td",[t._v(">= 0.8")])]),t._v(" "),a("tr",[a("td",[t._v("4")]),t._v(" "),a("td",[t._v("<= 2.1.0")])]),t._v(" "),a("tr",[a("td",[t._v("8")]),t._v(" "),a("td",[t._v(">= 1.0.3 < 4.0.0")])]),t._v(" "),a("tr",[a("td",[t._v("10, 11")]),t._v(" "),a("td",[t._v(">= 3")])]),t._v(" "),a("tr",[a("td",[t._v("12 onwards")]),t._v(" "),a("td",[t._v(">= 3.0.6")])])])]),t._v(" "),a("p",[a("code",[t._v("node-gyp")]),t._v(" only works with stable/released versions of node. Since the "),a("code",[t._v("bcrypt")]),t._v(" module uses "),a("code",[t._v("node-gyp")]),t._v(" to build and install, you'll need a stable version of node to use bcrypt. If you do not, you'll likely see an error that starts with:")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v('gyp ERR! stack Error: "pre" versions of node cannot be installed, use the --nodedir flag instead\n')])])]),a("h2",{attrs:{id:"security-issues-and-concerns"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#security-issues-and-concerns"}},[t._v("#")]),t._v(" Security Issues And Concerns")]),t._v(" "),a("blockquote",[a("p",[t._v("Per bcrypt implementation, only the first 72 bytes of a string are used. Any extra bytes are ignored when matching passwords. Note that this is not the first 72 "),a("em",[t._v("characters")]),t._v(". It is possible for a string to contain less than 72 characters, while taking up more than 72 bytes (e.g. a UTF-8 encoded string containing emojis).")])]),t._v(" "),a("p",[t._v("As should be the case with any security tool, anyone using this library should scrutinise it. If you find or suspect an issue with the code, please bring it to the maintainers' attention. We will spend some time ensuring that this library is as secure as possible.")]),t._v(" "),a("p",[t._v("Here is a list of BCrypt-related security issues/concerns that have come up over the years.")]),t._v(" "),a("ul",[a("li",[t._v("An "),a("a",{attrs:{href:"http://www.openwall.com/lists/oss-security/2011/06/20/2",target:"_blank",rel:"noopener noreferrer"}},[t._v("issue with passwords"),a("OutboundLink")],1),t._v(" was found with a version of the Blowfish algorithm developed for John the Ripper. This is not present in the OpenBSD version and is thus not a problem for this module. HT "),a("a",{attrs:{href:"https://twitter.com/zooko",target:"_blank",rel:"noopener noreferrer"}},[t._v("zooko"),a("OutboundLink")],1),t._v(".")]),t._v(" "),a("li",[t._v("Versions "),a("code",[t._v("< 5.0.0")]),t._v(" suffer from bcrypt wrap-around bug and "),a("em",[t._v("will truncate passwords >= 255 characters leading to severely weakened passwords")]),t._v(". Please upgrade at  earliest. See "),a("a",{attrs:{href:"https://github.com/kelektiv/node.bcrypt.js/wiki/Security-Issues-and-Concerns#bcrypt-wrap-around-bug-medium-severity",target:"_blank",rel:"noopener noreferrer"}},[t._v("this wiki page"),a("OutboundLink")],1),t._v(" for more details.")]),t._v(" "),a("li",[t._v("Versions "),a("code",[t._v("< 5.0.0")]),t._v(" "),a("em",[t._v("do not handle NUL characters inside passwords properly leading to all subsequent characters being dropped and thus resulting in severely weakened passwords")]),t._v(". Please upgrade at earliest. See "),a("a",{attrs:{href:"https://github.com/kelektiv/node.bcrypt.js/wiki/Security-Issues-and-Concerns#improper-nul-handling-medium-severity",target:"_blank",rel:"noopener noreferrer"}},[t._v("this wiki page"),a("OutboundLink")],1),t._v(" for more details.")])]),t._v(" "),a("h2",{attrs:{id:"compatibility-note"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#compatibility-note"}},[t._v("#")]),t._v(" Compatibility Note")]),t._v(" "),a("p",[t._v("This library supports "),a("code",[t._v("$2a$")]),t._v(" and "),a("code",[t._v("$2b$")]),t._v(" prefix bcrypt hashes. "),a("code",[t._v("$2x$")]),t._v(" and "),a("code",[t._v("$2y$")]),t._v(" hashes are specific to bcrypt implementation developed for John the Ripper. In theory, they should be compatible with "),a("code",[t._v("$2b$")]),t._v(" prefix.")]),t._v(" "),a("p",[t._v("Compatibility with hashes generated by other languages is not 100% guaranteed due to difference in character encodings. However, it should not be an issue for most cases.")]),t._v(" "),a("h3",{attrs:{id:"migrating-from-v1-0-x"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#migrating-from-v1-0-x"}},[t._v("#")]),t._v(" Migrating from v1.0.x")]),t._v(" "),a("p",[t._v("Hashes generated in earlier version of "),a("code",[t._v("bcrypt")]),t._v(" remain 100% supported in "),a("code",[t._v("v2.x.x")]),t._v(" and later versions. In most cases, the migration should be a bump in the "),a("code",[t._v("package.json")]),t._v(".")]),t._v(" "),a("p",[t._v("Hashes generated in "),a("code",[t._v("v2.x.x")]),t._v(" using the defaults parameters will not work in earlier versions.")]),t._v(" "),a("h2",{attrs:{id:"dependencies"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#dependencies"}},[t._v("#")]),t._v(" Dependencies")]),t._v(" "),a("ul",[a("li",[t._v("NodeJS")]),t._v(" "),a("li",[a("code",[t._v("node-gyp")])]),t._v(" "),a("li",[t._v("Please check the dependencies for this tool at: https://github.com/nodejs/node-gyp")]),t._v(" "),a("li",[t._v("Windows users will need the options for c# and c++ installed with their visual studio instance.")]),t._v(" "),a("li",[t._v("Python 2.x/3.x")]),t._v(" "),a("li",[a("code",[t._v("OpenSSL")]),t._v(" - This is only required to build the "),a("code",[t._v("bcrypt")]),t._v(" project if you are using versions <= 0.7.7. Otherwise, we're using the builtin node crypto bindings for seed data (which use the same OpenSSL code paths we were, but don't have the external dependency).")])]),t._v(" "),a("h2",{attrs:{id:"install-via-npm"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#install-via-npm"}},[t._v("#")]),t._v(" Install via NPM")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("npm install bcrypt\n")])])]),a("p",[a("em",[a("strong",[t._v("Note:")])]),t._v(" OS X users using Xcode 4.3.1 or above may need to run the following command in their terminal prior to installing if errors occur regarding xcodebuild: "),a("code",[t._v("sudo xcode-select -switch /Applications/Xcode.app/Contents/Developer")])]),t._v(" "),a("p",[a("em",[t._v("Pre-built binaries for various NodeJS versions are made available on a best-effort basis.")])]),t._v(" "),a("p",[t._v("Only the current stable and supported LTS releases are actively tested against.")]),t._v(" "),a("p",[a("em",[t._v("There may be an interval between the release of the module and the availabilty of the compiled modules.")])]),t._v(" "),a("p",[t._v("Currently, we have pre-built binaries that support the following platforms:")]),t._v(" "),a("ol",[a("li",[t._v("Windows x32 and x64")]),t._v(" "),a("li",[t._v("Linux x64 (GlibC and musl)")]),t._v(" "),a("li",[t._v("macOS")])]),t._v(" "),a("p",[t._v("If you face an error like this:")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("node-pre-gyp ERR! Tried to download(404): https://github.com/kelektiv/node.bcrypt.js/releases/download/v1.0.2/bcrypt_lib-v1.0.2-node-v48-linux-x64.tar.gz\n")])])]),a("p",[t._v("make sure you have the appropriate dependencies installed and configured for your platform. You can find installation instructions for the dependencies for some common platforms "),a("a",{attrs:{href:"https://github.com/kelektiv/node.bcrypt.js/wiki/Installation-Instructions",target:"_blank",rel:"noopener noreferrer"}},[t._v("in this page"),a("OutboundLink")],1),t._v(".")]),t._v(" "),a("h2",{attrs:{id:"usage"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#usage"}},[t._v("#")]),t._v(" Usage")]),t._v(" "),a("h3",{attrs:{id:"async-recommended"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#async-recommended"}},[t._v("#")]),t._v(" async (recommended)")]),t._v(" "),a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" bcrypt "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'bcrypt'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" saltRounds "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("10")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" myPlaintextPassword "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'s0/\\/\\P4$$w0rD'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" someOtherPlaintextPassword "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'not_bacon'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("h4",{attrs:{id:"to-hash-a-password"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#to-hash-a-password"}},[t._v("#")]),t._v(" To hash a password:")]),t._v(" "),a("p",[t._v("Technique 1 (generate a salt and hash on separate function calls):")]),t._v(" "),a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[t._v("bcrypt"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("genSalt")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("saltRounds"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("err"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" salt")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    bcrypt"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("hash")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("myPlaintextPassword"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" salt"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("err"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" hash")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Store hash in your password DB.")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("p",[t._v("Technique 2 (auto-gen a salt and hash):")]),t._v(" "),a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[t._v("bcrypt"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("hash")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("myPlaintextPassword"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" saltRounds"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("err"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" hash")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Store hash in your password DB.")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("p",[t._v("Note that both techniques achieve the same end-result.")]),t._v(" "),a("h4",{attrs:{id:"to-check-a-password"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#to-check-a-password"}},[t._v("#")]),t._v(" To check a password:")]),t._v(" "),a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Load hash from your password DB.")]),t._v("\nbcrypt"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("compare")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("myPlaintextPassword"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" hash"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("err"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" result")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// result == true")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nbcrypt"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("compare")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("someOtherPlaintextPassword"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" hash"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("err"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" result")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// result == false")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("p",[a("a",{attrs:{href:"#a-note-on-timing-attacks"}},[t._v("A Note on Timing Attacks")])]),t._v(" "),a("h3",{attrs:{id:"with-promises"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#with-promises"}},[t._v("#")]),t._v(" with promises")]),t._v(" "),a("p",[t._v("bcrypt uses whatever "),a("code",[t._v("Promise")]),t._v(" implementation is available in "),a("code",[t._v("global.Promise")]),t._v(". NodeJS >= 0.12 has a native "),a("code",[t._v("Promise")]),t._v(" implementation built in. However, this should work in any Promises/A+ compliant implementation.")]),t._v(" "),a("p",[t._v("Async methods that accept a callback, return a "),a("code",[t._v("Promise")]),t._v(" when callback is not specified if Promise support is available.")]),t._v(" "),a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[t._v("bcrypt"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("hash")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("myPlaintextPassword"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" saltRounds"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("then")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("hash")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Store hash in your password DB.")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Load hash from your password DB.")]),t._v("\nbcrypt"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("compare")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("myPlaintextPassword"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" hash"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("then")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("result")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// result == true")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nbcrypt"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("compare")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("someOtherPlaintextPassword"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" hash"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("then")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("result")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// result == false")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("p",[t._v("This is also compatible with "),a("code",[t._v("async/await")])]),t._v(" "),a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("async")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("checkUser")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("username"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" password")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//... fetch user from a db etc.")]),t._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" match "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("await")]),t._v(" bcrypt"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("compare")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("password"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" user"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("passwordHash"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("match"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//login")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//...")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("h3",{attrs:{id:"esm-import"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#esm-import"}},[t._v("#")]),t._v(" ESM import")]),t._v(" "),a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" bcrypt "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"bcrypt"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// later")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("await")]),t._v(" bcrypt"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("compare")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("password"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" hash"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("h3",{attrs:{id:"sync"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#sync"}},[t._v("#")]),t._v(" sync")]),t._v(" "),a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" bcrypt "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'bcrypt'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" saltRounds "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("10")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" myPlaintextPassword "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'s0/\\/\\P4$$w0rD'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" someOtherPlaintextPassword "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'not_bacon'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("h4",{attrs:{id:"to-hash-a-password-2"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#to-hash-a-password-2"}},[t._v("#")]),t._v(" To hash a password:")]),t._v(" "),a("p",[t._v("Technique 1 (generate a salt and hash on separate function calls):")]),t._v(" "),a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" salt "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" bcrypt"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("genSaltSync")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("saltRounds"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" hash "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" bcrypt"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("hashSync")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("myPlaintextPassword"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" salt"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Store hash in your password DB.")]),t._v("\n")])])]),a("p",[t._v("Technique 2 (auto-gen a salt and hash):")]),t._v(" "),a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" hash "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" bcrypt"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("hashSync")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("myPlaintextPassword"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" saltRounds"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Store hash in your password DB.")]),t._v("\n")])])]),a("p",[t._v("As with async, both techniques achieve the same end-result.")]),t._v(" "),a("h4",{attrs:{id:"to-check-a-password-2"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#to-check-a-password-2"}},[t._v("#")]),t._v(" To check a password:")]),t._v(" "),a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Load hash from your password DB.")]),t._v("\nbcrypt"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("compareSync")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("myPlaintextPassword"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" hash"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// true")]),t._v("\nbcrypt"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("compareSync")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("someOtherPlaintextPassword"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" hash"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// false")]),t._v("\n")])])]),a("p",[a("a",{attrs:{href:"#a-note-on-timing-attacks"}},[t._v("A Note on Timing Attacks")])]),t._v(" "),a("h3",{attrs:{id:"why-is-async-mode-recommended-over-sync-mode"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#why-is-async-mode-recommended-over-sync-mode"}},[t._v("#")]),t._v(" Why is async mode recommended over sync mode?")]),t._v(" "),a("p",[t._v("We recommend using async API if you use "),a("code",[t._v("bcrypt")]),t._v(" on a server. Bcrypt hashing is CPU intensive which will cause the sync APIs to block the event loop and prevent your application from servicing any inbound requests or events. The async version uses a thread pool which does not block the main event loop.")]),t._v(" "),a("h2",{attrs:{id:"api"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#api"}},[t._v("#")]),t._v(" API")]),t._v(" "),a("p",[a("code",[t._v("BCrypt.")])]),t._v(" "),a("ul",[a("li",[a("code",[t._v("genSaltSync(rounds, minor)")]),t._v(" "),a("ul",[a("li",[a("code",[t._v("rounds")]),t._v(" - [OPTIONAL] - the cost of processing the data. (default - 10)")]),t._v(" "),a("li",[a("code",[t._v("minor")]),t._v(" - [OPTIONAL] - minor version of bcrypt to use. (default - b)")])])]),t._v(" "),a("li",[a("code",[t._v("genSalt(rounds, minor, cb)")]),t._v(" "),a("ul",[a("li",[a("code",[t._v("rounds")]),t._v(" - [OPTIONAL] - the cost of processing the data. (default - 10)")]),t._v(" "),a("li",[a("code",[t._v("minor")]),t._v(" - [OPTIONAL] - minor version of bcrypt to use. (default - b)")]),t._v(" "),a("li",[a("code",[t._v("cb")]),t._v(" - [OPTIONAL] - a callback to be fired once the salt has been generated. uses eio making it asynchronous. If "),a("code",[t._v("cb")]),t._v(" is not specified, a "),a("code",[t._v("Promise")]),t._v(" is returned if Promise support is available.\n"),a("ul",[a("li",[a("code",[t._v("err")]),t._v(" - First parameter to the callback detailing any errors.")]),t._v(" "),a("li",[a("code",[t._v("salt")]),t._v(" - Second parameter to the callback providing the generated salt.")])])])])]),t._v(" "),a("li",[a("code",[t._v("hashSync(data, salt)")]),t._v(" "),a("ul",[a("li",[a("code",[t._v("data")]),t._v(" - [REQUIRED] - the data to be encrypted.")]),t._v(" "),a("li",[a("code",[t._v("salt")]),t._v(" - [REQUIRED] - the salt to be used to hash the password. if specified as a number then a salt will be generated with the specified number of rounds and used (see example under "),a("strong",[t._v("Usage")]),t._v(").")])])]),t._v(" "),a("li",[a("code",[t._v("hash(data, salt, cb)")]),t._v(" "),a("ul",[a("li",[a("code",[t._v("data")]),t._v(" - [REQUIRED] - the data to be encrypted.")]),t._v(" "),a("li",[a("code",[t._v("salt")]),t._v(" - [REQUIRED] - the salt to be used to hash the password. if specified as a number then a salt will be generated with the specified number of rounds and used (see example under "),a("strong",[t._v("Usage")]),t._v(").")]),t._v(" "),a("li",[a("code",[t._v("cb")]),t._v(" - [OPTIONAL] - a callback to be fired once the data has been encrypted. uses eio making it asynchronous. If "),a("code",[t._v("cb")]),t._v(" is not specified, a "),a("code",[t._v("Promise")]),t._v(" is returned if Promise support is available.\n"),a("ul",[a("li",[a("code",[t._v("err")]),t._v(" - First parameter to the callback detailing any errors.")]),t._v(" "),a("li",[a("code",[t._v("encrypted")]),t._v(" - Second parameter to the callback providing the encrypted form.")])])])])]),t._v(" "),a("li",[a("code",[t._v("compareSync(data, encrypted)")]),t._v(" "),a("ul",[a("li",[a("code",[t._v("data")]),t._v(" - [REQUIRED] - data to compare.")]),t._v(" "),a("li",[a("code",[t._v("encrypted")]),t._v(" - [REQUIRED] - data to be compared to.")])])]),t._v(" "),a("li",[a("code",[t._v("compare(data, encrypted, cb)")]),t._v(" "),a("ul",[a("li",[a("code",[t._v("data")]),t._v(" - [REQUIRED] - data to compare.")]),t._v(" "),a("li",[a("code",[t._v("encrypted")]),t._v(" - [REQUIRED] - data to be compared to.")]),t._v(" "),a("li",[a("code",[t._v("cb")]),t._v(" - [OPTIONAL] - a callback to be fired once the data has been compared. uses eio making it asynchronous. If "),a("code",[t._v("cb")]),t._v(" is not specified, a "),a("code",[t._v("Promise")]),t._v(" is returned if Promise support is available.\n"),a("ul",[a("li",[a("code",[t._v("err")]),t._v(" - First parameter to the callback detailing any errors.")]),t._v(" "),a("li",[a("code",[t._v("same")]),t._v(" - Second parameter to the callback providing whether the data and encrypted forms match [true | false].")])])])])]),t._v(" "),a("li",[a("code",[t._v("getRounds(encrypted)")]),t._v(" - return the number of rounds used to encrypt a given hash\n"),a("ul",[a("li",[a("code",[t._v("encrypted")]),t._v(" - [REQUIRED] - hash from which the number of rounds used should be extracted.")])])])]),t._v(" "),a("h2",{attrs:{id:"a-note-on-rounds"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#a-note-on-rounds"}},[t._v("#")]),t._v(" A Note on Rounds")]),t._v(" "),a("p",[t._v("A note about the cost: when you are hashing your data, the module will go through a series of rounds to give you a secure hash. The value you submit is not just the number of rounds the module will go through to hash your data. The module will use the value you enter and go through "),a("code",[t._v("2^rounds")]),t._v(" hashing iterations.")]),t._v(" "),a("p",[t._v("From @garthk, on a 2GHz core you can roughly expect:")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",[a("code",[t._v("rounds=8 : ~40 hashes/sec\nrounds=9 : ~20 hashes/sec\nrounds=10: ~10 hashes/sec\nrounds=11: ~5  hashes/sec\nrounds=12: 2-3 hashes/sec\nrounds=13: ~1 sec/hash\nrounds=14: ~1.5 sec/hash\nrounds=15: ~3 sec/hash\nrounds=25: ~1 hour/hash\nrounds=31: 2-3 days/hash\n")])])]),a("h2",{attrs:{id:"a-note-on-timing-attacks"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#a-note-on-timing-attacks"}},[t._v("#")]),t._v(" A Note on Timing Attacks")]),t._v(" "),a("p",[t._v("Because it's come up multiple times in this project and other bcrypt projects, it needs to be said. The "),a("code",[t._v("bcrypt")]),t._v(" library is not susceptible to timing attacks. From codahale/bcrypt-ruby#42:")]),t._v(" "),a("blockquote",[a("p",[t._v("One of the desired properties of a cryptographic hash function is preimage attack resistance, which means there is no shortcut for generating a message which, when hashed, produces a specific digest.")])]),t._v(" "),a("p",[t._v("A great thread on this, in much more detail can be found @ codahale/bcrypt-ruby#43")]),t._v(" "),a("p",[t._v("If you're unfamiliar with timing attacks and want to learn more you can find a great writeup @ "),a("a",{attrs:{href:"https://codahale.com/a-lesson-in-timing-attacks/",target:"_blank",rel:"noopener noreferrer"}},[t._v("A Lesson In Timing Attacks"),a("OutboundLink")],1)]),t._v(" "),a("p",[t._v("However, timing attacks are real. And the comparison function is "),a("em",[t._v("not")]),t._v(" time safe. That means that it may exit the function early in the comparison process. Timing attacks happen because of the above. We don't need to be careful that an attacker will learn anything, and our comparison function provides a comparison of hashes. It is a utility to the overall purpose of the library. If you end up using it for something else, we cannot guarantee the security of the comparator. Keep that in mind as you use the library.")]),t._v(" "),a("h2",{attrs:{id:"hash-info"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#hash-info"}},[t._v("#")]),t._v(" Hash Info")]),t._v(" "),a("p",[t._v("The characters that comprise the resultant hash are "),a("code",[t._v("./ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789$")]),t._v(".")]),t._v(" "),a("p",[t._v("Resultant hashes will be 60 characters long and they will include the salt among other parameters, as follows:")]),t._v(" "),a("p",[a("code",[t._v("$[algorithm]$[cost]$[salt][hash]")])]),t._v(" "),a("ul",[a("li",[t._v("2 chars hash algorithm identifier prefix. "),a("code",[t._v('"$2a$" or "$2b$"')]),t._v(" indicates BCrypt")]),t._v(" "),a("li",[t._v("Cost-factor (n). Represents the exponent used to determine how many iterations 2^n")]),t._v(" "),a("li",[t._v("16-byte (128-bit) salt, base64 encoded to 22 characters")]),t._v(" "),a("li",[t._v("24-byte (192-bit) hash, base64 encoded to 31 characters")])]),t._v(" "),a("p",[t._v("Example:")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("$2b$10$nOUIs5kJ7naTuTFkBy1veuK0kSxUFXfuaOKdOKf9xYT0KKIGSJwFa\n |  |  |                     |\n |  |  |                     hash-value = K0kSxUFXfuaOKdOKf9xYT0KKIGSJwFa\n |  |  |\n |  |  salt = nOUIs5kJ7naTuTFkBy1veu\n |  |\n |  cost-factor => 10 = 2^10 rounds\n |\n hash-algorithm identifier => 2b = BCrypt\n")])])]),a("h2",{attrs:{id:"testing"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#testing"}},[t._v("#")]),t._v(" Testing")]),t._v(" "),a("p",[t._v("If you create a pull request, tests better pass ðŸ˜ƒ")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("npm install\nnpm test\n")])])]),a("h2",{attrs:{id:"credits"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#credits"}},[t._v("#")]),t._v(" Credits")]),t._v(" "),a("p",[t._v("The code for this comes from a few sources:")]),t._v(" "),a("ul",[a("li",[t._v("blowfish.cc - OpenBSD")]),t._v(" "),a("li",[t._v("bcrypt.cc - OpenBSD")]),t._v(" "),a("li",[t._v("bcrypt::gen_salt - "),a("a",{attrs:{href:"http://mail-index.netbsd.org/tech-crypto/2002/05/24/msg000204.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("gen_salt inclusion to bcrypt"),a("OutboundLink")],1)]),t._v(" "),a("li",[t._v("bcrypt_node.cc - me")])]),t._v(" "),a("h2",{attrs:{id:"contributors"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#contributors"}},[t._v("#")]),t._v(" Contributors")]),t._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"https://github.com/Shadowfiend",target:"_blank",rel:"noopener noreferrer"}},[t._v("Antonio Salazar Cardozo"),a("OutboundLink")],1),t._v(" - Early MacOS X support (when we used libbsd)")]),t._v(" "),a("li",[a("a",{attrs:{href:"https://github.com/pixelglow",target:"_blank",rel:"noopener noreferrer"}},[t._v("Ben Glow"),a("OutboundLink")],1),t._v(" - Fixes for thread safety with async calls")]),t._v(" "),a("li",[a("a",{attrs:{href:"https://github.com/thegoleffect",target:"_blank",rel:"noopener noreferrer"}},[t._v("Van Nguyen"),a("OutboundLink")],1),t._v(" - Found a timing attack in the comparator")]),t._v(" "),a("li",[a("a",{attrs:{href:"https://github.com/newitfarmer",target:"_blank",rel:"noopener noreferrer"}},[t._v("NewITFarmer"),a("OutboundLink")],1),t._v(" - Initial Cygwin support")]),t._v(" "),a("li",[a("a",{attrs:{href:"https://github.com/dtrejo",target:"_blank",rel:"noopener noreferrer"}},[t._v("David Trejo"),a("OutboundLink")],1),t._v(" - packaging fixes")]),t._v(" "),a("li",[a("a",{attrs:{href:"https://github.com/alfredwesterveld",target:"_blank",rel:"noopener noreferrer"}},[t._v("Alfred Westerveld"),a("OutboundLink")],1),t._v(" - packaging fixes")]),t._v(" "),a("li",[a("a",{attrs:{href:"https://twitter.com/vincentcr",target:"_blank",rel:"noopener noreferrer"}},[t._v("Vincent CÃ´tÃ©-Roy"),a("OutboundLink")],1),t._v(" - Testing around concurrency issues")]),t._v(" "),a("li",[a("a",{attrs:{href:"https://github.com/lloyd",target:"_blank",rel:"noopener noreferrer"}},[t._v("Lloyd Hilaiel"),a("OutboundLink")],1),t._v(" - Documentation fixes")]),t._v(" "),a("li",[a("a",{attrs:{href:"https://github.com/shtylman",target:"_blank",rel:"noopener noreferrer"}},[t._v("Roman Shtylman"),a("OutboundLink")],1),t._v(" - Code refactoring, general rot reduction, compile options, better memory management with delete and new, and an upgrade to libuv over eio/ev.")]),t._v(" "),a("li",[a("a",{attrs:{href:"https://github.com/vadimg",target:"_blank",rel:"noopener noreferrer"}},[t._v("Vadim Graboys"),a("OutboundLink")],1),t._v(" - Code changes to support 0.5.5+")]),t._v(" "),a("li",[a("a",{attrs:{href:"https://github.com/bnoordhuis",target:"_blank",rel:"noopener noreferrer"}},[t._v("Ben Noordhuis"),a("OutboundLink")],1),t._v(" - Fixed a thread safety issue in nodejs that was perfectly mappable to this module.")]),t._v(" "),a("li",[a("a",{attrs:{href:"https://github.com/tootallnate",target:"_blank",rel:"noopener noreferrer"}},[t._v("Nate Rajlich"),a("OutboundLink")],1),t._v(" - Bindings and build process.")]),t._v(" "),a("li",[a("a",{attrs:{href:"https://github.com/seanmonstar",target:"_blank",rel:"noopener noreferrer"}},[t._v("Sean McArthur"),a("OutboundLink")],1),t._v(" - Windows Support")]),t._v(" "),a("li",[a("a",{attrs:{href:"https://github.com/weareu",target:"_blank",rel:"noopener noreferrer"}},[t._v("Fanie Oosthuysen"),a("OutboundLink")],1),t._v(" - Windows Support")]),t._v(" "),a("li",[a("a",{attrs:{href:"https://github.com/recrsn",target:"_blank",rel:"noopener noreferrer"}},[t._v("Amitosh Swain Mahapatra"),a("OutboundLink")],1),t._v(" - "),a("span",{staticClass:"katex"},[a("span",{staticClass:"katex-mathml"},[a("math",[a("semantics",[a("mrow",[a("mn",[t._v("2")]),a("mi",[t._v("b")])],1),a("annotation",{attrs:{encoding:"application/x-tex"}},[t._v("2b")])],1)],1)],1),a("span",{staticClass:"katex-html",attrs:{"aria-hidden":"true"}},[a("span",{staticClass:"strut",staticStyle:{height:"0.69444em"}}),a("span",{staticClass:"strut bottom",staticStyle:{height:"0.69444em","vertical-align":"0em"}}),a("span",{staticClass:"base textstyle uncramped"},[a("span",{staticClass:"mord mathrm"},[t._v("2")]),a("span",{staticClass:"mord mathit"},[t._v("b")])])])]),t._v(" hash support, ES6 Promise support")]),t._v(" "),a("li",[a("a",{attrs:{href:"https://github.com/NickNaso",target:"_blank",rel:"noopener noreferrer"}},[t._v("Nicola Del Gobbo"),a("OutboundLink")],1),t._v(" - Initial implementation with N-API")])]),t._v(" "),a("h2",{attrs:{id:"license"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#license"}},[t._v("#")]),t._v(" License")]),t._v(" "),a("p",[t._v("Unless stated elsewhere, file headers or otherwise, the license as stated in the LICENSE file.")])])}),[],!1,null,null,null);a.default=n.exports}}]);
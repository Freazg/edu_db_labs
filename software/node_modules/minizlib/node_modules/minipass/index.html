<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>minipass | Назва проєкту</title>
    <meta name="generator" content="VuePress 1.9.10">
    <link rel="icon" href="/edu_db_labs/favicon.ico">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.5.1/katex.min.css">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <meta name="description" content="Лабораторні роботи з дисципліни &quot;Організація баз даних&quot;">
    
    <link rel="preload" href="/edu_db_labs/assets/css/0.styles.5e90a5e9.css" as="style"><link rel="preload" href="/edu_db_labs/assets/js/app.b4446a62.js" as="script"><link rel="preload" href="/edu_db_labs/assets/js/2.c940f4cf.js" as="script"><link rel="preload" href="/edu_db_labs/assets/js/1.444b6f58.js" as="script"><link rel="preload" href="/edu_db_labs/assets/js/184.b3195eb0.js" as="script"><link rel="prefetch" href="/edu_db_labs/assets/js/10.333f0c31.js"><link rel="prefetch" href="/edu_db_labs/assets/js/100.0b9503da.js"><link rel="prefetch" href="/edu_db_labs/assets/js/101.70a3fd71.js"><link rel="prefetch" href="/edu_db_labs/assets/js/102.1d52ada7.js"><link rel="prefetch" href="/edu_db_labs/assets/js/103.b5b3fb20.js"><link rel="prefetch" href="/edu_db_labs/assets/js/104.197b247c.js"><link rel="prefetch" href="/edu_db_labs/assets/js/105.661dd92d.js"><link rel="prefetch" href="/edu_db_labs/assets/js/106.af4ae762.js"><link rel="prefetch" href="/edu_db_labs/assets/js/107.3b3bc0a3.js"><link rel="prefetch" href="/edu_db_labs/assets/js/108.331cfe83.js"><link rel="prefetch" href="/edu_db_labs/assets/js/109.c1118a15.js"><link rel="prefetch" href="/edu_db_labs/assets/js/110.cdf8af3f.js"><link rel="prefetch" href="/edu_db_labs/assets/js/111.7575b291.js"><link rel="prefetch" href="/edu_db_labs/assets/js/112.4603044e.js"><link rel="prefetch" href="/edu_db_labs/assets/js/113.538ce14a.js"><link rel="prefetch" href="/edu_db_labs/assets/js/114.e0c2fc04.js"><link rel="prefetch" href="/edu_db_labs/assets/js/115.088a7fd0.js"><link rel="prefetch" href="/edu_db_labs/assets/js/116.dd8e7db9.js"><link rel="prefetch" href="/edu_db_labs/assets/js/117.d0f05561.js"><link rel="prefetch" href="/edu_db_labs/assets/js/118.e574838e.js"><link rel="prefetch" href="/edu_db_labs/assets/js/119.399d5800.js"><link rel="prefetch" href="/edu_db_labs/assets/js/120.105a1cd5.js"><link rel="prefetch" href="/edu_db_labs/assets/js/121.8b374615.js"><link rel="prefetch" href="/edu_db_labs/assets/js/122.9dacb51a.js"><link rel="prefetch" href="/edu_db_labs/assets/js/123.012d9df2.js"><link rel="prefetch" href="/edu_db_labs/assets/js/124.7de079d5.js"><link rel="prefetch" href="/edu_db_labs/assets/js/125.9ad08da1.js"><link rel="prefetch" href="/edu_db_labs/assets/js/126.495bcb43.js"><link rel="prefetch" href="/edu_db_labs/assets/js/127.d0420304.js"><link rel="prefetch" href="/edu_db_labs/assets/js/128.3eb06948.js"><link rel="prefetch" href="/edu_db_labs/assets/js/129.48787aa8.js"><link rel="prefetch" href="/edu_db_labs/assets/js/13.a9390fa6.js"><link rel="prefetch" href="/edu_db_labs/assets/js/130.432b24ed.js"><link rel="prefetch" href="/edu_db_labs/assets/js/131.8c41eb74.js"><link rel="prefetch" href="/edu_db_labs/assets/js/132.4fae4104.js"><link rel="prefetch" href="/edu_db_labs/assets/js/133.a9ca7a68.js"><link rel="prefetch" href="/edu_db_labs/assets/js/134.0c4da89e.js"><link rel="prefetch" href="/edu_db_labs/assets/js/135.f6db44e1.js"><link rel="prefetch" href="/edu_db_labs/assets/js/136.9e8396e6.js"><link rel="prefetch" href="/edu_db_labs/assets/js/137.3bb94968.js"><link rel="prefetch" href="/edu_db_labs/assets/js/138.7cb5c2b8.js"><link rel="prefetch" href="/edu_db_labs/assets/js/139.a4207524.js"><link rel="prefetch" href="/edu_db_labs/assets/js/14.a01624c8.js"><link rel="prefetch" href="/edu_db_labs/assets/js/140.a05db288.js"><link rel="prefetch" href="/edu_db_labs/assets/js/141.d1c1e630.js"><link rel="prefetch" href="/edu_db_labs/assets/js/142.6ecba7fa.js"><link rel="prefetch" href="/edu_db_labs/assets/js/143.096b840f.js"><link rel="prefetch" href="/edu_db_labs/assets/js/144.6f9afabb.js"><link rel="prefetch" href="/edu_db_labs/assets/js/145.101aef47.js"><link rel="prefetch" href="/edu_db_labs/assets/js/146.5e499366.js"><link rel="prefetch" href="/edu_db_labs/assets/js/147.0227da65.js"><link rel="prefetch" href="/edu_db_labs/assets/js/148.ee5e08d0.js"><link rel="prefetch" href="/edu_db_labs/assets/js/149.da328f37.js"><link rel="prefetch" href="/edu_db_labs/assets/js/15.3557a35a.js"><link rel="prefetch" href="/edu_db_labs/assets/js/150.438ac902.js"><link rel="prefetch" href="/edu_db_labs/assets/js/151.c2fd7247.js"><link rel="prefetch" href="/edu_db_labs/assets/js/152.34518212.js"><link rel="prefetch" href="/edu_db_labs/assets/js/153.ad192336.js"><link rel="prefetch" href="/edu_db_labs/assets/js/154.95500ffe.js"><link rel="prefetch" href="/edu_db_labs/assets/js/155.befc87d9.js"><link rel="prefetch" href="/edu_db_labs/assets/js/156.6bb2c0ea.js"><link rel="prefetch" href="/edu_db_labs/assets/js/157.b4145a67.js"><link rel="prefetch" href="/edu_db_labs/assets/js/158.0f239e8a.js"><link rel="prefetch" href="/edu_db_labs/assets/js/159.28cbc95a.js"><link rel="prefetch" href="/edu_db_labs/assets/js/16.fa118713.js"><link rel="prefetch" href="/edu_db_labs/assets/js/160.d0466f88.js"><link rel="prefetch" href="/edu_db_labs/assets/js/161.47667263.js"><link rel="prefetch" href="/edu_db_labs/assets/js/162.373b70ca.js"><link rel="prefetch" href="/edu_db_labs/assets/js/163.7c6e59cf.js"><link rel="prefetch" href="/edu_db_labs/assets/js/164.e7ae2cfb.js"><link rel="prefetch" href="/edu_db_labs/assets/js/165.09cd6550.js"><link rel="prefetch" href="/edu_db_labs/assets/js/166.9fc74763.js"><link rel="prefetch" href="/edu_db_labs/assets/js/167.9e3cb558.js"><link rel="prefetch" href="/edu_db_labs/assets/js/168.ee54ca9a.js"><link rel="prefetch" href="/edu_db_labs/assets/js/169.7897dfba.js"><link rel="prefetch" href="/edu_db_labs/assets/js/17.a8bece78.js"><link rel="prefetch" href="/edu_db_labs/assets/js/170.71d2ceec.js"><link rel="prefetch" href="/edu_db_labs/assets/js/171.45649416.js"><link rel="prefetch" href="/edu_db_labs/assets/js/172.541e845d.js"><link rel="prefetch" href="/edu_db_labs/assets/js/173.fa001dab.js"><link rel="prefetch" href="/edu_db_labs/assets/js/174.36e7075c.js"><link rel="prefetch" href="/edu_db_labs/assets/js/175.10bb5042.js"><link rel="prefetch" href="/edu_db_labs/assets/js/176.9aaedb35.js"><link rel="prefetch" href="/edu_db_labs/assets/js/177.e19f269a.js"><link rel="prefetch" href="/edu_db_labs/assets/js/178.8d72193d.js"><link rel="prefetch" href="/edu_db_labs/assets/js/179.72b23432.js"><link rel="prefetch" href="/edu_db_labs/assets/js/18.6d8e6f24.js"><link rel="prefetch" href="/edu_db_labs/assets/js/180.fc2f51b6.js"><link rel="prefetch" href="/edu_db_labs/assets/js/181.e4ca7f4b.js"><link rel="prefetch" href="/edu_db_labs/assets/js/182.9e4369a5.js"><link rel="prefetch" href="/edu_db_labs/assets/js/183.891cea39.js"><link rel="prefetch" href="/edu_db_labs/assets/js/185.e57225c6.js"><link rel="prefetch" href="/edu_db_labs/assets/js/186.354d4a4c.js"><link rel="prefetch" href="/edu_db_labs/assets/js/187.b54af4d0.js"><link rel="prefetch" href="/edu_db_labs/assets/js/188.479443c3.js"><link rel="prefetch" href="/edu_db_labs/assets/js/189.43e5db12.js"><link rel="prefetch" href="/edu_db_labs/assets/js/19.30e98236.js"><link rel="prefetch" href="/edu_db_labs/assets/js/190.2080ca9b.js"><link rel="prefetch" href="/edu_db_labs/assets/js/191.e0411715.js"><link rel="prefetch" href="/edu_db_labs/assets/js/192.c8356b6c.js"><link rel="prefetch" href="/edu_db_labs/assets/js/193.8a9c38b3.js"><link rel="prefetch" href="/edu_db_labs/assets/js/194.963c43e9.js"><link rel="prefetch" href="/edu_db_labs/assets/js/195.d9a4507e.js"><link rel="prefetch" href="/edu_db_labs/assets/js/196.c82039de.js"><link rel="prefetch" href="/edu_db_labs/assets/js/197.7df4335f.js"><link rel="prefetch" href="/edu_db_labs/assets/js/198.ae915d73.js"><link rel="prefetch" href="/edu_db_labs/assets/js/199.891514b0.js"><link rel="prefetch" href="/edu_db_labs/assets/js/20.6d9385e1.js"><link rel="prefetch" href="/edu_db_labs/assets/js/200.9626973e.js"><link rel="prefetch" href="/edu_db_labs/assets/js/201.4e96ac6e.js"><link rel="prefetch" href="/edu_db_labs/assets/js/202.89e6510e.js"><link rel="prefetch" href="/edu_db_labs/assets/js/203.77f4579c.js"><link rel="prefetch" href="/edu_db_labs/assets/js/204.bb555153.js"><link rel="prefetch" href="/edu_db_labs/assets/js/205.eb86c62d.js"><link rel="prefetch" href="/edu_db_labs/assets/js/206.63858805.js"><link rel="prefetch" href="/edu_db_labs/assets/js/207.61b9ed30.js"><link rel="prefetch" href="/edu_db_labs/assets/js/208.481e167b.js"><link rel="prefetch" href="/edu_db_labs/assets/js/209.d4def934.js"><link rel="prefetch" href="/edu_db_labs/assets/js/21.ff6b8dd5.js"><link rel="prefetch" href="/edu_db_labs/assets/js/210.57fef9cc.js"><link rel="prefetch" href="/edu_db_labs/assets/js/211.5a00244e.js"><link rel="prefetch" href="/edu_db_labs/assets/js/212.34249126.js"><link rel="prefetch" href="/edu_db_labs/assets/js/213.7b3130b9.js"><link rel="prefetch" href="/edu_db_labs/assets/js/214.059c648d.js"><link rel="prefetch" href="/edu_db_labs/assets/js/215.b4a08cd3.js"><link rel="prefetch" href="/edu_db_labs/assets/js/216.8c404569.js"><link rel="prefetch" href="/edu_db_labs/assets/js/217.c7dea235.js"><link rel="prefetch" href="/edu_db_labs/assets/js/218.9ad51e76.js"><link rel="prefetch" href="/edu_db_labs/assets/js/219.23d49e52.js"><link rel="prefetch" href="/edu_db_labs/assets/js/22.989ec86b.js"><link rel="prefetch" href="/edu_db_labs/assets/js/220.fe652967.js"><link rel="prefetch" href="/edu_db_labs/assets/js/221.91fa37fd.js"><link rel="prefetch" href="/edu_db_labs/assets/js/222.5c8b41ab.js"><link rel="prefetch" href="/edu_db_labs/assets/js/223.5d433dd1.js"><link rel="prefetch" href="/edu_db_labs/assets/js/224.6a79c4c0.js"><link rel="prefetch" href="/edu_db_labs/assets/js/225.7a189fc9.js"><link rel="prefetch" href="/edu_db_labs/assets/js/226.dbf46b59.js"><link rel="prefetch" href="/edu_db_labs/assets/js/227.68a60227.js"><link rel="prefetch" href="/edu_db_labs/assets/js/228.52a5d87c.js"><link rel="prefetch" href="/edu_db_labs/assets/js/229.8c2f4ff7.js"><link rel="prefetch" href="/edu_db_labs/assets/js/23.de30ab54.js"><link rel="prefetch" href="/edu_db_labs/assets/js/230.9cdeb47e.js"><link rel="prefetch" href="/edu_db_labs/assets/js/231.391e82a4.js"><link rel="prefetch" href="/edu_db_labs/assets/js/232.bcf58a7a.js"><link rel="prefetch" href="/edu_db_labs/assets/js/233.47e0f108.js"><link rel="prefetch" href="/edu_db_labs/assets/js/234.7107eefb.js"><link rel="prefetch" href="/edu_db_labs/assets/js/235.869d785e.js"><link rel="prefetch" href="/edu_db_labs/assets/js/236.fe6c7fbd.js"><link rel="prefetch" href="/edu_db_labs/assets/js/237.8f47cf4e.js"><link rel="prefetch" href="/edu_db_labs/assets/js/238.511f2ca3.js"><link rel="prefetch" href="/edu_db_labs/assets/js/239.a0b378be.js"><link rel="prefetch" href="/edu_db_labs/assets/js/24.b020a29a.js"><link rel="prefetch" href="/edu_db_labs/assets/js/240.f48afa1c.js"><link rel="prefetch" href="/edu_db_labs/assets/js/241.7585ceb8.js"><link rel="prefetch" href="/edu_db_labs/assets/js/242.697bc208.js"><link rel="prefetch" href="/edu_db_labs/assets/js/243.865c3880.js"><link rel="prefetch" href="/edu_db_labs/assets/js/244.75048d83.js"><link rel="prefetch" href="/edu_db_labs/assets/js/245.b2f66696.js"><link rel="prefetch" href="/edu_db_labs/assets/js/246.17138260.js"><link rel="prefetch" href="/edu_db_labs/assets/js/247.ffa58780.js"><link rel="prefetch" href="/edu_db_labs/assets/js/248.f3c90e59.js"><link rel="prefetch" href="/edu_db_labs/assets/js/249.1e9b4915.js"><link rel="prefetch" href="/edu_db_labs/assets/js/25.42aa669f.js"><link rel="prefetch" href="/edu_db_labs/assets/js/250.8815f403.js"><link rel="prefetch" href="/edu_db_labs/assets/js/251.ac7388c8.js"><link rel="prefetch" href="/edu_db_labs/assets/js/252.fb7f8fc2.js"><link rel="prefetch" href="/edu_db_labs/assets/js/253.31a3f975.js"><link rel="prefetch" href="/edu_db_labs/assets/js/254.2c08b3d3.js"><link rel="prefetch" href="/edu_db_labs/assets/js/255.3ab0504f.js"><link rel="prefetch" href="/edu_db_labs/assets/js/256.992ee1e7.js"><link rel="prefetch" href="/edu_db_labs/assets/js/257.9cb294d7.js"><link rel="prefetch" href="/edu_db_labs/assets/js/258.46611a0d.js"><link rel="prefetch" href="/edu_db_labs/assets/js/259.7c189e8d.js"><link rel="prefetch" href="/edu_db_labs/assets/js/26.03edeb27.js"><link rel="prefetch" href="/edu_db_labs/assets/js/260.53197a40.js"><link rel="prefetch" href="/edu_db_labs/assets/js/261.4f06b5a0.js"><link rel="prefetch" href="/edu_db_labs/assets/js/262.260a7173.js"><link rel="prefetch" href="/edu_db_labs/assets/js/263.38d98728.js"><link rel="prefetch" href="/edu_db_labs/assets/js/264.20c27f34.js"><link rel="prefetch" href="/edu_db_labs/assets/js/265.95b8ea1e.js"><link rel="prefetch" href="/edu_db_labs/assets/js/266.3085fa73.js"><link rel="prefetch" href="/edu_db_labs/assets/js/267.f96ae7fc.js"><link rel="prefetch" href="/edu_db_labs/assets/js/268.9e4d35d2.js"><link rel="prefetch" href="/edu_db_labs/assets/js/269.53898d41.js"><link rel="prefetch" href="/edu_db_labs/assets/js/27.2654aba4.js"><link rel="prefetch" href="/edu_db_labs/assets/js/270.41f16dd8.js"><link rel="prefetch" href="/edu_db_labs/assets/js/271.a1a9262c.js"><link rel="prefetch" href="/edu_db_labs/assets/js/272.b251884e.js"><link rel="prefetch" href="/edu_db_labs/assets/js/273.3f1e334a.js"><link rel="prefetch" href="/edu_db_labs/assets/js/274.3a51a2e5.js"><link rel="prefetch" href="/edu_db_labs/assets/js/275.6fa4a477.js"><link rel="prefetch" href="/edu_db_labs/assets/js/276.3b5d97ab.js"><link rel="prefetch" href="/edu_db_labs/assets/js/277.d375b030.js"><link rel="prefetch" href="/edu_db_labs/assets/js/278.9ce4725e.js"><link rel="prefetch" href="/edu_db_labs/assets/js/279.e75e3c4d.js"><link rel="prefetch" href="/edu_db_labs/assets/js/28.7463860d.js"><link rel="prefetch" href="/edu_db_labs/assets/js/280.1cd3d833.js"><link rel="prefetch" href="/edu_db_labs/assets/js/281.3993fd48.js"><link rel="prefetch" href="/edu_db_labs/assets/js/282.ebd52d2c.js"><link rel="prefetch" href="/edu_db_labs/assets/js/283.ee309615.js"><link rel="prefetch" href="/edu_db_labs/assets/js/284.ac625c63.js"><link rel="prefetch" href="/edu_db_labs/assets/js/285.7552c2d7.js"><link rel="prefetch" href="/edu_db_labs/assets/js/286.685a6936.js"><link rel="prefetch" href="/edu_db_labs/assets/js/287.a19c5379.js"><link rel="prefetch" href="/edu_db_labs/assets/js/288.5f681148.js"><link rel="prefetch" href="/edu_db_labs/assets/js/289.54258aee.js"><link rel="prefetch" href="/edu_db_labs/assets/js/29.041844e3.js"><link rel="prefetch" href="/edu_db_labs/assets/js/290.96b6a08c.js"><link rel="prefetch" href="/edu_db_labs/assets/js/291.a2f9dd3f.js"><link rel="prefetch" href="/edu_db_labs/assets/js/292.ff812607.js"><link rel="prefetch" href="/edu_db_labs/assets/js/293.2a5e27c4.js"><link rel="prefetch" href="/edu_db_labs/assets/js/294.322e8b16.js"><link rel="prefetch" href="/edu_db_labs/assets/js/295.3ba6956c.js"><link rel="prefetch" href="/edu_db_labs/assets/js/296.727c9f25.js"><link rel="prefetch" href="/edu_db_labs/assets/js/297.c7b7fd8e.js"><link rel="prefetch" href="/edu_db_labs/assets/js/298.bc65232c.js"><link rel="prefetch" href="/edu_db_labs/assets/js/299.aa546fb4.js"><link rel="prefetch" href="/edu_db_labs/assets/js/3.31e04f18.js"><link rel="prefetch" href="/edu_db_labs/assets/js/30.1b4e61f1.js"><link rel="prefetch" href="/edu_db_labs/assets/js/31.301db9bb.js"><link rel="prefetch" href="/edu_db_labs/assets/js/32.c3168890.js"><link rel="prefetch" href="/edu_db_labs/assets/js/33.ac50a766.js"><link rel="prefetch" href="/edu_db_labs/assets/js/34.d7b8e4bc.js"><link rel="prefetch" href="/edu_db_labs/assets/js/35.ec7586dd.js"><link rel="prefetch" href="/edu_db_labs/assets/js/36.5eded0f8.js"><link rel="prefetch" href="/edu_db_labs/assets/js/37.013a8933.js"><link rel="prefetch" href="/edu_db_labs/assets/js/38.688dcc17.js"><link rel="prefetch" href="/edu_db_labs/assets/js/39.35e503aa.js"><link rel="prefetch" href="/edu_db_labs/assets/js/4.39b942f9.js"><link rel="prefetch" href="/edu_db_labs/assets/js/40.8dbbb1e7.js"><link rel="prefetch" href="/edu_db_labs/assets/js/41.77298691.js"><link rel="prefetch" href="/edu_db_labs/assets/js/42.8ef40003.js"><link rel="prefetch" href="/edu_db_labs/assets/js/43.ae5e93e3.js"><link rel="prefetch" href="/edu_db_labs/assets/js/44.5cf23c4d.js"><link rel="prefetch" href="/edu_db_labs/assets/js/45.0ce1e552.js"><link rel="prefetch" href="/edu_db_labs/assets/js/46.3edee209.js"><link rel="prefetch" href="/edu_db_labs/assets/js/47.a603d6d5.js"><link rel="prefetch" href="/edu_db_labs/assets/js/48.add3b4b1.js"><link rel="prefetch" href="/edu_db_labs/assets/js/49.23f1cb31.js"><link rel="prefetch" href="/edu_db_labs/assets/js/5.26e5cdd1.js"><link rel="prefetch" href="/edu_db_labs/assets/js/50.20f1cf88.js"><link rel="prefetch" href="/edu_db_labs/assets/js/51.362818af.js"><link rel="prefetch" href="/edu_db_labs/assets/js/52.5e8fdd61.js"><link rel="prefetch" href="/edu_db_labs/assets/js/53.45ca3969.js"><link rel="prefetch" href="/edu_db_labs/assets/js/54.4f03e389.js"><link rel="prefetch" href="/edu_db_labs/assets/js/55.4fdd98f4.js"><link rel="prefetch" href="/edu_db_labs/assets/js/56.d84639e5.js"><link rel="prefetch" href="/edu_db_labs/assets/js/57.0693a842.js"><link rel="prefetch" href="/edu_db_labs/assets/js/58.cfca0c35.js"><link rel="prefetch" href="/edu_db_labs/assets/js/59.4819900e.js"><link rel="prefetch" href="/edu_db_labs/assets/js/6.505bcc0e.js"><link rel="prefetch" href="/edu_db_labs/assets/js/60.e04d1528.js"><link rel="prefetch" href="/edu_db_labs/assets/js/61.456ee6eb.js"><link rel="prefetch" href="/edu_db_labs/assets/js/62.93942405.js"><link rel="prefetch" href="/edu_db_labs/assets/js/63.ec489be6.js"><link rel="prefetch" href="/edu_db_labs/assets/js/64.c838e4d5.js"><link rel="prefetch" href="/edu_db_labs/assets/js/65.ca6931ec.js"><link rel="prefetch" href="/edu_db_labs/assets/js/66.5fb19980.js"><link rel="prefetch" href="/edu_db_labs/assets/js/67.c791bda1.js"><link rel="prefetch" href="/edu_db_labs/assets/js/68.a5d21374.js"><link rel="prefetch" href="/edu_db_labs/assets/js/69.fc1dd2e7.js"><link rel="prefetch" href="/edu_db_labs/assets/js/7.7eaa817b.js"><link rel="prefetch" href="/edu_db_labs/assets/js/70.e7bf867d.js"><link rel="prefetch" href="/edu_db_labs/assets/js/71.1cf4ee54.js"><link rel="prefetch" href="/edu_db_labs/assets/js/72.21104c48.js"><link rel="prefetch" href="/edu_db_labs/assets/js/73.e5079b47.js"><link rel="prefetch" href="/edu_db_labs/assets/js/74.3a282a9b.js"><link rel="prefetch" href="/edu_db_labs/assets/js/75.6d3050b8.js"><link rel="prefetch" href="/edu_db_labs/assets/js/76.53bcab76.js"><link rel="prefetch" href="/edu_db_labs/assets/js/77.ebd81b23.js"><link rel="prefetch" href="/edu_db_labs/assets/js/78.21e38a8e.js"><link rel="prefetch" href="/edu_db_labs/assets/js/79.76414ca6.js"><link rel="prefetch" href="/edu_db_labs/assets/js/8.cd0ae959.js"><link rel="prefetch" href="/edu_db_labs/assets/js/80.259c268d.js"><link rel="prefetch" href="/edu_db_labs/assets/js/81.ed5b8875.js"><link rel="prefetch" href="/edu_db_labs/assets/js/82.e2853f40.js"><link rel="prefetch" href="/edu_db_labs/assets/js/83.0333e622.js"><link rel="prefetch" href="/edu_db_labs/assets/js/84.41089461.js"><link rel="prefetch" href="/edu_db_labs/assets/js/85.bedc7589.js"><link rel="prefetch" href="/edu_db_labs/assets/js/86.161a3e88.js"><link rel="prefetch" href="/edu_db_labs/assets/js/87.757b39e7.js"><link rel="prefetch" href="/edu_db_labs/assets/js/88.77f6eabf.js"><link rel="prefetch" href="/edu_db_labs/assets/js/89.01bee9f4.js"><link rel="prefetch" href="/edu_db_labs/assets/js/9.96875c5b.js"><link rel="prefetch" href="/edu_db_labs/assets/js/90.16ed1582.js"><link rel="prefetch" href="/edu_db_labs/assets/js/91.6dea86c6.js"><link rel="prefetch" href="/edu_db_labs/assets/js/92.3bdef911.js"><link rel="prefetch" href="/edu_db_labs/assets/js/93.06c73f52.js"><link rel="prefetch" href="/edu_db_labs/assets/js/94.03a20ac4.js"><link rel="prefetch" href="/edu_db_labs/assets/js/95.340823b1.js"><link rel="prefetch" href="/edu_db_labs/assets/js/96.6dd916db.js"><link rel="prefetch" href="/edu_db_labs/assets/js/97.7ff0fa79.js"><link rel="prefetch" href="/edu_db_labs/assets/js/98.bef6f258.js"><link rel="prefetch" href="/edu_db_labs/assets/js/99.b64ab4c2.js"><link rel="prefetch" href="/edu_db_labs/assets/js/vendors~docsearch.1f60d966.js">
    <link rel="stylesheet" href="/edu_db_labs/assets/css/0.styles.5e90a5e9.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/edu_db_labs/" class="home-link router-link-active"><!----> <span class="site-name">Назва проєкту</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/edu_db_labs/" class="nav-link">
  Початок
</a></div><div class="nav-item"><a href="/edu_db_labs/intro/" class="nav-link">
  Вступ
</a></div> <a href="https://github.com/edu-db/edu_db_labs" target="_blank" rel="noopener noreferrer" class="repo-link">
    Github
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/edu_db_labs/" class="nav-link">
  Початок
</a></div><div class="nav-item"><a href="/edu_db_labs/intro/" class="nav-link">
  Вступ
</a></div> <a href="https://github.com/edu-db/edu_db_labs" target="_blank" rel="noopener noreferrer" class="repo-link">
    Github
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><a href="/edu_db_labs/" aria-current="page" class="sidebar-link">Автори</a></li><li><a href="/edu_db_labs/intro/" class="sidebar-link">Вступ</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/edu_db_labs/intro/#мета-проєкту" class="sidebar-link">Мета проєкту</a></li><li class="sidebar-sub-header"><a href="/edu_db_labs/intro/#технічна-реалізація-проєкту" class="sidebar-link">Технічна реалізація проєкту</a></li><li class="sidebar-sub-header"><a href="/edu_db_labs/intro/#очікувані-результати" class="sidebar-link">Очікувані результати</a></li></ul></li><li><section class="sidebar-group collapsable depth-0"><a href="/edu_db_labs/requirements/" class="sidebar-heading clickable"><span>Розроблення загальних вимог до системи</span> <span class="arrow right"></span></a> <!----></section></li><li><a href="/edu_db_labs/use%20cases/" class="sidebar-link">Розроблення вимог до функціональности системи</a></li><li><a href="/edu_db_labs/design/" class="sidebar-link">Проектування інформаційного забезпечення</a></li><li><a href="/edu_db_labs/software/" aria-current="page" class="sidebar-link">Реалізація інформаційного та програмного забезпечення</a></li><li><a href="/edu_db_labs/real/" class="sidebar-link">Додатковий опис робіт</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/edu_db_labs/real/#зміст" class="sidebar-link">Зміст</a></li><li class="sidebar-sub-header"><a href="/edu_db_labs/real/#загальна-інформація" class="sidebar-link">Загальна інформація</a></li><li class="sidebar-sub-header"><a href="/edu_db_labs/real/#налаштування-проєкту" class="sidebar-link">Налаштування проєкту</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/edu_db_labs/real/#вимоги" class="sidebar-link">Вимоги</a></li><li class="sidebar-sub-header"><a href="/edu_db_labs/real/#установка" class="sidebar-link">Установка</a></li></ul></li><li class="sidebar-sub-header"><a href="/edu_db_labs/real/#структура-проєкту" class="sidebar-link">Структура проєкту</a></li><li class="sidebar-sub-header"><a href="/edu_db_labs/real/#основні-модулі" class="sidebar-link">Основні модулі</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/edu_db_labs/real/#користувачі-users" class="sidebar-link">Користувачі (Users)</a></li><li class="sidebar-sub-header"><a href="/edu_db_labs/real/#ролі-roles" class="sidebar-link">Ролі (Roles)</a></li><li class="sidebar-sub-header"><a href="/edu_db_labs/real/#дозволи-permissions" class="sidebar-link">Дозволи (Permissions)</a></li><li class="sidebar-sub-header"><a href="/edu_db_labs/real/#проєкти-projects" class="sidebar-link">Проєкти (Projects)</a></li><li class="sidebar-sub-header"><a href="/edu_db_labs/real/#завдання-tasks" class="sidebar-link">Завдання (Tasks)</a></li><li class="sidebar-sub-header"><a href="/edu_db_labs/real/#повідомлення-messages" class="sidebar-link">Повідомлення (Messages)</a></li><li class="sidebar-sub-header"><a href="/edu_db_labs/real/#звіти-reports" class="sidebar-link">Звіти (Reports)</a></li></ul></li><li class="sidebar-sub-header"><a href="/edu_db_labs/real/#зв-язки-між-сутностями" class="sidebar-link">Зв'язки між сутностями</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/edu_db_labs/real/#користувач-роль-user-role" class="sidebar-link">Користувач-Роль (User-Role)</a></li><li class="sidebar-sub-header"><a href="/edu_db_labs/real/#роль-дозвіл-role-permission" class="sidebar-link">Роль-Дозвіл (Role-Permission)</a></li><li class="sidebar-sub-header"><a href="/edu_db_labs/real/#проєкт-учасник-project-member" class="sidebar-link">Проєкт-Учасник (Project-Member)</a></li><li class="sidebar-sub-header"><a href="/edu_db_labs/real/#завдання-виконавець-task-assignment" class="sidebar-link">Завдання-Виконавець (Task-Assignment)</a></li></ul></li><li class="sidebar-sub-header"><a href="/edu_db_labs/real/#api-endpoints" class="sidebar-link">API Endpoints</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/edu_db_labs/real/#користувачі-users-2" class="sidebar-link">Користувачі (Users)</a></li><li class="sidebar-sub-header"><a href="/edu_db_labs/real/#ролі-roles-2" class="sidebar-link">Ролі (Roles)</a></li><li class="sidebar-sub-header"><a href="/edu_db_labs/real/#дозволи-permissions-2" class="sidebar-link">Дозволи (Permissions)</a></li><li class="sidebar-sub-header"><a href="/edu_db_labs/real/#проєкти-projects-2" class="sidebar-link">Проєкти (Projects)</a></li><li class="sidebar-sub-header"><a href="/edu_db_labs/real/#завдання-tasks-2" class="sidebar-link">Завдання (Tasks)</a></li><li class="sidebar-sub-header"><a href="/edu_db_labs/real/#повідомлення-messages-2" class="sidebar-link">Повідомлення (Messages)</a></li><li class="sidebar-sub-header"><a href="/edu_db_labs/real/#звіти-reports-2" class="sidebar-link">Звіти (Reports)</a></li><li class="sidebar-sub-header"><a href="/edu_db_labs/real/#користувач-роль-user-role-2" class="sidebar-link">Користувач-Роль (User-Role)</a></li><li class="sidebar-sub-header"><a href="/edu_db_labs/real/#роль-дозвіл-role-permission-2" class="sidebar-link">Роль-Дозвіл (Role-Permission)</a></li><li class="sidebar-sub-header"><a href="/edu_db_labs/real/#проєкт-учасник-project-member-2" class="sidebar-link">Проєкт-Учасник (Project-Member)</a></li><li class="sidebar-sub-header"><a href="/edu_db_labs/real/#завдання-виконавець-task-assignment-2" class="sidebar-link">Завдання-Виконавець (Task-Assignment)</a></li></ul></li><li class="sidebar-sub-header"><a href="/edu_db_labs/real/#приклади-запитів" class="sidebar-link">Приклади запитів</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/edu_db_labs/real/#створення-користувача" class="sidebar-link">Створення користувача</a></li><li class="sidebar-sub-header"><a href="/edu_db_labs/real/#створення-проєкту" class="sidebar-link">Створення проєкту</a></li><li class="sidebar-sub-header"><a href="/edu_db_labs/real/#призначення-ролі-користувачу" class="sidebar-link">Призначення ролі користувачу</a></li></ul></li><li class="sidebar-sub-header"><a href="/edu_db_labs/real/#помилки-та-обробка-винятків" class="sidebar-link">Помилки та обробка винятків</a></li><li class="sidebar-sub-header"><a href="/edu_db_labs/real/#база-даних" class="sidebar-link">База даних</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/edu_db_labs/real/#схема-бази-даних" class="sidebar-link">Схема бази даних</a></li><li class="sidebar-sub-header"><a href="/edu_db_labs/real/#приклад-sql-запитів-для-створення-таблиць" class="sidebar-link">Приклад SQL-запитів для створення таблиць</a></li></ul></li></ul></li><li><a href="/edu_db_labs/test/" class="sidebar-link">Тестування працездатності системи</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/edu_db_labs/test/#table-of-contents" class="sidebar-link">Table of Contents</a></li><li class="sidebar-sub-header"><a href="/edu_db_labs/test/#health-check" class="sidebar-link">Health Check</a></li><li class="sidebar-sub-header"><a href="/edu_db_labs/test/#users" class="sidebar-link">Users</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/edu_db_labs/test/#get-all-users" class="sidebar-link">Get All Users</a></li><li class="sidebar-sub-header"><a href="/edu_db_labs/test/#create-user" class="sidebar-link">Create User</a></li></ul></li><li class="sidebar-sub-header"><a href="/edu_db_labs/test/#projects" class="sidebar-link">Projects</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/edu_db_labs/test/#get-projects" class="sidebar-link">Get Projects</a></li><li class="sidebar-sub-header"><a href="/edu_db_labs/test/#create-project" class="sidebar-link">Create Project</a></li></ul></li><li class="sidebar-sub-header"><a href="/edu_db_labs/test/#tasks" class="sidebar-link">Tasks</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/edu_db_labs/test/#get-tasks" class="sidebar-link">Get Tasks</a></li><li class="sidebar-sub-header"><a href="/edu_db_labs/test/#create-task" class="sidebar-link">Create Task</a></li></ul></li><li class="sidebar-sub-header"><a href="/edu_db_labs/test/#messages" class="sidebar-link">Messages</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/edu_db_labs/test/#get-messages" class="sidebar-link">Get Messages</a></li></ul></li><li class="sidebar-sub-header"><a href="/edu_db_labs/test/#reports" class="sidebar-link">Reports</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/edu_db_labs/test/#create-report" class="sidebar-link">Create Report</a></li></ul></li></ul></li><li><a href="/edu_db_labs/conclusion/" class="sidebar-link">Висновки</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/edu_db_labs/conclusion/#оцінка-отриманих-результатів" class="sidebar-link">Оцінка отриманих результатів</a></li><li class="sidebar-sub-header"><a href="/edu_db_labs/conclusion/#технічні-інноваціі-та-рішення" class="sidebar-link">Технічні інновації та рішення</a></li><li class="sidebar-sub-header"><a href="/edu_db_labs/conclusion/#рекомендаціі-щодо-практичного-застосування" class="sidebar-link">Рекомендації щодо практичного застосування</a></li></ul></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="minipass"><a href="#minipass" class="header-anchor">#</a> minipass</h1> <p>A <em>very</em> minimal implementation of a <a href="https://nodejs.org/api/stream.html#stream_class_stream_passthrough" target="_blank" rel="noopener noreferrer">PassThrough
stream<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p><a href="https://docs.google.com/spreadsheets/d/1oObKSrVwLX_7Ut4Z6g3fZW-AX1j1-k6w-cDsrkaSbHM/edit#gid=0" target="_blank" rel="noopener noreferrer">It's very
fast<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>
for objects, strings, and buffers.</p> <p>Supports <code>pipe()</code>ing (including multi-<code>pipe()</code> and backpressure transmission),
buffering data until either a <code>data</code> event handler or <code>pipe()</code> is added (so
you don't lose the first chunk), and most other cases where PassThrough is
a good idea.</p> <p>There is a <code>read()</code> method, but it's much more efficient to consume data
from this stream via <code>'data'</code> events or by calling <code>pipe()</code> into some other
stream.  Calling <code>read()</code> requires the buffer to be flattened in some
cases, which requires copying memory.</p> <p>If you set <code>objectMode: true</code> in the options, then whatever is written will
be emitted.  Otherwise, it'll do a minimal amount of Buffer copying to
ensure proper Streams semantics when <code>read(n)</code> is called.</p> <p><code>objectMode</code> can also be set by doing <code>stream.objectMode = true</code>, or by
writing any non-string/non-buffer data.  <code>objectMode</code> cannot be set to
false once it is set.</p> <p>This is not a <code>through</code> or <code>through2</code> stream.  It doesn't transform the
data, it just passes it right through.  If you want to transform the data,
extend the class, and override the <code>write()</code> method.  Once you're done
transforming the data however you want, call <code>super.write()</code> with the
transform output.</p> <p>For some examples of streams that extend Minipass in various ways, check
out:</p> <ul><li><a href="http://npm.im/minizlib" target="_blank" rel="noopener noreferrer">minizlib<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="http://npm.im/fs-minipass" target="_blank" rel="noopener noreferrer">fs-minipass<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="http://npm.im/tar" target="_blank" rel="noopener noreferrer">tar<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="http://npm.im/minipass-collect" target="_blank" rel="noopener noreferrer">minipass-collect<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="http://npm.im/minipass-flush" target="_blank" rel="noopener noreferrer">minipass-flush<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="http://npm.im/minipass-pipeline" target="_blank" rel="noopener noreferrer">minipass-pipeline<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="http://npm.im/tap" target="_blank" rel="noopener noreferrer">tap<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="http://npm.im/tap-parser" target="_blank" rel="noopener noreferrer">tap-parser<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="http://npm.im/treport" target="_blank" rel="noopener noreferrer">treport<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="http://npm.im/minipass-fetch" target="_blank" rel="noopener noreferrer">minipass-fetch<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="http://npm.im/pacote" target="_blank" rel="noopener noreferrer">pacote<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="http://npm.im/make-fetch-happen" target="_blank" rel="noopener noreferrer">make-fetch-happen<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="http://npm.im/cacache" target="_blank" rel="noopener noreferrer">cacache<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="http://npm.im/ssri" target="_blank" rel="noopener noreferrer">ssri<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="http://npm.im/npm-registry-fetch" target="_blank" rel="noopener noreferrer">npm-registry-fetch<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="http://npm.im/minipass-json-stream" target="_blank" rel="noopener noreferrer">minipass-json-stream<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="http://npm.im/minipass-sized" target="_blank" rel="noopener noreferrer">minipass-sized<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> <h2 id="differences-from-node-js-streams"><a href="#differences-from-node-js-streams" class="header-anchor">#</a> Differences from Node.js Streams</h2> <p>There are several things that make Minipass streams different from (and in
some ways superior to) Node.js core streams.</p> <p>Please read these caveats if you are familiar with node-core streams and
intend to use Minipass streams in your programs.</p> <p>You can avoid most of these differences entirely (for a very
small performance penalty) by setting <code>{async: true}</code> in the
constructor options.</p> <h3 id="timing"><a href="#timing" class="header-anchor">#</a> Timing</h3> <p>Minipass streams are designed to support synchronous use-cases.  Thus, data
is emitted as soon as it is available, always.  It is buffered until read,
but no longer.  Another way to look at it is that Minipass streams are
exactly as synchronous as the logic that writes into them.</p> <p>This can be surprising if your code relies on <code>PassThrough.write()</code> always
providing data on the next tick rather than the current one, or being able
to call <code>resume()</code> and not have the entire buffer disappear immediately.</p> <p>However, without this synchronicity guarantee, there would be no way for
Minipass to achieve the speeds it does, or support the synchronous use
cases that it does.  Simply put, waiting takes time.</p> <p>This non-deferring approach makes Minipass streams much easier to reason
about, especially in the context of Promises and other flow-control
mechanisms.</p> <p>Example:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> Minipass <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'minipass'</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> stream <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Minipass</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">async</span><span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
stream<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'data'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'data event'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'before write'</span><span class="token punctuation">)</span>
stream<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token string">'hello'</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'after write'</span><span class="token punctuation">)</span>
<span class="token comment">// output:</span>
<span class="token comment">// before write</span>
<span class="token comment">// data event</span>
<span class="token comment">// after write</span>
</code></pre></div><h3 id="exception-async-opt-in"><a href="#exception-async-opt-in" class="header-anchor">#</a> Exception: Async Opt-In</h3> <p>If you wish to have a Minipass stream with behavior that more
closely mimics Node.js core streams, you can set the stream in
async mode either by setting <code>async: true</code> in the constructor
options, or by setting <code>stream.async = true</code> later on.</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> Minipass <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'minipass'</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> asyncStream <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Minipass</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">async</span><span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
asyncStream<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'data'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'data event'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'before write'</span><span class="token punctuation">)</span>
asyncStream<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token string">'hello'</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'after write'</span><span class="token punctuation">)</span>
<span class="token comment">// output:</span>
<span class="token comment">// before write</span>
<span class="token comment">// after write</span>
<span class="token comment">// data event &lt;-- this is deferred until the next tick</span>
</code></pre></div><p>Switching <em>out</em> of async mode is unsafe, as it could cause data
corruption, and so is not enabled.  Example:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> Minipass <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'minipass'</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> stream <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Minipass</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">encoding</span><span class="token operator">:</span> <span class="token string">'utf8'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
stream<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'data'</span><span class="token punctuation">,</span> <span class="token parameter">chunk</span> <span class="token operator">=&gt;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>chunk<span class="token punctuation">)</span><span class="token punctuation">)</span>
stream<span class="token punctuation">.</span>async <span class="token operator">=</span> <span class="token boolean">true</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'before writes'</span><span class="token punctuation">)</span>
stream<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token string">'hello'</span><span class="token punctuation">)</span>
<span class="token function">setStreamSyncAgainSomehow</span><span class="token punctuation">(</span>stream<span class="token punctuation">)</span> <span class="token comment">// &lt;-- this doesn't actually exist!</span>
stream<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token string">'world'</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'after writes'</span><span class="token punctuation">)</span>
<span class="token comment">// hypothetical output would be:</span>
<span class="token comment">// before writes</span>
<span class="token comment">// world</span>
<span class="token comment">// after writes</span>
<span class="token comment">// hello</span>
<span class="token comment">// NOT GOOD!</span>
</code></pre></div><p>To avoid this problem, once set into async mode, any attempt to
make the stream sync again will be ignored.</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> Minipass <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'minipass'</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> stream <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Minipass</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">encoding</span><span class="token operator">:</span> <span class="token string">'utf8'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
stream<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'data'</span><span class="token punctuation">,</span> <span class="token parameter">chunk</span> <span class="token operator">=&gt;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>chunk<span class="token punctuation">)</span><span class="token punctuation">)</span>
stream<span class="token punctuation">.</span>async <span class="token operator">=</span> <span class="token boolean">true</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'before writes'</span><span class="token punctuation">)</span>
stream<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token string">'hello'</span><span class="token punctuation">)</span>
stream<span class="token punctuation">.</span>async <span class="token operator">=</span> <span class="token boolean">false</span> <span class="token comment">// &lt;-- no-op, stream already async</span>
stream<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token string">'world'</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'after writes'</span><span class="token punctuation">)</span>
<span class="token comment">// actual output:</span>
<span class="token comment">// before writes</span>
<span class="token comment">// after writes</span>
<span class="token comment">// hello</span>
<span class="token comment">// world</span>
</code></pre></div><h3 id="no-high-low-water-marks"><a href="#no-high-low-water-marks" class="header-anchor">#</a> No High/Low Water Marks</h3> <p>Node.js core streams will optimistically fill up a buffer, returning <code>true</code>
on all writes until the limit is hit, even if the data has nowhere to go.
Then, they will not attempt to draw more data in until the buffer size dips
below a minimum value.</p> <p>Minipass streams are much simpler.  The <code>write()</code> method will return <code>true</code>
if the data has somewhere to go (which is to say, given the timing
guarantees, that the data is already there by the time <code>write()</code> returns).</p> <p>If the data has nowhere to go, then <code>write()</code> returns false, and the data
sits in a buffer, to be drained out immediately as soon as anyone consumes
it.</p> <p>Since nothing is ever buffered unnecessarily, there is much less
copying data, and less bookkeeping about buffer capacity levels.</p> <h3 id="hazards-of-buffering-or-why-minipass-is-so-fast"><a href="#hazards-of-buffering-or-why-minipass-is-so-fast" class="header-anchor">#</a> Hazards of Buffering (or: Why Minipass Is So Fast)</h3> <p>Since data written to a Minipass stream is immediately written all the way
through the pipeline, and <code>write()</code> always returns true/false based on
whether the data was fully flushed, backpressure is communicated
immediately to the upstream caller.  This minimizes buffering.</p> <p>Consider this case:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token punctuation">{</span>PassThrough<span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'stream'</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> p1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">PassThrough</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">highWaterMark</span><span class="token operator">:</span> <span class="token number">1024</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> p2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">PassThrough</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">highWaterMark</span><span class="token operator">:</span> <span class="token number">1024</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> p3 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">PassThrough</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">highWaterMark</span><span class="token operator">:</span> <span class="token number">1024</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> p4 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">PassThrough</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">highWaterMark</span><span class="token operator">:</span> <span class="token number">1024</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>

p1<span class="token punctuation">.</span><span class="token function">pipe</span><span class="token punctuation">(</span>p2<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">pipe</span><span class="token punctuation">(</span>p3<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">pipe</span><span class="token punctuation">(</span>p4<span class="token punctuation">)</span>
p4<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'data'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'made it through'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

<span class="token comment">// this returns false and buffers, then writes to p2 on next tick (1)</span>
<span class="token comment">// p2 returns false and buffers, pausing p1, then writes to p3 on next tick (2)</span>
<span class="token comment">// p3 returns false and buffers, pausing p2, then writes to p4 on next tick (3)</span>
<span class="token comment">// p4 returns false and buffers, pausing p3, then emits 'data' and 'drain'</span>
<span class="token comment">// on next tick (4)</span>
<span class="token comment">// p3 sees p4's 'drain' event, and calls resume(), emitting 'resume' and</span>
<span class="token comment">// 'drain' on next tick (5)</span>
<span class="token comment">// p2 sees p3's 'drain', calls resume(), emits 'resume' and 'drain' on next tick (6)</span>
<span class="token comment">// p1 sees p2's 'drain', calls resume(), emits 'resume' and 'drain' on next</span>
<span class="token comment">// tick (7)</span>

p1<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span>Buffer<span class="token punctuation">.</span><span class="token function">alloc</span><span class="token punctuation">(</span><span class="token number">2048</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// returns false</span>
</code></pre></div><p>Along the way, the data was buffered and deferred at each stage, and
multiple event deferrals happened, for an unblocked pipeline where it was
perfectly safe to write all the way through!</p> <p>Furthermore, setting a <code>highWaterMark</code> of <code>1024</code> might lead someone reading
the code to think an advisory maximum of 1KiB is being set for the
pipeline.  However, the actual advisory buffering level is the <em>sum</em> of
<code>highWaterMark</code> values, since each one has its own bucket.</p> <p>Consider the Minipass case:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> m1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Minipass</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> m2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Minipass</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> m3 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Minipass</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> m4 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Minipass</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

m1<span class="token punctuation">.</span><span class="token function">pipe</span><span class="token punctuation">(</span>m2<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">pipe</span><span class="token punctuation">(</span>m3<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">pipe</span><span class="token punctuation">(</span>m4<span class="token punctuation">)</span>
m4<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'data'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'made it through'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

<span class="token comment">// m1 is flowing, so it writes the data to m2 immediately</span>
<span class="token comment">// m2 is flowing, so it writes the data to m3 immediately</span>
<span class="token comment">// m3 is flowing, so it writes the data to m4 immediately</span>
<span class="token comment">// m4 is flowing, so it fires the 'data' event immediately, returns true</span>
<span class="token comment">// m4's write returned true, so m3 is still flowing, returns true</span>
<span class="token comment">// m3's write returned true, so m2 is still flowing, returns true</span>
<span class="token comment">// m2's write returned true, so m1 is still flowing, returns true</span>
<span class="token comment">// No event deferrals or buffering along the way!</span>

m1<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span>Buffer<span class="token punctuation">.</span><span class="token function">alloc</span><span class="token punctuation">(</span><span class="token number">2048</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// returns true</span>
</code></pre></div><p>It is extremely unlikely that you <em>don't</em> want to buffer any data written,
or <em>ever</em> buffer data that can be flushed all the way through.  Neither
node-core streams nor Minipass ever fail to buffer written data, but
node-core streams do a lot of unnecessary buffering and pausing.</p> <p>As always, the faster implementation is the one that does less stuff and
waits less time to do it.</p> <h3 id="immediately-emit-end-for-empty-streams-when-not-paused"><a href="#immediately-emit-end-for-empty-streams-when-not-paused" class="header-anchor">#</a> Immediately emit <code>end</code> for empty streams (when not paused)</h3> <p>If a stream is not paused, and <code>end()</code> is called before writing any data
into it, then it will emit <code>end</code> immediately.</p> <p>If you have logic that occurs on the <code>end</code> event which you don't want to
potentially happen immediately (for example, closing file descriptors,
moving on to the next entry in an archive parse stream, etc.) then be sure
to call <code>stream.pause()</code> on creation, and then <code>stream.resume()</code> once you
are ready to respond to the <code>end</code> event.</p> <p>However, this is <em>usually</em> not a problem because:</p> <h3 id="emit-end-when-asked"><a href="#emit-end-when-asked" class="header-anchor">#</a> Emit <code>end</code> When Asked</h3> <p>One hazard of immediately emitting <code>'end'</code> is that you may not yet have had
a chance to add a listener.  In order to avoid this hazard, Minipass
streams safely re-emit the <code>'end'</code> event if a new listener is added after
<code>'end'</code> has been emitted.</p> <p>Ie, if you do <code>stream.on('end', someFunction)</code>, and the stream has already
emitted <code>end</code>, then it will call the handler right away.  (You can think of
this somewhat like attaching a new <code>.then(fn)</code> to a previously-resolved
Promise.)</p> <p>To prevent calling handlers multiple times who would not expect multiple
ends to occur, all listeners are removed from the <code>'end'</code> event whenever it
is emitted.</p> <h3 id="emit-error-when-asked"><a href="#emit-error-when-asked" class="header-anchor">#</a> Emit <code>error</code> When Asked</h3> <p>The most recent error object passed to the <code>'error'</code> event is
stored on the stream.  If a new <code>'error'</code> event handler is added,
and an error was previously emitted, then the event handler will
be called immediately (or on <code>process.nextTick</code> in the case of
async streams).</p> <p>This makes it much more difficult to end up trying to interact
with a broken stream, if the error handler is added after an
error was previously emitted.</p> <h3 id="impact-of-immediate-flow-on-tee-streams"><a href="#impact-of-immediate-flow-on-tee-streams" class="header-anchor">#</a> Impact of &quot;immediate flow&quot; on Tee-streams</h3> <p>A &quot;tee stream&quot; is a stream piping to multiple destinations:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> tee <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Minipass</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
t<span class="token punctuation">.</span><span class="token function">pipe</span><span class="token punctuation">(</span>dest1<span class="token punctuation">)</span>
t<span class="token punctuation">.</span><span class="token function">pipe</span><span class="token punctuation">(</span>dest2<span class="token punctuation">)</span>
t<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token string">'foo'</span><span class="token punctuation">)</span> <span class="token comment">// goes to both destinations</span>
</code></pre></div><p>Since Minipass streams <em>immediately</em> process any pending data through the
pipeline when a new pipe destination is added, this can have surprising
effects, especially when a stream comes in from some other function and may
or may not have data in its buffer.</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// WARNING! WILL LOSE DATA!</span>
<span class="token keyword">const</span> src <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Minipass</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
src<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token string">'foo'</span><span class="token punctuation">)</span>
src<span class="token punctuation">.</span><span class="token function">pipe</span><span class="token punctuation">(</span>dest1<span class="token punctuation">)</span> <span class="token comment">// 'foo' chunk flows to dest1 immediately, and is gone</span>
src<span class="token punctuation">.</span><span class="token function">pipe</span><span class="token punctuation">(</span>dest2<span class="token punctuation">)</span> <span class="token comment">// gets nothing!</span>
</code></pre></div><p>One solution is to create a dedicated tee-stream junction that pipes to
both locations, and then pipe to <em>that</em> instead.</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// Safe example: tee to both places</span>
<span class="token keyword">const</span> src <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Minipass</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
src<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token string">'foo'</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> tee <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Minipass</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
tee<span class="token punctuation">.</span><span class="token function">pipe</span><span class="token punctuation">(</span>dest1<span class="token punctuation">)</span>
tee<span class="token punctuation">.</span><span class="token function">pipe</span><span class="token punctuation">(</span>dest2<span class="token punctuation">)</span>
src<span class="token punctuation">.</span><span class="token function">pipe</span><span class="token punctuation">(</span>tee<span class="token punctuation">)</span> <span class="token comment">// tee gets 'foo', pipes to both locations</span>
</code></pre></div><p>The same caveat applies to <code>on('data')</code> event listeners.  The first one
added will <em>immediately</em> receive all of the data, leaving nothing for the
second:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// WARNING! WILL LOSE DATA!</span>
<span class="token keyword">const</span> src <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Minipass</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
src<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token string">'foo'</span><span class="token punctuation">)</span>
src<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'data'</span><span class="token punctuation">,</span> handler1<span class="token punctuation">)</span> <span class="token comment">// receives 'foo' right away</span>
src<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'data'</span><span class="token punctuation">,</span> handler2<span class="token punctuation">)</span> <span class="token comment">// nothing to see here!</span>
</code></pre></div><p>Using a dedicated tee-stream can be used in this case as well:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// Safe example: tee to both data handlers</span>
<span class="token keyword">const</span> src <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Minipass</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
src<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token string">'foo'</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> tee <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Minipass</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
tee<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'data'</span><span class="token punctuation">,</span> handler1<span class="token punctuation">)</span>
tee<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'data'</span><span class="token punctuation">,</span> handler2<span class="token punctuation">)</span>
src<span class="token punctuation">.</span><span class="token function">pipe</span><span class="token punctuation">(</span>tee<span class="token punctuation">)</span>
</code></pre></div><p>All of the hazards in this section are avoided by setting <code>{ async: true }</code> in the Minipass constructor, or by setting
<code>stream.async = true</code> afterwards.  Note that this does add some
overhead, so should only be done in cases where you are willing
to lose a bit of performance in order to avoid having to refactor
program logic.</p> <h2 id="usage"><a href="#usage" class="header-anchor">#</a> USAGE</h2> <p>It's a stream!  Use it like a stream and it'll most likely do what you
want.</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> Minipass <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'minipass'</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> mp <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Minipass</span><span class="token punctuation">(</span>options<span class="token punctuation">)</span> <span class="token comment">// optional: { encoding, objectMode }</span>
mp<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token string">'foo'</span><span class="token punctuation">)</span>
mp<span class="token punctuation">.</span><span class="token function">pipe</span><span class="token punctuation">(</span>someOtherStream<span class="token punctuation">)</span>
mp<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token string">'bar'</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="options"><a href="#options" class="header-anchor">#</a> OPTIONS</h3> <ul><li><code>encoding</code> How would you like the data coming <em>out</em> of the stream to be
encoded?  Accepts any values that can be passed to <code>Buffer.toString()</code>.</li> <li><code>objectMode</code> Emit data exactly as it comes in.  This will be flipped on
by default if you write() something other than a string or Buffer at any
point.  Setting <code>objectMode: true</code> will prevent setting any encoding
value.</li> <li><code>async</code> Defaults to <code>false</code>.  Set to <code>true</code> to defer data
emission until next tick.  This reduces performance slightly,
but makes Minipass streams use timing behavior closer to Node
core streams.  See <a href="#timing">Timing</a> for more details.</li></ul> <h3 id="api"><a href="#api" class="header-anchor">#</a> API</h3> <p>Implements the user-facing portions of Node.js's <code>Readable</code> and <code>Writable</code>
streams.</p> <h3 id="methods"><a href="#methods" class="header-anchor">#</a> Methods</h3> <ul><li><code>write(chunk, [encoding], [callback])</code> - Put data in.  (Note that, in the
base Minipass class, the same data will come out.)  Returns <code>false</code> if
the stream will buffer the next write, or true if it's still in &quot;flowing&quot;
mode.</li> <li><code>end([chunk, [encoding]], [callback])</code> - Signal that you have no more
data to write.  This will queue an <code>end</code> event to be fired when all the
data has been consumed.</li> <li><code>setEncoding(encoding)</code> - Set the encoding for data coming of the stream.
This can only be done once.</li> <li><code>pause()</code> - No more data for a while, please.  This also prevents <code>end</code>
from being emitted for empty streams until the stream is resumed.</li> <li><code>resume()</code> - Resume the stream.  If there's data in the buffer, it is all
discarded.  Any buffered events are immediately emitted.</li> <li><code>pipe(dest)</code> - Send all output to the stream provided.  When
data is emitted, it is immediately written to any and all pipe
destinations.  (Or written on next tick in <code>async</code> mode.)</li> <li><code>unpipe(dest)</code> - Stop piping to the destination stream.  This
is immediate, meaning that any asynchronously queued data will
<em>not</em> make it to the destination when running in <code>async</code> mode.
<ul><li><code>options.end</code> - Boolean, end the destination stream when
the source stream ends.  Default <code>true</code>.</li> <li><code>options.proxyErrors</code> - Boolean, proxy <code>error</code> events from
the source stream to the destination stream.  Note that
errors are <em>not</em> proxied after the pipeline terminates,
either due to the source emitting <code>'end'</code> or manually
unpiping with <code>src.unpipe(dest)</code>.  Default <code>false</code>.</li></ul></li> <li><code>on(ev, fn)</code>, <code>emit(ev, fn)</code> - Minipass streams are EventEmitters.  Some
events are given special treatment, however.  (See below under &quot;events&quot;.)</li> <li><code>promise()</code> - Returns a Promise that resolves when the stream emits
<code>end</code>, or rejects if the stream emits <code>error</code>.</li> <li><code>collect()</code> - Return a Promise that resolves on <code>end</code> with an array
containing each chunk of data that was emitted, or rejects if the stream
emits <code>error</code>.  Note that this consumes the stream data.</li> <li><code>concat()</code> - Same as <code>collect()</code>, but concatenates the data into a single
Buffer object.  Will reject the returned promise if the stream is in
objectMode, or if it goes into objectMode by the end of the data.</li> <li><code>read(n)</code> - Consume <code>n</code> bytes of data out of the buffer.  If <code>n</code> is not
provided, then consume all of it.  If <code>n</code> bytes are not available, then
it returns null.  <strong>Note</strong> consuming streams in this way is less
efficient, and can lead to unnecessary Buffer copying.</li> <li><code>destroy([er])</code> - Destroy the stream.  If an error is provided, then an
<code>'error'</code> event is emitted.  If the stream has a <code>close()</code> method, and
has not emitted a <code>'close'</code> event yet, then <code>stream.close()</code> will be
called.  Any Promises returned by <code>.promise()</code>, <code>.collect()</code> or
<code>.concat()</code> will be rejected.  After being destroyed, writing to the
stream will emit an error.  No more data will be emitted if the stream is
destroyed, even if it was previously buffered.</li></ul> <h3 id="properties"><a href="#properties" class="header-anchor">#</a> Properties</h3> <ul><li><code>bufferLength</code> Read-only.  Total number of bytes buffered, or in the case
of objectMode, the total number of objects.</li> <li><code>encoding</code> The encoding that has been set.  (Setting this is equivalent
to calling <code>setEncoding(enc)</code> and has the same prohibition against
setting multiple times.)</li> <li><code>flowing</code> Read-only.  Boolean indicating whether a chunk written to the
stream will be immediately emitted.</li> <li><code>emittedEnd</code> Read-only.  Boolean indicating whether the end-ish events
(ie, <code>end</code>, <code>prefinish</code>, <code>finish</code>) have been emitted.  Note that
listening on any end-ish event will immediateyl re-emit it if it has
already been emitted.</li> <li><code>writable</code> Whether the stream is writable.  Default <code>true</code>.  Set to
<code>false</code> when <code>end()</code></li> <li><code>readable</code> Whether the stream is readable.  Default <code>true</code>.</li> <li><code>buffer</code> A <a href="http://npm.im/yallist" target="_blank" rel="noopener noreferrer">yallist<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> linked list of chunks written
to the stream that have not yet been emitted.  (It's probably a bad idea
to mess with this.)</li> <li><code>pipes</code> A <a href="http://npm.im/yallist" target="_blank" rel="noopener noreferrer">yallist<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> linked list of streams that
this stream is piping into.  (It's probably a bad idea to mess with
this.)</li> <li><code>destroyed</code> A getter that indicates whether the stream was destroyed.</li> <li><code>paused</code> True if the stream has been explicitly paused, otherwise false.</li> <li><code>objectMode</code> Indicates whether the stream is in <code>objectMode</code>.  Once set
to <code>true</code>, it cannot be set to <code>false</code>.</li></ul> <h3 id="events"><a href="#events" class="header-anchor">#</a> Events</h3> <ul><li><code>data</code> Emitted when there's data to read.  Argument is the data to read.
This is never emitted while not flowing.  If a listener is attached, that
will resume the stream.</li> <li><code>end</code> Emitted when there's no more data to read.  This will be emitted
immediately for empty streams when <code>end()</code> is called.  If a listener is
attached, and <code>end</code> was already emitted, then it will be emitted again.
All listeners are removed when <code>end</code> is emitted.</li> <li><code>prefinish</code> An end-ish event that follows the same logic as <code>end</code> and is
emitted in the same conditions where <code>end</code> is emitted.  Emitted after
<code>'end'</code>.</li> <li><code>finish</code> An end-ish event that follows the same logic as <code>end</code> and is
emitted in the same conditions where <code>end</code> is emitted.  Emitted after
<code>'prefinish'</code>.</li> <li><code>close</code> An indication that an underlying resource has been released.
Minipass does not emit this event, but will defer it until after <code>end</code>
has been emitted, since it throws off some stream libraries otherwise.</li> <li><code>drain</code> Emitted when the internal buffer empties, and it is again
suitable to <code>write()</code> into the stream.</li> <li><code>readable</code> Emitted when data is buffered and ready to be read by a
consumer.</li> <li><code>resume</code> Emitted when stream changes state from buffering to flowing
mode.  (Ie, when <code>resume</code> is called, <code>pipe</code> is called, or a <code>data</code> event
listener is added.)</li></ul> <h3 id="static-methods"><a href="#static-methods" class="header-anchor">#</a> Static Methods</h3> <ul><li><code>Minipass.isStream(stream)</code> Returns <code>true</code> if the argument is a stream,
and false otherwise.  To be considered a stream, the object must be
either an instance of Minipass, or an EventEmitter that has either a
<code>pipe()</code> method, or both <code>write()</code> and <code>end()</code> methods.  (Pretty much any
stream in node-land will return <code>true</code> for this.)</li></ul> <h2 id="examples"><a href="#examples" class="header-anchor">#</a> EXAMPLES</h2> <p>Here are some examples of things you can do with Minipass streams.</p> <h3 id="simple-are-you-done-yet-promise"><a href="#simple-are-you-done-yet-promise" class="header-anchor">#</a> simple &quot;are you done yet&quot; promise</h3> <div class="language-js extra-class"><pre class="language-js"><code>mp<span class="token punctuation">.</span><span class="token function">promise</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// stream is finished</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token parameter">er</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// stream emitted an error</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="collecting"><a href="#collecting" class="header-anchor">#</a> collecting</h3> <div class="language-js extra-class"><pre class="language-js"><code>mp<span class="token punctuation">.</span><span class="token function">collect</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">all</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// all is an array of all the data emitted</span>
  <span class="token comment">// encoding is supported in this case, so</span>
  <span class="token comment">// so the result will be a collection of strings if</span>
  <span class="token comment">// an encoding is specified, or buffers/objects if not.</span>
  <span class="token comment">//</span>
  <span class="token comment">// In an async function, you may do</span>
  <span class="token comment">// const data = await stream.collect()</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="collecting-into-a-single-blob"><a href="#collecting-into-a-single-blob" class="header-anchor">#</a> collecting into a single blob</h3> <p>This is a bit slower because it concatenates the data into one chunk for
you, but if you're going to do it yourself anyway, it's convenient this
way:</p> <div class="language-js extra-class"><pre class="language-js"><code>mp<span class="token punctuation">.</span><span class="token function">concat</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">onebigchunk</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// onebigchunk is a string if the stream</span>
  <span class="token comment">// had an encoding set, or a buffer otherwise.</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="iteration"><a href="#iteration" class="header-anchor">#</a> iteration</h3> <p>You can iterate over streams synchronously or asynchronously in platforms
that support it.</p> <p>Synchronous iteration will end when the currently available data is
consumed, even if the <code>end</code> event has not been reached.  In string and
buffer mode, the data is concatenated, so unless multiple writes are
occurring in the same tick as the <code>read()</code>, sync iteration loops will
generally only have a single iteration.</p> <p>To consume chunks in this way exactly as they have been written, with no
flattening, create the stream with the <code>{ objectMode: true }</code> option.</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> mp <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Minipass</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">objectMode</span><span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
mp<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token string">'a'</span><span class="token punctuation">)</span>
mp<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token string">'b'</span><span class="token punctuation">)</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> letter <span class="token keyword">of</span> mp<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>letter<span class="token punctuation">)</span> <span class="token comment">// a, b</span>
<span class="token punctuation">}</span>
mp<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token string">'c'</span><span class="token punctuation">)</span>
mp<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token string">'d'</span><span class="token punctuation">)</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> letter <span class="token keyword">of</span> mp<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>letter<span class="token punctuation">)</span> <span class="token comment">// c, d</span>
<span class="token punctuation">}</span>
mp<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token string">'e'</span><span class="token punctuation">)</span>
mp<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> letter <span class="token keyword">of</span> mp<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>letter<span class="token punctuation">)</span> <span class="token comment">// e</span>
<span class="token punctuation">}</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> letter <span class="token keyword">of</span> mp<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>letter<span class="token punctuation">)</span> <span class="token comment">// nothing</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Asynchronous iteration will continue until the end event is reached,
consuming all of the data.</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> mp <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Minipass</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">encoding</span><span class="token operator">:</span> <span class="token string">'utf8'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">// some source of some data</span>
<span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">5</span>
<span class="token keyword">const</span> inter <span class="token operator">=</span> <span class="token function">setInterval</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>i<span class="token operator">--</span> <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span>
    mp<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span>Buffer<span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span><span class="token string">'foo\n'</span><span class="token punctuation">,</span> <span class="token string">'utf8'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token keyword">else</span> <span class="token punctuation">{</span>
    mp<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token function">clearInterval</span><span class="token punctuation">(</span>inter<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span>

<span class="token comment">// consume the data with asynchronous iteration</span>
<span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">consume</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">for</span> <span class="token keyword">await</span> <span class="token punctuation">(</span><span class="token keyword">let</span> chunk <span class="token keyword">of</span> mp<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>chunk<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> <span class="token string">'ok'</span>
<span class="token punctuation">}</span>

<span class="token function">consume</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">res</span> <span class="token operator">=&gt;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token comment">// logs `foo\n` 5 times, and then `ok`</span>
</code></pre></div><h3 id="subclass-that-console-log-s-everything-written-into-it"><a href="#subclass-that-console-log-s-everything-written-into-it" class="header-anchor">#</a> subclass that <code>console.log()</code>s everything written into it</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">class</span> <span class="token class-name">Logger</span> <span class="token keyword">extends</span> <span class="token class-name">Minipass</span> <span class="token punctuation">{</span>
  <span class="token function">write</span> <span class="token punctuation">(</span><span class="token parameter">chunk<span class="token punctuation">,</span> encoding<span class="token punctuation">,</span> callback</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'WRITE'</span><span class="token punctuation">,</span> chunk<span class="token punctuation">,</span> encoding<span class="token punctuation">)</span>
    <span class="token keyword">return</span> <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span>chunk<span class="token punctuation">,</span> encoding<span class="token punctuation">,</span> callback<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  <span class="token function">end</span> <span class="token punctuation">(</span><span class="token parameter">chunk<span class="token punctuation">,</span> encoding<span class="token punctuation">,</span> callback</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'END'</span><span class="token punctuation">,</span> chunk<span class="token punctuation">,</span> encoding<span class="token punctuation">)</span>
    <span class="token keyword">return</span> <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span>chunk<span class="token punctuation">,</span> encoding<span class="token punctuation">,</span> callback<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

someSource<span class="token punctuation">.</span><span class="token function">pipe</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Logger</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">pipe</span><span class="token punctuation">(</span>someDest<span class="token punctuation">)</span>
</code></pre></div><h3 id="same-thing-but-using-an-inline-anonymous-class"><a href="#same-thing-but-using-an-inline-anonymous-class" class="header-anchor">#</a> same thing, but using an inline anonymous class</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// js classes are fun</span>
someSource
  <span class="token punctuation">.</span><span class="token function">pipe</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token punctuation">(</span><span class="token keyword">class</span> <span class="token class-name">extends</span> Minipass <span class="token punctuation">{</span>
    <span class="token function">emit</span> <span class="token punctuation">(</span><span class="token parameter">ev<span class="token punctuation">,</span> <span class="token operator">...</span>data</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// let's also log events, because debugging some weird thing</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'EMIT'</span><span class="token punctuation">,</span> ev<span class="token punctuation">)</span>
      <span class="token keyword">return</span> <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">emit</span><span class="token punctuation">(</span>ev<span class="token punctuation">,</span> <span class="token operator">...</span>data<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token function">write</span> <span class="token punctuation">(</span><span class="token parameter">chunk<span class="token punctuation">,</span> encoding<span class="token punctuation">,</span> callback</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'WRITE'</span><span class="token punctuation">,</span> chunk<span class="token punctuation">,</span> encoding<span class="token punctuation">)</span>
      <span class="token keyword">return</span> <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span>chunk<span class="token punctuation">,</span> encoding<span class="token punctuation">,</span> callback<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token function">end</span> <span class="token punctuation">(</span><span class="token parameter">chunk<span class="token punctuation">,</span> encoding<span class="token punctuation">,</span> callback</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'END'</span><span class="token punctuation">,</span> chunk<span class="token punctuation">,</span> encoding<span class="token punctuation">)</span>
      <span class="token keyword">return</span> <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span>chunk<span class="token punctuation">,</span> encoding<span class="token punctuation">,</span> callback<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">pipe</span><span class="token punctuation">(</span>someDest<span class="token punctuation">)</span>
</code></pre></div><h3 id="subclass-that-defers-end-for-some-reason"><a href="#subclass-that-defers-end-for-some-reason" class="header-anchor">#</a> subclass that defers 'end' for some reason</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">class</span> <span class="token class-name">SlowEnd</span> <span class="token keyword">extends</span> <span class="token class-name">Minipass</span> <span class="token punctuation">{</span>
  <span class="token function">emit</span> <span class="token punctuation">(</span><span class="token parameter">ev<span class="token punctuation">,</span> <span class="token operator">...</span>args</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>ev <span class="token operator">===</span> <span class="token string">'end'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'going to end, hold on a sec'</span><span class="token punctuation">)</span>
      <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'ok, ready to end now'</span><span class="token punctuation">)</span>
        <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">emit</span><span class="token punctuation">(</span><span class="token string">'end'</span><span class="token punctuation">,</span> <span class="token operator">...</span>args<span class="token punctuation">)</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">emit</span><span class="token punctuation">(</span>ev<span class="token punctuation">,</span> <span class="token operator">...</span>args<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="transform-that-creates-newline-delimited-json"><a href="#transform-that-creates-newline-delimited-json" class="header-anchor">#</a> transform that creates newline-delimited JSON</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">class</span> <span class="token class-name">NDJSONEncode</span> <span class="token keyword">extends</span> <span class="token class-name">Minipass</span> <span class="token punctuation">{</span>
  <span class="token function">write</span> <span class="token punctuation">(</span><span class="token parameter">obj<span class="token punctuation">,</span> cb</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">try</span> <span class="token punctuation">{</span>
      <span class="token comment">// JSON.stringify can throw, emit an error on that</span>
      <span class="token keyword">return</span> <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">'\n'</span><span class="token punctuation">,</span> <span class="token string">'utf8'</span><span class="token punctuation">,</span> cb<span class="token punctuation">)</span>
    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>er<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">emit</span><span class="token punctuation">(</span><span class="token string">'error'</span><span class="token punctuation">,</span> er<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token function">end</span> <span class="token punctuation">(</span><span class="token parameter">obj<span class="token punctuation">,</span> cb</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> obj <span class="token operator">===</span> <span class="token string">'function'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      cb <span class="token operator">=</span> obj
      obj <span class="token operator">=</span> <span class="token keyword">undefined</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>obj <span class="token operator">!==</span> <span class="token keyword">undefined</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span>cb<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="transform-that-parses-newline-delimited-json"><a href="#transform-that-parses-newline-delimited-json" class="header-anchor">#</a> transform that parses newline-delimited JSON</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">class</span> <span class="token class-name">NDJSONDecode</span> <span class="token keyword">extends</span> <span class="token class-name">Minipass</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span> <span class="token punctuation">(</span><span class="token parameter">options</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// always be in object mode, as far as Minipass is concerned</span>
    <span class="token keyword">super</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">objectMode</span><span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>_jsonBuffer <span class="token operator">=</span> <span class="token string">''</span>
  <span class="token punctuation">}</span>
  <span class="token function">write</span> <span class="token punctuation">(</span><span class="token parameter">chunk<span class="token punctuation">,</span> encoding<span class="token punctuation">,</span> cb</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> chunk <span class="token operator">===</span> <span class="token string">'string'</span> <span class="token operator">&amp;&amp;</span>
        <span class="token keyword">typeof</span> encoding <span class="token operator">===</span> <span class="token string">'string'</span> <span class="token operator">&amp;&amp;</span>
        encoding <span class="token operator">!==</span> <span class="token string">'utf8'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      chunk <span class="token operator">=</span> Buffer<span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span>chunk<span class="token punctuation">,</span> encoding<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>Buffer<span class="token punctuation">.</span><span class="token function">isBuffer</span><span class="token punctuation">(</span>chunk<span class="token punctuation">)</span><span class="token punctuation">)</span>
      chunk <span class="token operator">=</span> chunk<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> encoding <span class="token operator">===</span> <span class="token string">'function'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      cb <span class="token operator">=</span> encoding
    <span class="token punctuation">}</span>
    <span class="token keyword">const</span> jsonData <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>_jsonBuffer <span class="token operator">+</span> chunk<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">'\n'</span><span class="token punctuation">)</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>_jsonBuffer <span class="token operator">=</span> jsonData<span class="token punctuation">.</span><span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> jsonData<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">try</span> <span class="token punctuation">{</span>
        <span class="token comment">// JSON.parse can throw, emit an error on that</span>
        <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>jsonData<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>er<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">emit</span><span class="token punctuation">(</span><span class="token string">'error'</span><span class="token punctuation">,</span> er<span class="token punctuation">)</span>
        <span class="token keyword">continue</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>cb<span class="token punctuation">)</span>
      <span class="token function">cb</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div></div> <footer class="page-edit"><!----> <!----></footer> <!----> </main></div><div class="global-ui"><!----></div></div>
    <script src="/edu_db_labs/assets/js/app.b4446a62.js" defer></script><script src="/edu_db_labs/assets/js/2.c940f4cf.js" defer></script><script src="/edu_db_labs/assets/js/1.444b6f58.js" defer></script><script src="/edu_db_labs/assets/js/184.b3195eb0.js" defer></script>
  </body>
</html>

<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>@mapbox/node-pre-gyp | Назва проєкту</title>
    <meta name="generator" content="VuePress 1.9.10">
    <link rel="icon" href="/edu_db_labs/favicon.ico">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.5.1/katex.min.css">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <meta name="description" content="Лабораторні роботи з дисципліни &quot;Організація баз даних&quot;">
    
    <link rel="preload" href="/edu_db_labs/assets/css/0.styles.5e90a5e9.css" as="style"><link rel="preload" href="/edu_db_labs/assets/js/app.b4446a62.js" as="script"><link rel="preload" href="/edu_db_labs/assets/js/2.c940f4cf.js" as="script"><link rel="preload" href="/edu_db_labs/assets/js/1.444b6f58.js" as="script"><link rel="preload" href="/edu_db_labs/assets/js/45.0ce1e552.js" as="script"><link rel="prefetch" href="/edu_db_labs/assets/js/10.333f0c31.js"><link rel="prefetch" href="/edu_db_labs/assets/js/100.0b9503da.js"><link rel="prefetch" href="/edu_db_labs/assets/js/101.70a3fd71.js"><link rel="prefetch" href="/edu_db_labs/assets/js/102.1d52ada7.js"><link rel="prefetch" href="/edu_db_labs/assets/js/103.b5b3fb20.js"><link rel="prefetch" href="/edu_db_labs/assets/js/104.197b247c.js"><link rel="prefetch" href="/edu_db_labs/assets/js/105.661dd92d.js"><link rel="prefetch" href="/edu_db_labs/assets/js/106.af4ae762.js"><link rel="prefetch" href="/edu_db_labs/assets/js/107.3b3bc0a3.js"><link rel="prefetch" href="/edu_db_labs/assets/js/108.331cfe83.js"><link rel="prefetch" href="/edu_db_labs/assets/js/109.c1118a15.js"><link rel="prefetch" href="/edu_db_labs/assets/js/110.cdf8af3f.js"><link rel="prefetch" href="/edu_db_labs/assets/js/111.7575b291.js"><link rel="prefetch" href="/edu_db_labs/assets/js/112.4603044e.js"><link rel="prefetch" href="/edu_db_labs/assets/js/113.538ce14a.js"><link rel="prefetch" href="/edu_db_labs/assets/js/114.e0c2fc04.js"><link rel="prefetch" href="/edu_db_labs/assets/js/115.088a7fd0.js"><link rel="prefetch" href="/edu_db_labs/assets/js/116.dd8e7db9.js"><link rel="prefetch" href="/edu_db_labs/assets/js/117.d0f05561.js"><link rel="prefetch" href="/edu_db_labs/assets/js/118.e574838e.js"><link rel="prefetch" href="/edu_db_labs/assets/js/119.399d5800.js"><link rel="prefetch" href="/edu_db_labs/assets/js/120.105a1cd5.js"><link rel="prefetch" href="/edu_db_labs/assets/js/121.8b374615.js"><link rel="prefetch" href="/edu_db_labs/assets/js/122.9dacb51a.js"><link rel="prefetch" href="/edu_db_labs/assets/js/123.012d9df2.js"><link rel="prefetch" href="/edu_db_labs/assets/js/124.7de079d5.js"><link rel="prefetch" href="/edu_db_labs/assets/js/125.9ad08da1.js"><link rel="prefetch" href="/edu_db_labs/assets/js/126.495bcb43.js"><link rel="prefetch" href="/edu_db_labs/assets/js/127.d0420304.js"><link rel="prefetch" href="/edu_db_labs/assets/js/128.3eb06948.js"><link rel="prefetch" href="/edu_db_labs/assets/js/129.48787aa8.js"><link rel="prefetch" href="/edu_db_labs/assets/js/13.a9390fa6.js"><link rel="prefetch" href="/edu_db_labs/assets/js/130.432b24ed.js"><link rel="prefetch" href="/edu_db_labs/assets/js/131.8c41eb74.js"><link rel="prefetch" href="/edu_db_labs/assets/js/132.4fae4104.js"><link rel="prefetch" href="/edu_db_labs/assets/js/133.a9ca7a68.js"><link rel="prefetch" href="/edu_db_labs/assets/js/134.0c4da89e.js"><link rel="prefetch" href="/edu_db_labs/assets/js/135.f6db44e1.js"><link rel="prefetch" href="/edu_db_labs/assets/js/136.9e8396e6.js"><link rel="prefetch" href="/edu_db_labs/assets/js/137.3bb94968.js"><link rel="prefetch" href="/edu_db_labs/assets/js/138.7cb5c2b8.js"><link rel="prefetch" href="/edu_db_labs/assets/js/139.a4207524.js"><link rel="prefetch" href="/edu_db_labs/assets/js/14.a01624c8.js"><link rel="prefetch" href="/edu_db_labs/assets/js/140.a05db288.js"><link rel="prefetch" href="/edu_db_labs/assets/js/141.d1c1e630.js"><link rel="prefetch" href="/edu_db_labs/assets/js/142.6ecba7fa.js"><link rel="prefetch" href="/edu_db_labs/assets/js/143.096b840f.js"><link rel="prefetch" href="/edu_db_labs/assets/js/144.6f9afabb.js"><link rel="prefetch" href="/edu_db_labs/assets/js/145.101aef47.js"><link rel="prefetch" href="/edu_db_labs/assets/js/146.5e499366.js"><link rel="prefetch" href="/edu_db_labs/assets/js/147.0227da65.js"><link rel="prefetch" href="/edu_db_labs/assets/js/148.ee5e08d0.js"><link rel="prefetch" href="/edu_db_labs/assets/js/149.da328f37.js"><link rel="prefetch" href="/edu_db_labs/assets/js/15.3557a35a.js"><link rel="prefetch" href="/edu_db_labs/assets/js/150.438ac902.js"><link rel="prefetch" href="/edu_db_labs/assets/js/151.c2fd7247.js"><link rel="prefetch" href="/edu_db_labs/assets/js/152.34518212.js"><link rel="prefetch" href="/edu_db_labs/assets/js/153.ad192336.js"><link rel="prefetch" href="/edu_db_labs/assets/js/154.95500ffe.js"><link rel="prefetch" href="/edu_db_labs/assets/js/155.befc87d9.js"><link rel="prefetch" href="/edu_db_labs/assets/js/156.6bb2c0ea.js"><link rel="prefetch" href="/edu_db_labs/assets/js/157.b4145a67.js"><link rel="prefetch" href="/edu_db_labs/assets/js/158.0f239e8a.js"><link rel="prefetch" href="/edu_db_labs/assets/js/159.28cbc95a.js"><link rel="prefetch" href="/edu_db_labs/assets/js/16.fa118713.js"><link rel="prefetch" href="/edu_db_labs/assets/js/160.d0466f88.js"><link rel="prefetch" href="/edu_db_labs/assets/js/161.47667263.js"><link rel="prefetch" href="/edu_db_labs/assets/js/162.373b70ca.js"><link rel="prefetch" href="/edu_db_labs/assets/js/163.7c6e59cf.js"><link rel="prefetch" href="/edu_db_labs/assets/js/164.e7ae2cfb.js"><link rel="prefetch" href="/edu_db_labs/assets/js/165.09cd6550.js"><link rel="prefetch" href="/edu_db_labs/assets/js/166.9fc74763.js"><link rel="prefetch" href="/edu_db_labs/assets/js/167.9e3cb558.js"><link rel="prefetch" href="/edu_db_labs/assets/js/168.ee54ca9a.js"><link rel="prefetch" href="/edu_db_labs/assets/js/169.7897dfba.js"><link rel="prefetch" href="/edu_db_labs/assets/js/17.a8bece78.js"><link rel="prefetch" href="/edu_db_labs/assets/js/170.71d2ceec.js"><link rel="prefetch" href="/edu_db_labs/assets/js/171.45649416.js"><link rel="prefetch" href="/edu_db_labs/assets/js/172.541e845d.js"><link rel="prefetch" href="/edu_db_labs/assets/js/173.fa001dab.js"><link rel="prefetch" href="/edu_db_labs/assets/js/174.36e7075c.js"><link rel="prefetch" href="/edu_db_labs/assets/js/175.10bb5042.js"><link rel="prefetch" href="/edu_db_labs/assets/js/176.9aaedb35.js"><link rel="prefetch" href="/edu_db_labs/assets/js/177.e19f269a.js"><link rel="prefetch" href="/edu_db_labs/assets/js/178.8d72193d.js"><link rel="prefetch" href="/edu_db_labs/assets/js/179.72b23432.js"><link rel="prefetch" href="/edu_db_labs/assets/js/18.6d8e6f24.js"><link rel="prefetch" href="/edu_db_labs/assets/js/180.fc2f51b6.js"><link rel="prefetch" href="/edu_db_labs/assets/js/181.e4ca7f4b.js"><link rel="prefetch" href="/edu_db_labs/assets/js/182.9e4369a5.js"><link rel="prefetch" href="/edu_db_labs/assets/js/183.891cea39.js"><link rel="prefetch" href="/edu_db_labs/assets/js/184.b3195eb0.js"><link rel="prefetch" href="/edu_db_labs/assets/js/185.e57225c6.js"><link rel="prefetch" href="/edu_db_labs/assets/js/186.354d4a4c.js"><link rel="prefetch" href="/edu_db_labs/assets/js/187.b54af4d0.js"><link rel="prefetch" href="/edu_db_labs/assets/js/188.479443c3.js"><link rel="prefetch" href="/edu_db_labs/assets/js/189.43e5db12.js"><link rel="prefetch" href="/edu_db_labs/assets/js/19.30e98236.js"><link rel="prefetch" href="/edu_db_labs/assets/js/190.2080ca9b.js"><link rel="prefetch" href="/edu_db_labs/assets/js/191.e0411715.js"><link rel="prefetch" href="/edu_db_labs/assets/js/192.c8356b6c.js"><link rel="prefetch" href="/edu_db_labs/assets/js/193.8a9c38b3.js"><link rel="prefetch" href="/edu_db_labs/assets/js/194.963c43e9.js"><link rel="prefetch" href="/edu_db_labs/assets/js/195.d9a4507e.js"><link rel="prefetch" href="/edu_db_labs/assets/js/196.c82039de.js"><link rel="prefetch" href="/edu_db_labs/assets/js/197.7df4335f.js"><link rel="prefetch" href="/edu_db_labs/assets/js/198.ae915d73.js"><link rel="prefetch" href="/edu_db_labs/assets/js/199.891514b0.js"><link rel="prefetch" href="/edu_db_labs/assets/js/20.6d9385e1.js"><link rel="prefetch" href="/edu_db_labs/assets/js/200.9626973e.js"><link rel="prefetch" href="/edu_db_labs/assets/js/201.4e96ac6e.js"><link rel="prefetch" href="/edu_db_labs/assets/js/202.89e6510e.js"><link rel="prefetch" href="/edu_db_labs/assets/js/203.77f4579c.js"><link rel="prefetch" href="/edu_db_labs/assets/js/204.bb555153.js"><link rel="prefetch" href="/edu_db_labs/assets/js/205.eb86c62d.js"><link rel="prefetch" href="/edu_db_labs/assets/js/206.63858805.js"><link rel="prefetch" href="/edu_db_labs/assets/js/207.61b9ed30.js"><link rel="prefetch" href="/edu_db_labs/assets/js/208.481e167b.js"><link rel="prefetch" href="/edu_db_labs/assets/js/209.d4def934.js"><link rel="prefetch" href="/edu_db_labs/assets/js/21.ff6b8dd5.js"><link rel="prefetch" href="/edu_db_labs/assets/js/210.57fef9cc.js"><link rel="prefetch" href="/edu_db_labs/assets/js/211.5a00244e.js"><link rel="prefetch" href="/edu_db_labs/assets/js/212.34249126.js"><link rel="prefetch" href="/edu_db_labs/assets/js/213.7b3130b9.js"><link rel="prefetch" href="/edu_db_labs/assets/js/214.059c648d.js"><link rel="prefetch" href="/edu_db_labs/assets/js/215.b4a08cd3.js"><link rel="prefetch" href="/edu_db_labs/assets/js/216.8c404569.js"><link rel="prefetch" href="/edu_db_labs/assets/js/217.c7dea235.js"><link rel="prefetch" href="/edu_db_labs/assets/js/218.9ad51e76.js"><link rel="prefetch" href="/edu_db_labs/assets/js/219.23d49e52.js"><link rel="prefetch" href="/edu_db_labs/assets/js/22.989ec86b.js"><link rel="prefetch" href="/edu_db_labs/assets/js/220.fe652967.js"><link rel="prefetch" href="/edu_db_labs/assets/js/221.91fa37fd.js"><link rel="prefetch" href="/edu_db_labs/assets/js/222.5c8b41ab.js"><link rel="prefetch" href="/edu_db_labs/assets/js/223.5d433dd1.js"><link rel="prefetch" href="/edu_db_labs/assets/js/224.6a79c4c0.js"><link rel="prefetch" href="/edu_db_labs/assets/js/225.7a189fc9.js"><link rel="prefetch" href="/edu_db_labs/assets/js/226.dbf46b59.js"><link rel="prefetch" href="/edu_db_labs/assets/js/227.68a60227.js"><link rel="prefetch" href="/edu_db_labs/assets/js/228.52a5d87c.js"><link rel="prefetch" href="/edu_db_labs/assets/js/229.8c2f4ff7.js"><link rel="prefetch" href="/edu_db_labs/assets/js/23.de30ab54.js"><link rel="prefetch" href="/edu_db_labs/assets/js/230.9cdeb47e.js"><link rel="prefetch" href="/edu_db_labs/assets/js/231.391e82a4.js"><link rel="prefetch" href="/edu_db_labs/assets/js/232.bcf58a7a.js"><link rel="prefetch" href="/edu_db_labs/assets/js/233.47e0f108.js"><link rel="prefetch" href="/edu_db_labs/assets/js/234.7107eefb.js"><link rel="prefetch" href="/edu_db_labs/assets/js/235.869d785e.js"><link rel="prefetch" href="/edu_db_labs/assets/js/236.fe6c7fbd.js"><link rel="prefetch" href="/edu_db_labs/assets/js/237.8f47cf4e.js"><link rel="prefetch" href="/edu_db_labs/assets/js/238.511f2ca3.js"><link rel="prefetch" href="/edu_db_labs/assets/js/239.a0b378be.js"><link rel="prefetch" href="/edu_db_labs/assets/js/24.b020a29a.js"><link rel="prefetch" href="/edu_db_labs/assets/js/240.f48afa1c.js"><link rel="prefetch" href="/edu_db_labs/assets/js/241.7585ceb8.js"><link rel="prefetch" href="/edu_db_labs/assets/js/242.697bc208.js"><link rel="prefetch" href="/edu_db_labs/assets/js/243.865c3880.js"><link rel="prefetch" href="/edu_db_labs/assets/js/244.75048d83.js"><link rel="prefetch" href="/edu_db_labs/assets/js/245.b2f66696.js"><link rel="prefetch" href="/edu_db_labs/assets/js/246.17138260.js"><link rel="prefetch" href="/edu_db_labs/assets/js/247.ffa58780.js"><link rel="prefetch" href="/edu_db_labs/assets/js/248.f3c90e59.js"><link rel="prefetch" href="/edu_db_labs/assets/js/249.1e9b4915.js"><link rel="prefetch" href="/edu_db_labs/assets/js/25.42aa669f.js"><link rel="prefetch" href="/edu_db_labs/assets/js/250.8815f403.js"><link rel="prefetch" href="/edu_db_labs/assets/js/251.ac7388c8.js"><link rel="prefetch" href="/edu_db_labs/assets/js/252.fb7f8fc2.js"><link rel="prefetch" href="/edu_db_labs/assets/js/253.31a3f975.js"><link rel="prefetch" href="/edu_db_labs/assets/js/254.2c08b3d3.js"><link rel="prefetch" href="/edu_db_labs/assets/js/255.3ab0504f.js"><link rel="prefetch" href="/edu_db_labs/assets/js/256.992ee1e7.js"><link rel="prefetch" href="/edu_db_labs/assets/js/257.9cb294d7.js"><link rel="prefetch" href="/edu_db_labs/assets/js/258.46611a0d.js"><link rel="prefetch" href="/edu_db_labs/assets/js/259.7c189e8d.js"><link rel="prefetch" href="/edu_db_labs/assets/js/26.03edeb27.js"><link rel="prefetch" href="/edu_db_labs/assets/js/260.53197a40.js"><link rel="prefetch" href="/edu_db_labs/assets/js/261.4f06b5a0.js"><link rel="prefetch" href="/edu_db_labs/assets/js/262.260a7173.js"><link rel="prefetch" href="/edu_db_labs/assets/js/263.38d98728.js"><link rel="prefetch" href="/edu_db_labs/assets/js/264.20c27f34.js"><link rel="prefetch" href="/edu_db_labs/assets/js/265.95b8ea1e.js"><link rel="prefetch" href="/edu_db_labs/assets/js/266.3085fa73.js"><link rel="prefetch" href="/edu_db_labs/assets/js/267.f96ae7fc.js"><link rel="prefetch" href="/edu_db_labs/assets/js/268.9e4d35d2.js"><link rel="prefetch" href="/edu_db_labs/assets/js/269.53898d41.js"><link rel="prefetch" href="/edu_db_labs/assets/js/27.2654aba4.js"><link rel="prefetch" href="/edu_db_labs/assets/js/270.41f16dd8.js"><link rel="prefetch" href="/edu_db_labs/assets/js/271.a1a9262c.js"><link rel="prefetch" href="/edu_db_labs/assets/js/272.b251884e.js"><link rel="prefetch" href="/edu_db_labs/assets/js/273.3f1e334a.js"><link rel="prefetch" href="/edu_db_labs/assets/js/274.3a51a2e5.js"><link rel="prefetch" href="/edu_db_labs/assets/js/275.6fa4a477.js"><link rel="prefetch" href="/edu_db_labs/assets/js/276.3b5d97ab.js"><link rel="prefetch" href="/edu_db_labs/assets/js/277.d375b030.js"><link rel="prefetch" href="/edu_db_labs/assets/js/278.9ce4725e.js"><link rel="prefetch" href="/edu_db_labs/assets/js/279.e75e3c4d.js"><link rel="prefetch" href="/edu_db_labs/assets/js/28.7463860d.js"><link rel="prefetch" href="/edu_db_labs/assets/js/280.1cd3d833.js"><link rel="prefetch" href="/edu_db_labs/assets/js/281.3993fd48.js"><link rel="prefetch" href="/edu_db_labs/assets/js/282.ebd52d2c.js"><link rel="prefetch" href="/edu_db_labs/assets/js/283.ee309615.js"><link rel="prefetch" href="/edu_db_labs/assets/js/284.ac625c63.js"><link rel="prefetch" href="/edu_db_labs/assets/js/285.7552c2d7.js"><link rel="prefetch" href="/edu_db_labs/assets/js/286.685a6936.js"><link rel="prefetch" href="/edu_db_labs/assets/js/287.a19c5379.js"><link rel="prefetch" href="/edu_db_labs/assets/js/288.5f681148.js"><link rel="prefetch" href="/edu_db_labs/assets/js/289.54258aee.js"><link rel="prefetch" href="/edu_db_labs/assets/js/29.041844e3.js"><link rel="prefetch" href="/edu_db_labs/assets/js/290.96b6a08c.js"><link rel="prefetch" href="/edu_db_labs/assets/js/291.a2f9dd3f.js"><link rel="prefetch" href="/edu_db_labs/assets/js/292.ff812607.js"><link rel="prefetch" href="/edu_db_labs/assets/js/293.2a5e27c4.js"><link rel="prefetch" href="/edu_db_labs/assets/js/294.322e8b16.js"><link rel="prefetch" href="/edu_db_labs/assets/js/295.3ba6956c.js"><link rel="prefetch" href="/edu_db_labs/assets/js/296.727c9f25.js"><link rel="prefetch" href="/edu_db_labs/assets/js/297.c7b7fd8e.js"><link rel="prefetch" href="/edu_db_labs/assets/js/298.bc65232c.js"><link rel="prefetch" href="/edu_db_labs/assets/js/299.aa546fb4.js"><link rel="prefetch" href="/edu_db_labs/assets/js/3.31e04f18.js"><link rel="prefetch" href="/edu_db_labs/assets/js/30.1b4e61f1.js"><link rel="prefetch" href="/edu_db_labs/assets/js/31.301db9bb.js"><link rel="prefetch" href="/edu_db_labs/assets/js/32.c3168890.js"><link rel="prefetch" href="/edu_db_labs/assets/js/33.ac50a766.js"><link rel="prefetch" href="/edu_db_labs/assets/js/34.d7b8e4bc.js"><link rel="prefetch" href="/edu_db_labs/assets/js/35.ec7586dd.js"><link rel="prefetch" href="/edu_db_labs/assets/js/36.5eded0f8.js"><link rel="prefetch" href="/edu_db_labs/assets/js/37.013a8933.js"><link rel="prefetch" href="/edu_db_labs/assets/js/38.688dcc17.js"><link rel="prefetch" href="/edu_db_labs/assets/js/39.35e503aa.js"><link rel="prefetch" href="/edu_db_labs/assets/js/4.39b942f9.js"><link rel="prefetch" href="/edu_db_labs/assets/js/40.8dbbb1e7.js"><link rel="prefetch" href="/edu_db_labs/assets/js/41.77298691.js"><link rel="prefetch" href="/edu_db_labs/assets/js/42.8ef40003.js"><link rel="prefetch" href="/edu_db_labs/assets/js/43.ae5e93e3.js"><link rel="prefetch" href="/edu_db_labs/assets/js/44.5cf23c4d.js"><link rel="prefetch" href="/edu_db_labs/assets/js/46.3edee209.js"><link rel="prefetch" href="/edu_db_labs/assets/js/47.a603d6d5.js"><link rel="prefetch" href="/edu_db_labs/assets/js/48.add3b4b1.js"><link rel="prefetch" href="/edu_db_labs/assets/js/49.23f1cb31.js"><link rel="prefetch" href="/edu_db_labs/assets/js/5.26e5cdd1.js"><link rel="prefetch" href="/edu_db_labs/assets/js/50.20f1cf88.js"><link rel="prefetch" href="/edu_db_labs/assets/js/51.362818af.js"><link rel="prefetch" href="/edu_db_labs/assets/js/52.5e8fdd61.js"><link rel="prefetch" href="/edu_db_labs/assets/js/53.45ca3969.js"><link rel="prefetch" href="/edu_db_labs/assets/js/54.4f03e389.js"><link rel="prefetch" href="/edu_db_labs/assets/js/55.4fdd98f4.js"><link rel="prefetch" href="/edu_db_labs/assets/js/56.d84639e5.js"><link rel="prefetch" href="/edu_db_labs/assets/js/57.0693a842.js"><link rel="prefetch" href="/edu_db_labs/assets/js/58.cfca0c35.js"><link rel="prefetch" href="/edu_db_labs/assets/js/59.4819900e.js"><link rel="prefetch" href="/edu_db_labs/assets/js/6.505bcc0e.js"><link rel="prefetch" href="/edu_db_labs/assets/js/60.e04d1528.js"><link rel="prefetch" href="/edu_db_labs/assets/js/61.456ee6eb.js"><link rel="prefetch" href="/edu_db_labs/assets/js/62.93942405.js"><link rel="prefetch" href="/edu_db_labs/assets/js/63.ec489be6.js"><link rel="prefetch" href="/edu_db_labs/assets/js/64.c838e4d5.js"><link rel="prefetch" href="/edu_db_labs/assets/js/65.ca6931ec.js"><link rel="prefetch" href="/edu_db_labs/assets/js/66.5fb19980.js"><link rel="prefetch" href="/edu_db_labs/assets/js/67.c791bda1.js"><link rel="prefetch" href="/edu_db_labs/assets/js/68.a5d21374.js"><link rel="prefetch" href="/edu_db_labs/assets/js/69.fc1dd2e7.js"><link rel="prefetch" href="/edu_db_labs/assets/js/7.7eaa817b.js"><link rel="prefetch" href="/edu_db_labs/assets/js/70.e7bf867d.js"><link rel="prefetch" href="/edu_db_labs/assets/js/71.1cf4ee54.js"><link rel="prefetch" href="/edu_db_labs/assets/js/72.21104c48.js"><link rel="prefetch" href="/edu_db_labs/assets/js/73.e5079b47.js"><link rel="prefetch" href="/edu_db_labs/assets/js/74.3a282a9b.js"><link rel="prefetch" href="/edu_db_labs/assets/js/75.6d3050b8.js"><link rel="prefetch" href="/edu_db_labs/assets/js/76.53bcab76.js"><link rel="prefetch" href="/edu_db_labs/assets/js/77.ebd81b23.js"><link rel="prefetch" href="/edu_db_labs/assets/js/78.21e38a8e.js"><link rel="prefetch" href="/edu_db_labs/assets/js/79.76414ca6.js"><link rel="prefetch" href="/edu_db_labs/assets/js/8.cd0ae959.js"><link rel="prefetch" href="/edu_db_labs/assets/js/80.259c268d.js"><link rel="prefetch" href="/edu_db_labs/assets/js/81.ed5b8875.js"><link rel="prefetch" href="/edu_db_labs/assets/js/82.e2853f40.js"><link rel="prefetch" href="/edu_db_labs/assets/js/83.0333e622.js"><link rel="prefetch" href="/edu_db_labs/assets/js/84.41089461.js"><link rel="prefetch" href="/edu_db_labs/assets/js/85.bedc7589.js"><link rel="prefetch" href="/edu_db_labs/assets/js/86.161a3e88.js"><link rel="prefetch" href="/edu_db_labs/assets/js/87.757b39e7.js"><link rel="prefetch" href="/edu_db_labs/assets/js/88.77f6eabf.js"><link rel="prefetch" href="/edu_db_labs/assets/js/89.01bee9f4.js"><link rel="prefetch" href="/edu_db_labs/assets/js/9.96875c5b.js"><link rel="prefetch" href="/edu_db_labs/assets/js/90.16ed1582.js"><link rel="prefetch" href="/edu_db_labs/assets/js/91.6dea86c6.js"><link rel="prefetch" href="/edu_db_labs/assets/js/92.3bdef911.js"><link rel="prefetch" href="/edu_db_labs/assets/js/93.06c73f52.js"><link rel="prefetch" href="/edu_db_labs/assets/js/94.03a20ac4.js"><link rel="prefetch" href="/edu_db_labs/assets/js/95.340823b1.js"><link rel="prefetch" href="/edu_db_labs/assets/js/96.6dd916db.js"><link rel="prefetch" href="/edu_db_labs/assets/js/97.7ff0fa79.js"><link rel="prefetch" href="/edu_db_labs/assets/js/98.bef6f258.js"><link rel="prefetch" href="/edu_db_labs/assets/js/99.b64ab4c2.js"><link rel="prefetch" href="/edu_db_labs/assets/js/vendors~docsearch.1f60d966.js">
    <link rel="stylesheet" href="/edu_db_labs/assets/css/0.styles.5e90a5e9.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/edu_db_labs/" class="home-link router-link-active"><!----> <span class="site-name">Назва проєкту</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/edu_db_labs/" class="nav-link">
  Початок
</a></div><div class="nav-item"><a href="/edu_db_labs/intro/" class="nav-link">
  Вступ
</a></div> <a href="https://github.com/edu-db/edu_db_labs" target="_blank" rel="noopener noreferrer" class="repo-link">
    Github
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/edu_db_labs/" class="nav-link">
  Початок
</a></div><div class="nav-item"><a href="/edu_db_labs/intro/" class="nav-link">
  Вступ
</a></div> <a href="https://github.com/edu-db/edu_db_labs" target="_blank" rel="noopener noreferrer" class="repo-link">
    Github
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><a href="/edu_db_labs/" aria-current="page" class="sidebar-link">Автори</a></li><li><a href="/edu_db_labs/intro/" class="sidebar-link">Вступ</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/edu_db_labs/intro/#мета-проєкту" class="sidebar-link">Мета проєкту</a></li><li class="sidebar-sub-header"><a href="/edu_db_labs/intro/#технічна-реалізація-проєкту" class="sidebar-link">Технічна реалізація проєкту</a></li><li class="sidebar-sub-header"><a href="/edu_db_labs/intro/#очікувані-результати" class="sidebar-link">Очікувані результати</a></li></ul></li><li><section class="sidebar-group collapsable depth-0"><a href="/edu_db_labs/requirements/" class="sidebar-heading clickable"><span>Розроблення загальних вимог до системи</span> <span class="arrow right"></span></a> <!----></section></li><li><a href="/edu_db_labs/use%20cases/" class="sidebar-link">Розроблення вимог до функціональности системи</a></li><li><a href="/edu_db_labs/design/" class="sidebar-link">Проектування інформаційного забезпечення</a></li><li><a href="/edu_db_labs/software/" aria-current="page" class="sidebar-link">Реалізація інформаційного та програмного забезпечення</a></li><li><a href="/edu_db_labs/real/" class="sidebar-link">Додатковий опис робіт</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/edu_db_labs/real/#зміст" class="sidebar-link">Зміст</a></li><li class="sidebar-sub-header"><a href="/edu_db_labs/real/#загальна-інформація" class="sidebar-link">Загальна інформація</a></li><li class="sidebar-sub-header"><a href="/edu_db_labs/real/#налаштування-проєкту" class="sidebar-link">Налаштування проєкту</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/edu_db_labs/real/#вимоги" class="sidebar-link">Вимоги</a></li><li class="sidebar-sub-header"><a href="/edu_db_labs/real/#установка" class="sidebar-link">Установка</a></li></ul></li><li class="sidebar-sub-header"><a href="/edu_db_labs/real/#структура-проєкту" class="sidebar-link">Структура проєкту</a></li><li class="sidebar-sub-header"><a href="/edu_db_labs/real/#основні-модулі" class="sidebar-link">Основні модулі</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/edu_db_labs/real/#користувачі-users" class="sidebar-link">Користувачі (Users)</a></li><li class="sidebar-sub-header"><a href="/edu_db_labs/real/#ролі-roles" class="sidebar-link">Ролі (Roles)</a></li><li class="sidebar-sub-header"><a href="/edu_db_labs/real/#дозволи-permissions" class="sidebar-link">Дозволи (Permissions)</a></li><li class="sidebar-sub-header"><a href="/edu_db_labs/real/#проєкти-projects" class="sidebar-link">Проєкти (Projects)</a></li><li class="sidebar-sub-header"><a href="/edu_db_labs/real/#завдання-tasks" class="sidebar-link">Завдання (Tasks)</a></li><li class="sidebar-sub-header"><a href="/edu_db_labs/real/#повідомлення-messages" class="sidebar-link">Повідомлення (Messages)</a></li><li class="sidebar-sub-header"><a href="/edu_db_labs/real/#звіти-reports" class="sidebar-link">Звіти (Reports)</a></li></ul></li><li class="sidebar-sub-header"><a href="/edu_db_labs/real/#зв-язки-між-сутностями" class="sidebar-link">Зв'язки між сутностями</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/edu_db_labs/real/#користувач-роль-user-role" class="sidebar-link">Користувач-Роль (User-Role)</a></li><li class="sidebar-sub-header"><a href="/edu_db_labs/real/#роль-дозвіл-role-permission" class="sidebar-link">Роль-Дозвіл (Role-Permission)</a></li><li class="sidebar-sub-header"><a href="/edu_db_labs/real/#проєкт-учасник-project-member" class="sidebar-link">Проєкт-Учасник (Project-Member)</a></li><li class="sidebar-sub-header"><a href="/edu_db_labs/real/#завдання-виконавець-task-assignment" class="sidebar-link">Завдання-Виконавець (Task-Assignment)</a></li></ul></li><li class="sidebar-sub-header"><a href="/edu_db_labs/real/#api-endpoints" class="sidebar-link">API Endpoints</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/edu_db_labs/real/#користувачі-users-2" class="sidebar-link">Користувачі (Users)</a></li><li class="sidebar-sub-header"><a href="/edu_db_labs/real/#ролі-roles-2" class="sidebar-link">Ролі (Roles)</a></li><li class="sidebar-sub-header"><a href="/edu_db_labs/real/#дозволи-permissions-2" class="sidebar-link">Дозволи (Permissions)</a></li><li class="sidebar-sub-header"><a href="/edu_db_labs/real/#проєкти-projects-2" class="sidebar-link">Проєкти (Projects)</a></li><li class="sidebar-sub-header"><a href="/edu_db_labs/real/#завдання-tasks-2" class="sidebar-link">Завдання (Tasks)</a></li><li class="sidebar-sub-header"><a href="/edu_db_labs/real/#повідомлення-messages-2" class="sidebar-link">Повідомлення (Messages)</a></li><li class="sidebar-sub-header"><a href="/edu_db_labs/real/#звіти-reports-2" class="sidebar-link">Звіти (Reports)</a></li><li class="sidebar-sub-header"><a href="/edu_db_labs/real/#користувач-роль-user-role-2" class="sidebar-link">Користувач-Роль (User-Role)</a></li><li class="sidebar-sub-header"><a href="/edu_db_labs/real/#роль-дозвіл-role-permission-2" class="sidebar-link">Роль-Дозвіл (Role-Permission)</a></li><li class="sidebar-sub-header"><a href="/edu_db_labs/real/#проєкт-учасник-project-member-2" class="sidebar-link">Проєкт-Учасник (Project-Member)</a></li><li class="sidebar-sub-header"><a href="/edu_db_labs/real/#завдання-виконавець-task-assignment-2" class="sidebar-link">Завдання-Виконавець (Task-Assignment)</a></li></ul></li><li class="sidebar-sub-header"><a href="/edu_db_labs/real/#приклади-запитів" class="sidebar-link">Приклади запитів</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/edu_db_labs/real/#створення-користувача" class="sidebar-link">Створення користувача</a></li><li class="sidebar-sub-header"><a href="/edu_db_labs/real/#створення-проєкту" class="sidebar-link">Створення проєкту</a></li><li class="sidebar-sub-header"><a href="/edu_db_labs/real/#призначення-ролі-користувачу" class="sidebar-link">Призначення ролі користувачу</a></li></ul></li><li class="sidebar-sub-header"><a href="/edu_db_labs/real/#помилки-та-обробка-винятків" class="sidebar-link">Помилки та обробка винятків</a></li><li class="sidebar-sub-header"><a href="/edu_db_labs/real/#база-даних" class="sidebar-link">База даних</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/edu_db_labs/real/#схема-бази-даних" class="sidebar-link">Схема бази даних</a></li><li class="sidebar-sub-header"><a href="/edu_db_labs/real/#приклад-sql-запитів-для-створення-таблиць" class="sidebar-link">Приклад SQL-запитів для створення таблиць</a></li></ul></li></ul></li><li><a href="/edu_db_labs/test/" class="sidebar-link">Тестування працездатності системи</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/edu_db_labs/test/#table-of-contents" class="sidebar-link">Table of Contents</a></li><li class="sidebar-sub-header"><a href="/edu_db_labs/test/#health-check" class="sidebar-link">Health Check</a></li><li class="sidebar-sub-header"><a href="/edu_db_labs/test/#users" class="sidebar-link">Users</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/edu_db_labs/test/#get-all-users" class="sidebar-link">Get All Users</a></li><li class="sidebar-sub-header"><a href="/edu_db_labs/test/#create-user" class="sidebar-link">Create User</a></li></ul></li><li class="sidebar-sub-header"><a href="/edu_db_labs/test/#projects" class="sidebar-link">Projects</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/edu_db_labs/test/#get-projects" class="sidebar-link">Get Projects</a></li><li class="sidebar-sub-header"><a href="/edu_db_labs/test/#create-project" class="sidebar-link">Create Project</a></li></ul></li><li class="sidebar-sub-header"><a href="/edu_db_labs/test/#tasks" class="sidebar-link">Tasks</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/edu_db_labs/test/#get-tasks" class="sidebar-link">Get Tasks</a></li><li class="sidebar-sub-header"><a href="/edu_db_labs/test/#create-task" class="sidebar-link">Create Task</a></li></ul></li><li class="sidebar-sub-header"><a href="/edu_db_labs/test/#messages" class="sidebar-link">Messages</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/edu_db_labs/test/#get-messages" class="sidebar-link">Get Messages</a></li></ul></li><li class="sidebar-sub-header"><a href="/edu_db_labs/test/#reports" class="sidebar-link">Reports</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/edu_db_labs/test/#create-report" class="sidebar-link">Create Report</a></li></ul></li></ul></li><li><a href="/edu_db_labs/conclusion/" class="sidebar-link">Висновки</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/edu_db_labs/conclusion/#оцінка-отриманих-результатів" class="sidebar-link">Оцінка отриманих результатів</a></li><li class="sidebar-sub-header"><a href="/edu_db_labs/conclusion/#технічні-інноваціі-та-рішення" class="sidebar-link">Технічні інновації та рішення</a></li><li class="sidebar-sub-header"><a href="/edu_db_labs/conclusion/#рекомендаціі-щодо-практичного-застосування" class="sidebar-link">Рекомендації щодо практичного застосування</a></li></ul></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="mapbox-node-pre-gyp"><a href="#mapbox-node-pre-gyp" class="header-anchor">#</a> @mapbox/node-pre-gyp</h1> <h4 id="mapbox-node-pre-gyp-makes-it-easy-to-publish-and-install-node-js-c-addons-from-binaries"><a href="#mapbox-node-pre-gyp-makes-it-easy-to-publish-and-install-node-js-c-addons-from-binaries" class="header-anchor">#</a> @mapbox/node-pre-gyp makes it easy to publish and install Node.js C++ addons from binaries</h4> <p><a href="https://travis-ci.com/mapbox/node-pre-gyp" target="_blank" rel="noopener noreferrer"><img src="https://travis-ci.com/mapbox/node-pre-gyp.svg?branch=master" alt="Build Status"><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> <a href="https://ci.appveyor.com/project/Mapbox/node-pre-gyp" target="_blank" rel="noopener noreferrer"><img src="https://ci.appveyor.com/api/projects/status/3nxewb425y83c0gv" alt="Build status"><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p><code>@mapbox/node-pre-gyp</code> stands between <a href="https://github.com/npm/npm" target="_blank" rel="noopener noreferrer">npm<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> and <a href="https://github.com/Tootallnate/node-gyp" target="_blank" rel="noopener noreferrer">node-gyp<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> and offers a cross-platform method of binary deployment.</p> <h3 id="special-note-on-previous-package"><a href="#special-note-on-previous-package" class="header-anchor">#</a> Special note on previous package</h3> <p>On Feb 9th, 2021 <code>@mapbox/node-pre-gyp@1.0.0</code> was <a href="/edu_db_labs/software/node_modules/@mapbox/node-pre-gyp/CHANGELOG.html">released</a>. Older, unscoped versions that are not part of the <code>@mapbox</code> org are deprecated and only <code>@mapbox/node-pre-gyp</code> will see updates going forward. To upgrade to the new package do:</p> <div class="language- extra-class"><pre class="language-text"><code>npm uninstall node-pre-gyp --save
npm install @mapbox/node-pre-gyp --save
</code></pre></div><h3 id="features"><a href="#features" class="header-anchor">#</a> Features</h3> <ul><li>A command line tool called <code>node-pre-gyp</code> that can install your package's C++ module from a binary.</li> <li>A variety of developer targeted commands for packaging, testing, and publishing binaries.</li> <li>A JavaScript module that can dynamically require your installed binary: <code>require('@mapbox/node-pre-gyp').find</code></li></ul> <p>For a hello world example of a module packaged with <code>node-pre-gyp</code> see <a href="https://github.com/springmeyer/node-addon-example" target="_blank" rel="noopener noreferrer">https://github.com/springmeyer/node-addon-example<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> and <a href="https://github.com/mapbox/node-pre-gyp/wiki/Modules-using-node-pre-gyp" target="_blank" rel="noopener noreferrer">the wiki <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> for real world examples.</p> <h2 id="credits"><a href="#credits" class="header-anchor">#</a> Credits</h2> <ul><li>The module is modeled after <a href="https://github.com/Tootallnate/node-gyp" target="_blank" rel="noopener noreferrer">node-gyp<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> by <a href="https://github.com/Tootallnate" target="_blank" rel="noopener noreferrer">@Tootallnate<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li>Motivation for initial development came from <a href="https://github.com/ErisDS" target="_blank" rel="noopener noreferrer">@ErisDS<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> and the <a href="https://github.com/TryGhost/Ghost" target="_blank" rel="noopener noreferrer">Ghost Project<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.</li> <li>Development is sponsored by <a href="https://www.mapbox.com/" target="_blank" rel="noopener noreferrer">Mapbox<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> <h2 id="faq"><a href="#faq" class="header-anchor">#</a> FAQ</h2> <p>See the <a href="https://github.com/mapbox/node-pre-gyp/wiki/FAQ" target="_blank" rel="noopener noreferrer">Frequently Ask Questions<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.</p> <h2 id="depends"><a href="#depends" class="header-anchor">#</a> Depends</h2> <ul><li>Node.js &gt;= node v8.x</li></ul> <h2 id="install"><a href="#install" class="header-anchor">#</a> Install</h2> <p><code>node-pre-gyp</code> is designed to be installed as a local dependency of your Node.js C++ addon and accessed like:</p> <div class="language- extra-class"><pre><code>./node_modules/.bin/node-pre-gyp --help
</code></pre></div><p>But you can also install it globally:</p> <div class="language- extra-class"><pre><code>npm install @mapbox/node-pre-gyp -g
</code></pre></div><h2 id="usage"><a href="#usage" class="header-anchor">#</a> Usage</h2> <h3 id="commands"><a href="#commands" class="header-anchor">#</a> Commands</h3> <p>View all possible commands:</p> <div class="language- extra-class"><pre><code>node-pre-gyp --help
</code></pre></div><ul><li>clean - Remove the entire folder containing the compiled .node module</li> <li>install - Install pre-built binary for module</li> <li>reinstall - Run &quot;clean&quot; and &quot;install&quot; at once</li> <li>build - Compile the module by dispatching to node-gyp or nw-gyp</li> <li>rebuild - Run &quot;clean&quot; and &quot;build&quot; at once</li> <li>package - Pack binary into tarball</li> <li>testpackage - Test that the staged package is valid</li> <li>publish - Publish pre-built binary</li> <li>unpublish - Unpublish pre-built binary</li> <li>info - Fetch info on published binaries</li></ul> <p>You can also chain commands:</p> <div class="language- extra-class"><pre><code>node-pre-gyp clean build unpublish publish info
</code></pre></div><h3 id="options"><a href="#options" class="header-anchor">#</a> Options</h3> <p>Options include:</p> <ul><li><code>-C/--directory</code>: run the command in this directory</li> <li><code>--build-from-source</code>: build from source instead of using pre-built binary</li> <li><code>--update-binary</code>: reinstall by replacing previously installed local binary with remote binary</li> <li><code>--runtime=node-webkit</code>: customize the runtime: <code>node</code>, <code>electron</code> and <code>node-webkit</code> are the valid options</li> <li><code>--fallback-to-build</code>: fallback to building from source if pre-built binary is not available</li> <li><code>--target=0.4.0</code>: Pass the target node or node-webkit version to compile against</li> <li><code>--target_arch=ia32</code>: Pass the target arch and override the host <code>arch</code>. Any value that is <a href="https://nodejs.org/api/os.html#osarch" target="_blank" rel="noopener noreferrer">supported by Node.js<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> is valid.</li> <li><code>--target_platform=win32</code>: Pass the target platform and override the host <code>platform</code>. Valid values are <code>linux</code>, <code>darwin</code>, <code>win32</code>, <code>sunos</code>, <code>freebsd</code>, <code>openbsd</code>, and <code>aix</code>.</li></ul> <p>Both <code>--build-from-source</code> and <code>--fallback-to-build</code> can be passed alone or they can provide values. You can pass <code>--fallback-to-build=false</code> to override the option as declared in package.json. In addition to being able to pass <code>--build-from-source</code> you can also pass <code>--build-from-source=myapp</code> where <code>myapp</code> is the name of your module.</p> <p>For example: <code>npm install --build-from-source=myapp</code>. This is useful if:</p> <ul><li><code>myapp</code> is referenced in the package.json of a larger app and therefore <code>myapp</code> is being installed as a dependency with <code>npm install</code>.</li> <li>The larger app also depends on other modules installed with <code>node-pre-gyp</code></li> <li>You only want to trigger a source compile for <code>myapp</code> and the other modules.</li></ul> <h3 id="configuring"><a href="#configuring" class="header-anchor">#</a> Configuring</h3> <p>This is a guide to configuring your module to use node-pre-gyp.</p> <h4 id="_1-add-new-entries-to-your-package-json"><a href="#_1-add-new-entries-to-your-package-json" class="header-anchor">#</a> 1) Add new entries to your <code>package.json</code></h4> <ul><li>Add <code>@mapbox/node-pre-gyp</code> to <code>dependencies</code></li> <li>Add <code>aws-sdk</code> as a <code>devDependency</code></li> <li>Add a custom <code>install</code> script</li> <li>Declare a <code>binary</code> object</li></ul> <p>This looks like:</p> <div class="language-js extra-class"><pre class="language-js"><code>    <span class="token string-property property">&quot;dependencies&quot;</span>  <span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token string-property property">&quot;@mapbox/node-pre-gyp&quot;</span><span class="token operator">:</span> <span class="token string">&quot;1.x&quot;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token string-property property">&quot;devDependencies&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token string-property property">&quot;aws-sdk&quot;</span><span class="token operator">:</span> <span class="token string">&quot;2.x&quot;</span>
    <span class="token punctuation">}</span>
    <span class="token string-property property">&quot;scripts&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token string-property property">&quot;install&quot;</span><span class="token operator">:</span> <span class="token string">&quot;node-pre-gyp install --fallback-to-build&quot;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token string-property property">&quot;binary&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token string-property property">&quot;module_name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;your_module&quot;</span><span class="token punctuation">,</span>
        <span class="token string-property property">&quot;module_path&quot;</span><span class="token operator">:</span> <span class="token string">&quot;./lib/binding/&quot;</span><span class="token punctuation">,</span>
        <span class="token string-property property">&quot;host&quot;</span><span class="token operator">:</span> <span class="token string">&quot;https://your_module.s3-us-west-1.amazonaws.com&quot;</span>
    <span class="token punctuation">}</span>
</code></pre></div><p>For a full example see <a href="https://github.com/springmeyer/node-addon-example/blob/master/package.json" target="_blank" rel="noopener noreferrer">node-addon-examples's package.json<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.</p> <p>Let's break this down:</p> <ul><li>Dependencies need to list <code>node-pre-gyp</code></li> <li>Your devDependencies should list <code>aws-sdk</code> so that you can run <code>node-pre-gyp publish</code> locally or a CI system. We recommend using <code>devDependencies</code> only since <code>aws-sdk</code> is large and not needed for <code>node-pre-gyp install</code> since it only uses http to fetch binaries</li> <li>Your <code>scripts</code> section should override the <code>install</code> target with <code>&quot;install&quot;: &quot;node-pre-gyp install --fallback-to-build&quot;</code>. This allows node-pre-gyp to be used instead of the default npm behavior of always source compiling with <code>node-gyp</code> directly.</li> <li>Your package.json should contain a <code>binary</code> section describing key properties you provide to allow node-pre-gyp to package optimally. They are detailed below.</li></ul> <p>Note: in the past we recommended putting <code>@mapbox/node-pre-gyp</code> in the <code>bundledDependencies</code>, but we no longer recommend this. In the past there were npm bugs (with node versions 0.10.x) that could lead to node-pre-gyp not being available at the right time during install (unless we bundled). This should no longer be the case. Also, for a time we recommended using <code>&quot;preinstall&quot;: &quot;npm install @mapbox/node-pre-gyp&quot;</code> as an alternative method to avoid needing to bundle. But this did not behave predictably across all npm versions - see https://github.com/mapbox/node-pre-gyp/issues/260 for the details. So we do not recommend using <code>preinstall</code> to install <code>@mapbox/node-pre-gyp</code>. More history on this at https://github.com/strongloop/fsevents/issues/157#issuecomment-265545908.</p> <h5 id="the-binary-object-has-three-required-properties"><a href="#the-binary-object-has-three-required-properties" class="header-anchor">#</a> The <code>binary</code> object has three required properties</h5> <h6 id="module-name"><a href="#module-name" class="header-anchor">#</a> module_name</h6> <p>The name of your native node module. This value must:</p> <ul><li>Match the name passed to <a href="http://nodejs.org/api/addons.html#addons_hello_world" target="_blank" rel="noopener noreferrer">the NODE_MODULE macro<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li>Must be a valid C variable name (e.g. it cannot contain <code>-</code>)</li> <li>Should not include the <code>.node</code> extension.</li></ul> <h6 id="module-path"><a href="#module-path" class="header-anchor">#</a> module_path</h6> <p>The location your native module is placed after a build. This should be an empty directory without other Javascript files. This entire directory will be packaged in the binary tarball. When installing from a remote package this directory will be overwritten with the contents of the tarball.</p> <p>Note: This property supports variables based on <a href="#versioning">Versioning</a>.</p> <h6 id="host"><a href="#host" class="header-anchor">#</a> host</h6> <p>A url to the remote location where you've published tarball binaries (must be <code>https</code> not <code>http</code>).</p> <p>It is highly recommended that you use Amazon S3. The reasons are:</p> <ul><li>Various node-pre-gyp commands like <code>publish</code> and <code>info</code> only work with an S3 host.</li> <li>S3 is a very solid hosting platform for distributing large files.</li> <li>We provide detail documentation for using <a href="#s3-hosting">S3 hosting</a> with node-pre-gyp.</li></ul> <p>Why then not require S3? Because while some applications using node-pre-gyp need to distribute binaries as large as 20-30 MB, others might have very small binaries and might wish to store them in a GitHub repo. This is not recommended, but if an author really wants to host in a non-S3 location then it should be possible.</p> <p>It should also be mentioned that there is an optional and entirely separate npm module called <a href="https://github.com/bchr02/node-pre-gyp-github" target="_blank" rel="noopener noreferrer">node-pre-gyp-github<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> which is intended to complement node-pre-gyp and be installed along with it. It provides the ability to store and publish your binaries within your repositories GitHub Releases if you would rather not use S3 directly. Installation and usage instructions can be found <a href="https://github.com/bchr02/node-pre-gyp-github" target="_blank" rel="noopener noreferrer">here<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>, but the basic premise is that instead of using the <code>node-pre-gyp publish</code> command you would use <code>node-pre-gyp-github publish</code>.</p> <h5 id="the-binary-object-other-optional-s3-properties"><a href="#the-binary-object-other-optional-s3-properties" class="header-anchor">#</a> The <code>binary</code> object other optional S3 properties</h5> <p>If you are not using a standard s3 path like <code>bucket_name.s3(.-)region.amazonaws.com</code>, you might get an error on <code>publish</code> because node-pre-gyp extracts the region and bucket from the <code>host</code> url. For example, you may have an on-premises s3-compatible storage  server, or may have configured a specific dns redirecting to an s3  endpoint. In these cases, you can explicitly set the <code>region</code> and <code>bucket</code> properties to tell node-pre-gyp to use these values instead of guessing from the <code>host</code> property. The following values can be used in the <code>binary</code> section:</p> <h6 id="host-2"><a href="#host-2" class="header-anchor">#</a> host</h6> <p>The url to the remote server root location (must be <code>https</code> not <code>http</code>).</p> <h6 id="bucket"><a href="#bucket" class="header-anchor">#</a> bucket</h6> <p>The bucket name where your tarball binaries should be located.</p> <h6 id="region"><a href="#region" class="header-anchor">#</a> region</h6> <p>Your S3 server region.</p> <h6 id="s3forcepathstyle"><a href="#s3forcepathstyle" class="header-anchor">#</a> s3ForcePathStyle</h6> <p>Set <code>s3ForcePathStyle</code> to true if the endpoint url should not be prefixed with the bucket name. If false (default), the server endpoint would be  constructed as <code>bucket_name.your_server.com</code>.</p> <h5 id="the-binary-object-has-optional-properties"><a href="#the-binary-object-has-optional-properties" class="header-anchor">#</a> The <code>binary</code> object has optional properties</h5> <h6 id="remote-path"><a href="#remote-path" class="header-anchor">#</a> remote_path</h6> <p>It <strong>is recommended</strong> that you customize this property. This is an extra path to use for publishing and finding remote tarballs. The default value for <code>remote_path</code> is <code>&quot;&quot;</code> meaning that if you do not provide it then all packages will be published at the base of the <code>host</code>. It is recommended to provide a value like <code>./{name}/v{version}</code> to help organize remote packages in the case that you choose to publish multiple node addons to the same <code>host</code>.</p> <p>Note: This property supports variables based on <a href="#versioning">Versioning</a>.</p> <h6 id="package-name"><a href="#package-name" class="header-anchor">#</a> package_name</h6> <p>It is <strong>not recommended</strong> to override this property unless you are also overriding the <code>remote_path</code>. This is the versioned name of the remote tarball containing the binary <code>.node</code> module and any supporting files you've placed inside the <code>module_path</code> directory. Unless you specify <code>package_name</code> in your <code>package.json</code> then it defaults to <code>{module_name}-v{version}-{node_abi}-{platform}-{arch}.tar.gz</code> which allows your binary to work across node versions, platforms, and architectures. If you are using <code>remote_path</code> that is also versioned by <code>./{module_name}/v{version}</code> then you could remove these variables from the <code>package_name</code> and just use: <code>{node_abi}-{platform}-{arch}.tar.gz</code>. Then your remote tarball will be looked up at, for example, <code>https://example.com/your-module/v0.1.0/node-v11-linux-x64.tar.gz</code>.</p> <p>Avoiding the version of your module in the <code>package_name</code> and instead only embedding in a directory name can be useful when you want to make a quick tag of your module that does not change any C++ code. In this case you can just copy binaries to the new version behind the scenes like:</p> <div class="language-sh extra-class"><pre class="language-sh"><code>aws s3 <span class="token function">sync</span> <span class="token parameter variable">--acl</span> public-read s3://mapbox-node-binary/sqlite3/v3.0.3/ s3://mapbox-node-binary/sqlite3/v3.0.4/
</code></pre></div><p>Note: This property supports variables based on <a href="#versioning">Versioning</a>.</p> <h4 id="_2-add-a-new-target-to-binding-gyp"><a href="#_2-add-a-new-target-to-binding-gyp" class="header-anchor">#</a> 2) Add a new target to binding.gyp</h4> <p><code>node-pre-gyp</code> calls out to <code>node-gyp</code> to compile the module and passes variables along like <a href="#module_name">module_name</a> and <a href="#module_path">module_path</a>.</p> <p>A new target must be added to <code>binding.gyp</code> that moves the compiled <code>.node</code> module from <code>./build/Release/module_name.node</code> into the directory specified by <code>module_path</code>.</p> <p>Add a target like this at the end of your <code>targets</code> list:</p> <div class="language-js extra-class"><pre class="language-js"><code>    <span class="token punctuation">{</span>
      <span class="token string-property property">&quot;target_name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;action_after_build&quot;</span><span class="token punctuation">,</span>
      <span class="token string-property property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;none&quot;</span><span class="token punctuation">,</span>
      <span class="token string-property property">&quot;dependencies&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span> <span class="token string">&quot;&lt;(module_name)&quot;</span> <span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token string-property property">&quot;copies&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token punctuation">{</span>
          <span class="token string-property property">&quot;files&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span> <span class="token string">&quot;&lt;(PRODUCT_DIR)/&lt;(module_name).node&quot;</span> <span class="token punctuation">]</span><span class="token punctuation">,</span>
          <span class="token string-property property">&quot;destination&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&lt;(module_path)&quot;</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">]</span>
    <span class="token punctuation">}</span>
</code></pre></div><p>For a full example see <a href="https://github.com/springmeyer/node-addon-example/blob/2ff60a8ded7f042864ad21db00c3a5a06cf47075/binding.gyp" target="_blank" rel="noopener noreferrer">node-addon-example's binding.gyp<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.</p> <h4 id="_3-dynamically-require-your-node"><a href="#_3-dynamically-require-your-node" class="header-anchor">#</a> 3) Dynamically require your <code>.node</code></h4> <p>Inside the main js file that requires your addon module you are likely currently doing:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> binding <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'../build/Release/binding.node'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>or:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> bindings <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'./bindings'</span><span class="token punctuation">)</span>
</code></pre></div><p>Change those lines to:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> binary <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'@mapbox/node-pre-gyp'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'path'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> binding_path <span class="token operator">=</span> binary<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span>path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span><span class="token string">'./package.json'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> binding <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span>binding_path<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>For a full example see <a href="https://github.com/springmeyer/node-addon-example/blob/2ff60a8ded7f042864ad21db00c3a5a06cf47075/index.js#L1-L4" target="_blank" rel="noopener noreferrer">node-addon-example's index.js<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h4 id="_4-build-and-package-your-app"><a href="#_4-build-and-package-your-app" class="header-anchor">#</a> 4) Build and package your app</h4> <p>Now build your module from source:</p> <div class="language- extra-class"><pre><code>npm install --build-from-source
</code></pre></div><p>The <code>--build-from-source</code> tells <code>node-pre-gyp</code> to not look for a remote package and instead dispatch to node-gyp to build.</p> <p>Now <code>node-pre-gyp</code> should now also be installed as a local dependency so the command line tool it offers can be found at <code>./node_modules/.bin/node-pre-gyp</code>.</p> <h4 id="_5-test"><a href="#_5-test" class="header-anchor">#</a> 5) Test</h4> <p>Now <code>npm test</code> should work just as it did before.</p> <h4 id="_6-publish-the-tarball"><a href="#_6-publish-the-tarball" class="header-anchor">#</a> 6) Publish the tarball</h4> <p>Then package your app:</p> <div class="language- extra-class"><pre><code>./node_modules/.bin/node-pre-gyp package
</code></pre></div><p>Once packaged, now you can publish:</p> <div class="language- extra-class"><pre><code>./node_modules/.bin/node-pre-gyp publish
</code></pre></div><p>Currently the <code>publish</code> command pushes your binary to S3. This requires:</p> <ul><li>You have installed <code>aws-sdk</code> with <code>npm install aws-sdk</code></li> <li>You have created a bucket already.</li> <li>The <code>host</code> points to an S3 http or https endpoint.</li> <li>You have configured node-pre-gyp to read your S3 credentials (see <a href="#s3-hosting">S3 hosting</a> for details).</li></ul> <p>You can also host your binaries elsewhere. To do this requires:</p> <ul><li>You manually publish the binary created by the <code>package</code> command to an <code>https</code> endpoint</li> <li>Ensure that the <code>host</code> value points to your custom <code>https</code> endpoint.</li></ul> <h4 id="_7-automate-builds"><a href="#_7-automate-builds" class="header-anchor">#</a> 7) Automate builds</h4> <p>Now you need to publish builds for all the platforms and node versions you wish to support. This is best automated.</p> <ul><li>See <a href="#appveyor-automation">Appveyor Automation</a> for how to auto-publish builds on Windows.</li> <li>See <a href="#travis-automation">Travis Automation</a> for how to auto-publish builds on OS X and Linux.</li></ul> <h4 id="_8-you-re-done"><a href="#_8-you-re-done" class="header-anchor">#</a> 8) You're done!</h4> <p>Now publish your module to the npm registry. Users will now be able to install your module from a binary.</p> <p>What will happen is this:</p> <ol><li><code>npm install &lt;your package&gt;</code> will pull from the npm registry</li> <li>npm will run the <code>install</code> script which will call out to <code>node-pre-gyp</code></li> <li><code>node-pre-gyp</code> will fetch the binary <code>.node</code> module and unpack in the right place</li> <li>Assuming that all worked, you are done</li></ol> <p>If a a binary was not available for a given platform and <code>--fallback-to-build</code> was used then <code>node-gyp rebuild</code> will be called to try to source compile the module.</p> <h4 id="_9-one-more-option"><a href="#_9-one-more-option" class="header-anchor">#</a> 9) One more option</h4> <p>It may be that you want to work with two s3 buckets, one for staging and one for production; this
arrangement makes it less likely to accidentally overwrite a production binary. It also allows the production
environment to have more restrictive permissions than staging while still enabling publishing when
developing and testing.</p> <p>The binary.host property can be set at execution time. In order to do so all of the following conditions
must be true.</p> <ul><li>binary.host is falsey or not present</li> <li>binary.staging_host is not empty</li> <li>binary.production_host is not empty</li></ul> <p>If any of these checks fail then the operation will not perform execution time determination of the s3 target.</p> <p>If the command being executed is either &quot;publish&quot; or &quot;unpublish&quot; then the default is set to <code>binary.staging_host</code>. In all other cases
the default is <code>binary.production_host</code>.</p> <p>The command-line options <code>--s3_host=staging</code> or <code>--s3_host=production</code> override the default. If <code>s3_host</code>
is present and not <code>staging</code> or <code>production</code> an exception is thrown.</p> <p>This allows installing from staging by specifying <code>--s3_host=staging</code>. And it requires specifying
<code>--s3_option=production</code> in order to publish to, or unpublish from, production, making accidental errors less likely.</p> <h2 id="node-api-considerations"><a href="#node-api-considerations" class="header-anchor">#</a> Node-API Considerations</h2> <p><a href="https://nodejs.org/api/n-api.html#n_api_node_api" target="_blank" rel="noopener noreferrer">Node-API<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>, which was previously known as N-API, is an ABI-stable alternative to previous technologies such as <a href="https://github.com/nodejs/nan" target="_blank" rel="noopener noreferrer">nan<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> which are tied to a specific Node runtime engine. Node-API is Node runtime engine agnostic and guarantees modules created today will continue to run, without changes, into the future.</p> <p>Using <code>node-pre-gyp</code> with Node-API projects requires a handful of additional configuration values and imposes some additional requirements.</p> <p>The most significant difference is that an Node-API module can be coded to target multiple  Node-API versions. Therefore, an Node-API module must declare in its <code>package.json</code> file which Node-API versions the module is designed to run against. In addition, since multiple builds may be required for a single module, path and file names must be specified in way that avoids naming conflicts.</p> <h3 id="the-napi-versions-array-property"><a href="#the-napi-versions-array-property" class="header-anchor">#</a> The <code>napi_versions</code> array property</h3> <p>A Node-API module must declare in its <code>package.json</code> file, the Node-API versions the module is intended to support. This is accomplished by including an <code>napi-versions</code> array property in the <code>binary</code> object. For example:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token string-property property">&quot;binary&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token string-property property">&quot;module_name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;your_module&quot;</span><span class="token punctuation">,</span>
    <span class="token string-property property">&quot;module_path&quot;</span><span class="token operator">:</span> <span class="token string">&quot;your_module_path&quot;</span><span class="token punctuation">,</span>
    <span class="token string-property property">&quot;host&quot;</span><span class="token operator">:</span> <span class="token string">&quot;https://your_bucket.s3-us-west-1.amazonaws.com&quot;</span><span class="token punctuation">,</span>
    <span class="token string-property property">&quot;napi_versions&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
</code></pre></div><p>If the <code>napi_versions</code> array property is <em>not</em> present, <code>node-pre-gyp</code> operates as it always has. Including the <code>napi_versions</code> array property instructs <code>node-pre-gyp</code> that this is a Node-API module build.</p> <p>When the <code>napi_versions</code> array property is present, <code>node-pre-gyp</code> fires off multiple operations, one for each of the Node-API versions in the array. In the example above, two operations are initiated, one for Node-API version 1 and second for Node-API version 3. How this version number is communicated is described next.</p> <h3 id="the-napi-build-version-value"><a href="#the-napi-build-version-value" class="header-anchor">#</a> The <code>napi_build_version</code> value</h3> <p>For each of the Node-API module operations <code>node-pre-gyp</code> initiates, it ensures that the <code>napi_build_version</code> is set appropriately.</p> <p>This value is of importance in two areas:</p> <ol><li>The C/C++ code which needs to know against which Node-API version it should compile.</li> <li><code>node-pre-gyp</code> itself which must assign appropriate path and file names to avoid collisions.</li></ol> <h3 id="defining-napi-version-for-the-c-c-code"><a href="#defining-napi-version-for-the-c-c-code" class="header-anchor">#</a> Defining <code>NAPI_VERSION</code> for the C/C++ code</h3> <p>The <code>napi_build_version</code> value is communicated to the C/C++ code by adding this code to the <code>binding.gyp</code> file:</p> <div class="language- extra-class"><pre class="language-text"><code>&quot;defines&quot;: [
    &quot;NAPI_VERSION=&lt;(napi_build_version)&quot;,
]
</code></pre></div><p>This ensures that <code>NAPI_VERSION</code>, an integer value, is declared appropriately to the C/C++ code for each build.</p> <blockquote><p>Note that earlier versions of this document recommended defining the symbol <code>NAPI_BUILD_VERSION</code>. <code>NAPI_VERSION</code> is preferred because it used by the Node-API C/C++ headers to configure the specific Node-API versions being requested.</p></blockquote> <h3 id="path-and-file-naming-requirements-in-package-json"><a href="#path-and-file-naming-requirements-in-package-json" class="header-anchor">#</a> Path and file naming requirements in <code>package.json</code></h3> <p>Since <code>node-pre-gyp</code> fires off multiple operations for each request, it is essential that path and file names be created in such a way as to avoid collisions. This is accomplished by imposing additional path and file naming requirements.</p> <p>Specifically, when performing Node-API builds, the <code>{napi_build_version}</code> text configuration value  <em>must</em> be present in the <code>module_path</code> property. In addition, the <code>{napi_build_version}</code> text configuration value  <em>must</em> be present in either the <code>remote_path</code> or <code>package_name</code> property. (No problem if it's in both.)</p> <p>Here's an example:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token string-property property">&quot;binary&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token string-property property">&quot;module_name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;your_module&quot;</span><span class="token punctuation">,</span>
    <span class="token string-property property">&quot;module_path&quot;</span><span class="token operator">:</span> <span class="token string">&quot;./lib/binding/napi-v{napi_build_version}&quot;</span><span class="token punctuation">,</span>
    <span class="token string-property property">&quot;remote_path&quot;</span><span class="token operator">:</span> <span class="token string">&quot;./{module_name}/v{version}/{configuration}/&quot;</span><span class="token punctuation">,</span>
    <span class="token string-property property">&quot;package_name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;{platform}-{arch}-napi-v{napi_build_version}.tar.gz&quot;</span><span class="token punctuation">,</span>
    <span class="token string-property property">&quot;host&quot;</span><span class="token operator">:</span> <span class="token string">&quot;https://your_bucket.s3-us-west-1.amazonaws.com&quot;</span><span class="token punctuation">,</span>
    <span class="token string-property property">&quot;napi_versions&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
</code></pre></div><h2 id="supporting-both-node-api-and-nan-builds"><a href="#supporting-both-node-api-and-nan-builds" class="header-anchor">#</a> Supporting both Node-API and NAN builds</h2> <p>You may have a legacy native add-on that you wish to continue supporting for those versions of Node that do not support Node-API, as you add Node-API support for later Node versions. This can be accomplished by specifying the <code>node_napi_label</code> configuration value in the package.json <code>binary.package_name</code> property.</p> <p>Placing the configuration value <code>node_napi_label</code> in the package.json <code>binary.package_name</code> property instructs <code>node-pre-gyp</code> to build all viable Node-API binaries supported by the current Node instance. If the current Node instance does not support Node-API, <code>node-pre-gyp</code> will request a traditional, non-Node-API build.</p> <p>The configuration value <code>node_napi_label</code> is set by <code>node-pre-gyp</code> to the type of build created, <code>napi</code> or <code>node</code>, and the version number. For Node-API builds, the string contains the Node-API version nad has values like <code>napi-v3</code>. For traditional, non-Node-API builds, the string contains the ABI version with values like <code>node-v46</code>.</p> <p>Here's how the <code>binary</code> configuration above might be changed to support both Node-API and NAN builds:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token string-property property">&quot;binary&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token string-property property">&quot;module_name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;your_module&quot;</span><span class="token punctuation">,</span>
    <span class="token string-property property">&quot;module_path&quot;</span><span class="token operator">:</span> <span class="token string">&quot;./lib/binding/{node_napi_label}&quot;</span><span class="token punctuation">,</span>
    <span class="token string-property property">&quot;remote_path&quot;</span><span class="token operator">:</span> <span class="token string">&quot;./{module_name}/v{version}/{configuration}/&quot;</span><span class="token punctuation">,</span>
    <span class="token string-property property">&quot;package_name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;{platform}-{arch}-{node_napi_label}.tar.gz&quot;</span><span class="token punctuation">,</span>
    <span class="token string-property property">&quot;host&quot;</span><span class="token operator">:</span> <span class="token string">&quot;https://your_bucket.s3-us-west-1.amazonaws.com&quot;</span><span class="token punctuation">,</span>
    <span class="token string-property property">&quot;napi_versions&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
</code></pre></div><p>The C/C++ symbol <code>NAPI_VERSION</code> can be used to distinguish Node-API and non-Node-API builds. The value of <code>NAPI_VERSION</code> is set to the integer Node-API version for Node-API builds and is set to <code>0</code> for non-Node-API builds.</p> <p>For example:</p> <div class="language-C extra-class"><pre class="language-c"><code><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">if</span> <span class="token expression">NAPI_VERSION</span></span>
<span class="token comment">// Node-API code goes here</span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">else</span></span>
<span class="token comment">// NAN code goes here</span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">endif</span></span>
</code></pre></div><h3 id="two-additional-configuration-values"><a href="#two-additional-configuration-values" class="header-anchor">#</a> Two additional configuration values</h3> <p>The following two configuration values, which were implemented in previous versions of <code>node-pre-gyp</code>, continue to exist, but have been replaced by the <code>node_napi_label</code> configuration value described above.</p> <ol><li><p><code>napi_version</code> If Node-API is supported by the currently executing Node instance, this value is the Node-API version number supported by Node. If Node-API is not supported, this value is an empty string.</p></li> <li><p><code>node_abi_napi</code> If the value returned for <code>napi_version</code> is non empty, this value is <code>'napi'</code>. If the value returned for <code>napi_version</code> is empty, this value is the value returned for <code>node_abi</code>.</p></li></ol> <p>These values are present for use in the <code>binding.gyp</code> file and may be used as <code>{napi_version}</code> and <code>{node_abi_napi}</code> for text substituion in the <code>binary</code> properties of the <code>package.json</code> file.</p> <h2 id="s3-hosting"><a href="#s3-hosting" class="header-anchor">#</a> S3 Hosting</h2> <p>You can host wherever you choose but S3 is cheap, <code>node-pre-gyp publish</code> expects it, and S3 can be integrated well with <a href="http://travis-ci.org" target="_blank" rel="noopener noreferrer">Travis.ci<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> to automate builds for OS X and Ubuntu, and with <a href="http://appveyor.com" target="_blank" rel="noopener noreferrer">Appveyor<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> to automate builds for Windows. Here is an approach to do this:</p> <p>First, get setup locally and test the workflow:</p> <h4 id="_1-create-an-s3-bucket"><a href="#_1-create-an-s3-bucket" class="header-anchor">#</a> 1) Create an S3 bucket</h4> <p>And have your <strong>key</strong> and <strong>secret key</strong> ready for writing to the bucket.</p> <p>It is recommended to create a IAM user with a policy that only gives permissions to the specific bucket you plan to publish to. This can be done in the <a href="https://console.aws.amazon.com/iam/" target="_blank" rel="noopener noreferrer">IAM console<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> by: 1) adding a new user, 2) choosing <code>Attach User Policy</code>, 3) Using the <code>Policy Generator</code>, 4) selecting <code>Amazon S3</code> for the service, 5) adding the actions: <code>DeleteObject</code>, <code>GetObject</code>, <code>GetObjectAcl</code>, <code>ListBucket</code>, <code>HeadBucket</code>, <code>PutObject</code>, <code>PutObjectAcl</code>, 6) adding an ARN of <code>arn:aws:s3:::bucket/*</code> (replacing <code>bucket</code> with your bucket name), and finally 7) clicking <code>Add Statement</code> and saving the policy. It should generate a policy like:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token punctuation">{</span>
    <span class="token string-property property">&quot;Version&quot;</span><span class="token operator">:</span> <span class="token string">&quot;2012-10-17&quot;</span><span class="token punctuation">,</span>
    <span class="token string-property property">&quot;Statement&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token punctuation">{</span>
            <span class="token string-property property">&quot;Sid&quot;</span><span class="token operator">:</span> <span class="token string">&quot;objects&quot;</span><span class="token punctuation">,</span>
            <span class="token string-property property">&quot;Effect&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Allow&quot;</span><span class="token punctuation">,</span>
            <span class="token string-property property">&quot;Action&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
                <span class="token string">&quot;s3:PutObject&quot;</span><span class="token punctuation">,</span>
                <span class="token string">&quot;s3:GetObjectAcl&quot;</span><span class="token punctuation">,</span>
                <span class="token string">&quot;s3:GetObject&quot;</span><span class="token punctuation">,</span>
                <span class="token string">&quot;s3:DeleteObject&quot;</span><span class="token punctuation">,</span>
                <span class="token string">&quot;s3:PutObjectAcl&quot;</span>
            <span class="token punctuation">]</span><span class="token punctuation">,</span>
            <span class="token string-property property">&quot;Resource&quot;</span><span class="token operator">:</span> <span class="token string">&quot;arn:aws:s3:::your-bucket-name/*&quot;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span>
            <span class="token string-property property">&quot;Sid&quot;</span><span class="token operator">:</span> <span class="token string">&quot;bucket&quot;</span><span class="token punctuation">,</span>
            <span class="token string-property property">&quot;Effect&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Allow&quot;</span><span class="token punctuation">,</span>
            <span class="token string-property property">&quot;Action&quot;</span><span class="token operator">:</span> <span class="token string">&quot;s3:ListBucket&quot;</span><span class="token punctuation">,</span>
            <span class="token string-property property">&quot;Resource&quot;</span><span class="token operator">:</span> <span class="token string">&quot;arn:aws:s3:::your-bucket-name&quot;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span>
            <span class="token string-property property">&quot;Sid&quot;</span><span class="token operator">:</span> <span class="token string">&quot;buckets&quot;</span><span class="token punctuation">,</span>
            <span class="token string-property property">&quot;Effect&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Allow&quot;</span><span class="token punctuation">,</span>
            <span class="token string-property property">&quot;Action&quot;</span><span class="token operator">:</span> <span class="token string">&quot;s3:HeadBucket&quot;</span><span class="token punctuation">,</span>
            <span class="token string-property property">&quot;Resource&quot;</span><span class="token operator">:</span> <span class="token string">&quot;*&quot;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="_2-install-node-pre-gyp"><a href="#_2-install-node-pre-gyp" class="header-anchor">#</a> 2) Install node-pre-gyp</h4> <p>Either install it globally:</p> <div class="language- extra-class"><pre><code>npm install node-pre-gyp -g
</code></pre></div><p>Or put the local version on your PATH</p> <div class="language- extra-class"><pre><code>export PATH=`pwd`/node_modules/.bin/:$PATH
</code></pre></div><h4 id="_3-configure-aws-credentials"><a href="#_3-configure-aws-credentials" class="header-anchor">#</a> 3) Configure AWS credentials</h4> <p>It is recommended to configure the AWS JS SDK v2 used internally by <code>node-pre-gyp</code> by setting these environment variables:</p> <ul><li>AWS_ACCESS_KEY_ID</li> <li>AWS_SECRET_ACCESS_KEY</li></ul> <p>But also you can also use the <code>Shared Config File</code> mentioned <a href="https://docs.aws.amazon.com/sdk-for-javascript/v2/developer-guide/configuring-the-jssdk.html" target="_blank" rel="noopener noreferrer">in the AWS JS SDK v2 docs<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h4 id="_4-package-and-publish-your-build"><a href="#_4-package-and-publish-your-build" class="header-anchor">#</a> 4) Package and publish your build</h4> <p>Install the <code>aws-sdk</code>:</p> <div class="language- extra-class"><pre><code>npm install aws-sdk
</code></pre></div><p>Then publish:</p> <div class="language- extra-class"><pre><code>node-pre-gyp package publish
</code></pre></div><p>Note: if you hit an error like <code>Hostname/IP doesn't match certificate's altnames</code> it may mean that you need to provide the <code>region</code> option in your config.</p> <h2 id="appveyor-automation"><a href="#appveyor-automation" class="header-anchor">#</a> Appveyor Automation</h2> <p><a href="http://www.appveyor.com/" target="_blank" rel="noopener noreferrer">Appveyor<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> can build binaries and publish the results per commit and supports:</p> <ul><li>Windows Visual Studio 2013 and related compilers</li> <li>Both 64 bit (x64) and 32 bit (x86) build configurations</li> <li>Multiple Node.js versions</li></ul> <p>For an example of doing this see <a href="https://github.com/mapbox/node-sqlite3/blob/master/appveyor.yml" target="_blank" rel="noopener noreferrer">node-sqlite3's appveyor.yml<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.</p> <p>Below is a guide to getting set up:</p> <h4 id="_1-create-a-free-appveyor-account"><a href="#_1-create-a-free-appveyor-account" class="header-anchor">#</a> 1) Create a free Appveyor account</h4> <p>Go to https://ci.appveyor.com/signup/free and sign in with your GitHub account.</p> <h4 id="_2-create-a-new-project"><a href="#_2-create-a-new-project" class="header-anchor">#</a> 2) Create a new project</h4> <p>Go to https://ci.appveyor.com/projects/new and select the GitHub repo for your module</p> <h4 id="_3-add-appveyor-yml-and-push-it"><a href="#_3-add-appveyor-yml-and-push-it" class="header-anchor">#</a> 3) Add appveyor.yml and push it</h4> <p>Once you have committed an <code>appveyor.yml</code> (<a href="http://www.appveyor.com/docs/appveyor-yml" target="_blank" rel="noopener noreferrer">appveyor.yml reference<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>) to your GitHub repo and pushed it AppVeyor should automatically start building your project.</p> <h4 id="_4-create-secure-variables"><a href="#_4-create-secure-variables" class="header-anchor">#</a> 4) Create secure variables</h4> <p>Encrypt your S3 AWS keys by going to <a href="https://ci.appveyor.com/tools/encrypt" target="_blank" rel="noopener noreferrer">https://ci.appveyor.com/tools/encrypt<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> and hitting the <code>encrypt</code> button.</p> <p>Then paste the result into your <code>appveyor.yml</code></p> <div class="language-yml extra-class"><pre class="language-yml"><code><span class="token key atrule">environment</span><span class="token punctuation">:</span>
  <span class="token key atrule">AWS_ACCESS_KEY_ID</span><span class="token punctuation">:</span>
    <span class="token key atrule">secure</span><span class="token punctuation">:</span> Dn9HKdLNYvDgPdQOzRq/DqZ/MPhjknRHB1o+/lVU8MA=
  <span class="token key atrule">AWS_SECRET_ACCESS_KEY</span><span class="token punctuation">:</span>
    <span class="token key atrule">secure</span><span class="token punctuation">:</span> W1rwNoSnOku1r+28gnoufO8UA8iWADmL1LiiwH9IOkIVhDTNGdGPJqAlLjNqwLnL
</code></pre></div><p>NOTE: keys are per account but not per repo (this is difference than Travis where keys are per repo but not related to the account used to encrypt them).</p> <h4 id="_5-hook-up-publishing"><a href="#_5-hook-up-publishing" class="header-anchor">#</a> 5) Hook up publishing</h4> <p>Just put <code>node-pre-gyp package publish</code> in your <code>appveyor.yml</code> after <code>npm install</code>.</p> <h4 id="_6-publish-when-you-want"><a href="#_6-publish-when-you-want" class="header-anchor">#</a> 6) Publish when you want</h4> <p>You might wish to publish binaries only on a specific commit. To do this you could borrow from the <a href="http://about.travis-ci.org/docs/user/how-to-skip-a-build/" target="_blank" rel="noopener noreferrer">Travis CI idea of commit keywords<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> and add special handling for commit messages with <code>[publish binary]</code>:</p> <div class="language- extra-class"><pre><code>SET CM=%APPVEYOR_REPO_COMMIT_MESSAGE%
if not &quot;%CM%&quot; == &quot;%CM:[publish binary]=%&quot; node-pre-gyp --msvs_version=2013 publish
</code></pre></div><p>If your commit message contains special characters (e.g. <code>&amp;</code>) this method might fail. An alternative is to use PowerShell, which gives you additional possibilities, like ignoring case by using <code>ToLower()</code>:</p> <div class="language- extra-class"><pre><code>ps: if($env:APPVEYOR_REPO_COMMIT_MESSAGE.ToLower().Contains('[publish binary]')) { node-pre-gyp --msvs_version=2013 publish }
</code></pre></div><p>Remember this publishing is not the same as <code>npm publish</code>. We're just talking about the binary module here and not your entire npm package.</p> <h2 id="travis-automation"><a href="#travis-automation" class="header-anchor">#</a> Travis Automation</h2> <p><a href="https://travis-ci.org/" target="_blank" rel="noopener noreferrer">Travis<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> can push to S3 after a successful build and supports both:</p> <ul><li>Ubuntu Precise and OS X (64 bit)</li> <li>Multiple Node.js versions</li></ul> <p>For an example of doing this see <a href="https://github.com/springmeyer/node-addon-example/blob/2ff60a8ded7f042864ad21db00c3a5a06cf47075/.travis.yml" target="_blank" rel="noopener noreferrer">node-add-example's .travis.yml<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.</p> <p>Note: if you need 32 bit binaries, this can be done from a 64 bit Travis machine. See <a href="https://github.com/mapbox/node-sqlite3/blob/bae122aa6a2b8a45f6b717fab24e207740e32b5d/scripts/build_against_node.sh#L54-L74" target="_blank" rel="noopener noreferrer">the node-sqlite3 scripts for an example of doing this<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.</p> <p>Below is a guide to getting set up:</p> <h4 id="_1-install-the-travis-gem"><a href="#_1-install-the-travis-gem" class="header-anchor">#</a> 1) Install the Travis gem</h4> <div class="language- extra-class"><pre><code>gem install travis
</code></pre></div><h4 id="_2-create-secure-variables"><a href="#_2-create-secure-variables" class="header-anchor">#</a> 2) Create secure variables</h4> <p>Make sure you run this command from within the directory of your module.</p> <p>Use <code>travis-encrypt</code> like:</p> <div class="language- extra-class"><pre><code>travis encrypt AWS_ACCESS_KEY_ID=${node_pre_gyp_accessKeyId}
travis encrypt AWS_SECRET_ACCESS_KEY=${node_pre_gyp_secretAccessKey}
</code></pre></div><p>Then put those values in your <code>.travis.yml</code> like:</p> <div class="language-yaml extra-class"><pre class="language-yaml"><code><span class="token key atrule">env</span><span class="token punctuation">:</span>
  <span class="token key atrule">global</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> <span class="token key atrule">secure</span><span class="token punctuation">:</span> F+sEL/v56CzHqmCSSES4pEyC9NeQlkoR0Gs/ZuZxX1ytrj8SKtp3MKqBj7zhIclSdXBz4Ev966Da5ctmcTd410p0b240MV6BVOkLUtkjZJyErMBOkeb8n8yVfSoeMx8RiIhBmIvEn+rlQq+bSFis61/JkE9rxsjkGRZi14hHr4M=
    <span class="token punctuation">-</span> <span class="token key atrule">secure</span><span class="token punctuation">:</span> o2nkUQIiABD139XS6L8pxq3XO5gch27hvm/gOdV+dzNKc/s2KomVPWcOyXNxtJGhtecAkABzaW8KHDDi5QL1kNEFx6BxFVMLO8rjFPsMVaBG9Ks6JiDQkkmrGNcnVdxI/6EKTLHTH5WLsz8+J7caDBzvKbEfTux5EamEhxIWgrI=
</code></pre></div><p>More details on Travis encryption at http://about.travis-ci.org/docs/user/encryption-keys/.</p> <h4 id="_3-hook-up-publishing"><a href="#_3-hook-up-publishing" class="header-anchor">#</a> 3) Hook up publishing</h4> <p>Just put <code>node-pre-gyp package publish</code> in your <code>.travis.yml</code> after <code>npm install</code>.</p> <h5 id="os-x-publishing"><a href="#os-x-publishing" class="header-anchor">#</a> OS X publishing</h5> <p>If you want binaries for OS X in addition to linux you can enable <a href="http://docs.travis-ci.com/user/multi-os/#Setting-.travis.yml" target="_blank" rel="noopener noreferrer">multi-os for Travis<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>Use a configuration like:</p> <div class="language-yml extra-class"><pre class="language-yml"><code>
<span class="token key atrule">language</span><span class="token punctuation">:</span> cpp

<span class="token key atrule">os</span><span class="token punctuation">:</span>
<span class="token punctuation">-</span> linux
<span class="token punctuation">-</span> osx

<span class="token key atrule">env</span><span class="token punctuation">:</span>
  <span class="token key atrule">matrix</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> NODE_VERSION=&quot;4&quot;
    <span class="token punctuation">-</span> NODE_VERSION=&quot;6&quot;

<span class="token key atrule">before_install</span><span class="token punctuation">:</span>
<span class="token punctuation">-</span> rm <span class="token punctuation">-</span>rf ~/.nvm/ <span class="token important">&amp;&amp;</span> git clone <span class="token punctuation">-</span><span class="token punctuation">-</span>depth 1 https<span class="token punctuation">:</span>//github.com/creationix/nvm.git ~/.nvm
<span class="token punctuation">-</span> source ~/.nvm/nvm.sh
<span class="token punctuation">-</span> nvm install $NODE_VERSION
<span class="token punctuation">-</span> nvm use $NODE_VERSION
</code></pre></div><p>See <a href="#travis-os-x-gotchas">Travis OS X Gotchas</a> for why we replace <code>language: node_js</code> and <code>node_js:</code> sections with <code>language: cpp</code> and a custom matrix.</p> <p>Also create platform specific sections for any deps that need install. For example if you need libpng:</p> <div class="language-yml extra-class"><pre class="language-yml"><code><span class="token punctuation">-</span> if <span class="token punctuation">[</span> $(uname <span class="token punctuation">-</span>s) == 'Linux' <span class="token punctuation">]</span>; then apt<span class="token punctuation">-</span>get install libpng<span class="token punctuation">-</span>dev; fi;
<span class="token punctuation">-</span> if <span class="token punctuation">[</span> $(uname <span class="token punctuation">-</span>s) == 'Darwin' <span class="token punctuation">]</span>; then brew install libpng; fi;
</code></pre></div><p>For detailed multi-OS examples see <a href="https://github.com/mapnik/node-mapnik/blob/master/.travis.yml" target="_blank" rel="noopener noreferrer">node-mapnik<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> and <a href="https://github.com/mapbox/node-sqlite3/blob/master/.travis.yml" target="_blank" rel="noopener noreferrer">node-sqlite3<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.</p> <h5 id="travis-os-x-gotchas"><a href="#travis-os-x-gotchas" class="header-anchor">#</a> Travis OS X Gotchas</h5> <p>First, unlike the Travis Linux machines, the OS X machines do not put <code>node-pre-gyp</code> on PATH by default. To do so you will need to:</p> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token builtin class-name">export</span> <span class="token assign-left variable"><span class="token environment constant">PATH</span></span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span><span class="token builtin class-name">pwd</span><span class="token variable">)</span></span>/node_modules/.bin:<span class="token variable">${<span class="token environment constant">PATH</span>}</span>
</code></pre></div><p>Second, the OS X machines do not support using a matrix for installing different Node.js versions. So you need to bootstrap the installation of Node.js in a cross platform way.</p> <p>By doing:</p> <div class="language-yml extra-class"><pre class="language-yml"><code><span class="token key atrule">env</span><span class="token punctuation">:</span>
  <span class="token key atrule">matrix</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> NODE_VERSION=&quot;4&quot;
    <span class="token punctuation">-</span> NODE_VERSION=&quot;6&quot;

<span class="token key atrule">before_install</span><span class="token punctuation">:</span>
 <span class="token punctuation">-</span> rm <span class="token punctuation">-</span>rf ~/.nvm/ <span class="token important">&amp;&amp;</span> git clone <span class="token punctuation">-</span><span class="token punctuation">-</span>depth 1 https<span class="token punctuation">:</span>//github.com/creationix/nvm.git ~/.nvm
 <span class="token punctuation">-</span> source ~/.nvm/nvm.sh
 <span class="token punctuation">-</span> nvm install $NODE_VERSION
 <span class="token punctuation">-</span> nvm use $NODE_VERSION
</code></pre></div><p>You can easily recreate the previous behavior of this matrix:</p> <div class="language-yml extra-class"><pre class="language-yml"><code><span class="token key atrule">node_js</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> <span class="token string">&quot;4&quot;</span>
  <span class="token punctuation">-</span> <span class="token string">&quot;6&quot;</span>
</code></pre></div><h4 id="_4-publish-when-you-want"><a href="#_4-publish-when-you-want" class="header-anchor">#</a> 4) Publish when you want</h4> <p>You might wish to publish binaries only on a specific commit. To do this you could borrow from the <a href="http://about.travis-ci.org/docs/user/how-to-skip-a-build/" target="_blank" rel="noopener noreferrer">Travis CI idea of commit keywords<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> and add special handling for commit messages with <code>[publish binary]</code>:</p> <div class="language- extra-class"><pre><code>COMMIT_MESSAGE=$(git log --format=%B --no-merges -n 1 | tr -d '\n')
if [[ ${COMMIT_MESSAGE} =~ &quot;[publish binary]&quot; ]]; then node-pre-gyp publish; fi;
</code></pre></div><p>Then you can trigger new binaries to be built like:</p> <div class="language- extra-class"><pre><code>git commit -a -m &quot;[publish binary]&quot;
</code></pre></div><p>Or, if you don't have any changes to make simply run:</p> <div class="language- extra-class"><pre><code>git commit --allow-empty -m &quot;[publish binary]&quot;
</code></pre></div><p>WARNING: if you are working in a pull request and publishing binaries from there then you will want to avoid double publishing when Travis CI builds both the <code>push</code> and <code>pr</code>. You only want to run the publish on the <code>push</code> commit. See https://github.com/Project-OSRM/node-osrm/blob/8eb837abe2e2e30e595093d16e5354bc5c573575/scripts/is_pr_merge.sh which is called from https://github.com/Project-OSRM/node-osrm/blob/8eb837abe2e2e30e595093d16e5354bc5c573575/scripts/publish.sh for an example of how to do this.</p> <p>Remember this publishing is not the same as <code>npm publish</code>. We're just talking about the binary module here and not your entire npm package. To automate the publishing of your entire package to npm on Travis see http://about.travis-ci.org/docs/user/deployment/npm/</p> <h1 id="versioning"><a href="#versioning" class="header-anchor">#</a> Versioning</h1> <p>The <code>binary</code> properties of <code>module_path</code>, <code>remote_path</code>, and <code>package_name</code> support variable substitution. The strings are evaluated by <code>node-pre-gyp</code> depending on your system and any custom build flags you passed.</p> <ul><li><code>node_abi</code>: The node C++ <code>ABI</code> number. This value is available in Javascript as <code>process.versions.modules</code> as of <a href="https://github.com/joyent/node/commit/ccabd4a6fa8a6eb79d29bc3bbe9fe2b6531c2d8e" target="_blank" rel="noopener noreferrer"><code>&gt;= v0.10.4 &gt;= v0.11.7</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> and in C++ as the <code>NODE_MODULE_VERSION</code> define much earlier. For versions of Node before this was available we fallback to the V8 major and minor version.</li> <li><code>platform</code> matches node's <code>process.platform</code> like <code>linux</code>, <code>darwin</code>, and <code>win32</code> unless the user passed the <code>--target_platform</code> option to override.</li> <li><code>arch</code> matches node's <code>process.arch</code> like <code>x64</code> or <code>ia32</code> unless the user passes the <code>--target_arch</code> option to override.</li> <li><code>libc</code> matches <code>require('detect-libc').family</code> like <code>glibc</code> or <code>musl</code> unless the user passes the <code>--target_libc</code> option to override.</li> <li><code>configuration</code> - Either 'Release' or 'Debug' depending on if <code>--debug</code> is passed during the build.</li> <li><code>module_name</code> - the <code>binary.module_name</code> attribute from <code>package.json</code>.</li> <li><code>version</code> - the semver <code>version</code> value for your module from <code>package.json</code> (NOTE: ignores the <code>semver.build</code> property).</li> <li><code>major</code>, <code>minor</code>, <code>patch</code>, and <code>prelease</code> match the individual semver values for your module's <code>version</code></li> <li><code>build</code> - the sevmer <code>build</code> value. For example it would be <code>this.that</code> if your package.json <code>version</code> was <code>v1.0.0+this.that</code></li> <li><code>prerelease</code> - the semver <code>prerelease</code> value. For example it would be <code>alpha.beta</code> if your package.json <code>version</code> was <code>v1.0.0-alpha.beta</code></li></ul> <p>The options are visible in the code at <a href="https://github.com/mapbox/node-pre-gyp/blob/612b7bca2604508d881e1187614870ba19a7f0c5/lib/util/versioning.js#L114-L127" target="_blank" rel="noopener noreferrer">https://github.com/mapbox/node-pre-gyp/blob/612b7bca2604508d881e1187614870ba19a7f0c5/lib/util/versioning.js#L114-L127<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h1 id="download-binary-files-from-a-mirror"><a href="#download-binary-files-from-a-mirror" class="header-anchor">#</a> Download binary files from a mirror</h1> <p>S3 is broken in China for the well known reason.</p> <p>Using the <code>npm</code> config argument: <code>--{module_name}_binary_host_mirror</code> can download binary files through a mirror, <code>-</code> in <code>module_name</code> will be replaced with <code>_</code>.</p> <p>e.g.: Install <a href="https://www.npmjs.com/package/v8-profiler" target="_blank" rel="noopener noreferrer">v8-profiler<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> from <code>npm</code>.</p> <div class="language-bash extra-class"><pre class="language-bash"><code>$ <span class="token function">npm</span> <span class="token function">install</span> v8-profiler <span class="token parameter variable">--profiler_binary_host_mirror</span><span class="token operator">=</span>https://npm.taobao.org/mirrors/node-inspector/
</code></pre></div><p>e.g.: Install <a href="https://www.npmjs.com/package/canvas-prebuilt" target="_blank" rel="noopener noreferrer">canvas-prebuilt<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> from <code>npm</code>.</p> <div class="language-bash extra-class"><pre class="language-bash"><code>$ <span class="token function">npm</span> <span class="token function">install</span> canvas-prebuilt <span class="token parameter variable">--canvas_prebuilt_binary_host_mirror</span><span class="token operator">=</span>https://npm.taobao.org/mirrors/canvas-prebuilt/
</code></pre></div></div> <footer class="page-edit"><!----> <!----></footer> <!----> </main></div><div class="global-ui"><!----></div></div>
    <script src="/edu_db_labs/assets/js/app.b4446a62.js" defer></script><script src="/edu_db_labs/assets/js/2.c940f4cf.js" defer></script><script src="/edu_db_labs/assets/js/1.444b6f58.js" defer></script><script src="/edu_db_labs/assets/js/45.0ce1e552.js" defer></script>
  </body>
</html>
